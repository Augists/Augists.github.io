<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Augists-ZDCZ</title>
  
  <subtitle>LESS is MORE</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://augists.top/"/>
  <updated>2022-01-10T13:00:39.981Z</updated>
  <id>https://augists.top/</id>
  
  <author>
    <name>Augists</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Why My Devices Cannot Automatically Connect to Mbp</title>
    <link href="https://augists.top/SELF/SHARING/LIFE/Why-my-devices-cannot-automatically-connect-to-mbp/"/>
    <id>https://augists.top/SELF/SHARING/LIFE/Why-my-devices-cannot-automatically-connect-to-mbp/</id>
    <published>2022-01-10T12:27:43.000Z</published>
    <updated>2022-01-10T13:00:39.981Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>æ—©å…ˆçš„æ— çº¿è®¾å¤‡å¤§å¤šä½¿ç”¨çš„æ˜¯ 2.4G æ— çº¿æ¥æ”¶å™¨æ¥è¿›è¡Œä¼ è¾“ï¼Œä¾‹å¦‚ä¹‹å‰ä½¿ç”¨çš„ç½—æŠ€ M370 å’Œ ikbc pokerï¼Œå¹¶ä¸”è€³æœºä¹Ÿä¸€ç›´ç”¨ç€ 3.5mm çš„éŸ³é¢‘çº¿ï¼Œå¯ä»¥è¯´å¯¹è“ç‰™çœŸæ— çº¿ä¸€ç›´æ²¡æœ‰æ¥è§¦å¾ˆå¤š<br>è‡ªä»å»å¹´æ¢ç”¨äº† HHKBï¼Œç»å¸¸éœ€è¦ä½¿ç”¨è“ç‰™æ¥è¿›è¡Œè¿æ¥ã€‚å‰å‡ å¤©åˆä¹°äº†ç½—æŠ€çš„ mx master 2s ä½œä¸ºåœ¨å®¶é‡Œä½¿ç”¨çš„è¿‡æ¸¡å“ï¼Œè€³æœºä¹Ÿæ”¹ä¸ºäº†æ— çº¿è“ç‰™æ¥è¿›è¡Œä¼ è¾“ï¼Œè“ç‰™è‡ªåŠ¨è¿æ¥çš„é—®é¢˜å°±ä¸€ç›´åœ¨å›°æ‰°ç€æˆ‘</p><div class="note danger">            <p>ä¸ºä»€ä¹ˆæˆ‘åœ¨å”¤é†’ç”µè„‘ä¹‹åï¼Œåªæœ‰è€³æœºè‡ªåŠ¨è¿æ¥äº†ç”µè„‘ï¼Œå¦å¤–ä¸¤ä¸ªéƒ½æ— æ³•è¿æ¥</p>          </div><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç‚¹å‡»ç³»ç»Ÿ menu bar ä¸Šçš„è“ç‰™å°å›¾æ ‡æ—¶ï¼Œå¦‚æœæŒ‰ä½ <code>option</code> å†ç‚¹ï¼Œä¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼›æ—§ç‰ˆæœ¬çš„ç³»ç»Ÿåœ¨æŒ‰ä½ <code>shift + option</code> ç‚¹å‡»æ—¶ï¼Œå¯ä»¥é‡ç½®è“ç‰™æ¨¡å—ï¼ˆç°åœ¨å¥½åƒæ²¡æœ‰äº†<br>æ°å·§æˆ‘å†æŸ¥çœ‹çš„æ—¶å€™ï¼Œæ³¨æ„åˆ°æˆ‘çš„ç”µè„‘è“ç‰™å¼€å…³ä¸‹æœ‰ä¸€è¡Œå°å­—å†™ç€ <code>Discoverable: off</code><br>æˆ‘å°±æ„Ÿè§‰ä¸æ˜¯å¾ˆå¯¹åŠ²</p><p>æ ¹æ® ssh å¿ƒè·³åŒ…çš„ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥çŒœæµ‹ï¼Œè€³æœºç”±äºæ²¡æœ‰å…³æœºå¹¶ä¸”æ˜¯éŸ³é¢‘è®¾å¤‡ï¼Œå¯èƒ½ä¼šä¸€ç›´ç”¨å¿ƒè·³åŒ…æ¥ç»´æŒè“ç‰™çš„è¿æ¥<br>è€Œé”®ç›˜å’Œé¼ æ ‡éƒ½æœ‰é•¿æ—¶é—´ä¸ç”¨è‡ªåŠ¨æ–­ç”µçš„åŠŸèƒ½<br>ç”±äº mac çš„è“ç‰™è¢«è®¾å®šä¸ºä¸å¯ä»¥è¢«å‘ç°ï¼Œæ‰€ä»¥å½“ç”µè„‘ä¸æ˜¯ä¸»åŠ¨å»å‘ç°å¹¶è¿æ¥è®¾å¤‡æ—¶ï¼Œè®¾å¤‡çš„ä¸»åŠ¨å°è¯•è¿æ¥å¤±æ•ˆ</p><p>è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå¯ä»¥åœ¨ <code>ç³»ç»Ÿåå¥½è®¾ç½® - Sharing - Bluetooth Sharing</code> å°†å…¶å‹¾é€‰æ‰“å¼€ï¼Œè¿™æ ·ç”µè„‘å°±å…è®¸è¢«å…¶ä»–è®¾å¤‡é€šè¿‡è“ç‰™è¿›è¡Œæ‰«æå‘ç°äº†</p>          </div>]]></content>
    
    <summary type="html">
    
      After getting more wireless connectivity devices, I have unfortunately found that my Bluetooth devices have a high probability of not connecting every time I wake up my Macbook Pro.&lt;br&gt; At first I thought it was the fault of HHKB, but now I am temporarily a fan of bluetooth wireless&lt;br&gt; I bought a Logi master 2s as my new mouse to cope with the use of scenarios at home&lt;br&gt; Also my Audio-Technica headphones also changed to wireless mode&lt;br&gt; Just now I wake up my mac and only headphones connected&lt;br&gt; It really bothered me for a long time
    
    </summary>
    
    
    
      <category term="MAC" scheme="https://augists.top/tags/MAC/"/>
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>AODV Analysis</title>
    <link href="https://augists.top/SELF/SHARING/STUDY/AODV-Source-Code-Analysis/"/>
    <id>https://augists.top/SELF/SHARING/STUDY/AODV-Source-Code-Analysis/</id>
    <published>2022-01-03T15:26:34.000Z</published>
    <updated>2022-01-03T15:31:07.219Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <h1 id="AODV-åè®®åŸºæœ¬åŸç†åŠå·¥ä½œæµç¨‹"><a href="#AODV-åè®®åŸºæœ¬åŸç†åŠå·¥ä½œæµç¨‹" class="headerlink" title="AODV åè®®åŸºæœ¬åŸç†åŠå·¥ä½œæµç¨‹"></a>AODV åè®®åŸºæœ¬åŸç†åŠå·¥ä½œæµç¨‹</h1><h2 id="AODV-ç®€ä»‹"><a href="#AODV-ç®€ä»‹" class="headerlink" title="AODV ç®€ä»‹"></a>AODV ç®€ä»‹</h2><blockquote><p>The Ad hoc On-Demand Distance Vector (AODV) algorithm enables<br>dynamic, self-starting, multihop routing between participating mobile<br>nodes wishing to establish and maintain an ad hoc network.  AODV<br>allows mobile nodes to obtain routes quickly for new destinations,<br>and does not require nodes to maintain routes to destinations that<br>are not in active communication.  AODV allows mobile nodes to respond<br>to link breakages and changes in network topology in a timely manner.<br>The operation of AODV is loop-free, and by avoiding the Bellman-Ford<br>â€œcounting to infinityâ€ problem offers quick convergence when the ad<br>hoc network topology changes (typically, when a node moves in the<br>network).  When links break, AODV causes the affected set of nodes to<br>be notified so that they are able to invalidate the routes using the<br>lost link.</p></blockquote><p>One distinguishing feature of AODV is its use of a destination<br>sequence number for each route entry.  The destination sequence<br>number is created by the destination to be included along with any<br>route information it sends to requesting nodes.  Using destination<br>sequence numbers ensures loop freedom and is simple to program.<br>Given the choice between two routes to a destination, a requesting<br>node is required to select the one with the greatest sequence number.</p><p>AODV uses the following fields with each route table entry:</p><ul><li>Destination IP Address</li><li>Destination Sequence Number</li><li>Valid Destination Sequence Number flag</li><li>Other state and routing flags (e.g., valid, invalid, repairable, being repaired)</li><li>Network Interface</li><li>Hop Count (number of hops needed to reach destination)</li><li>Next Hop</li><li>List of Precursors (described in Section 6.2)</li><li>Lifetime (expiration or deletion time of the route)</li></ul><hr><h2 id="AODV-ç‰¹ç‚¹"><a href="#AODV-ç‰¹ç‚¹" class="headerlink" title="AODV ç‰¹ç‚¹"></a>AODV ç‰¹ç‚¹</h2><ul><li>æ¥å…¥é€Ÿåº¦å¿«</li><li>è®¡ç®—é‡å°</li><li>å†…å­˜å ç”¨ä½</li><li>ç½‘ç»œè´Ÿè½½è½»</li></ul><p>ç–‘é—®ğŸ¤”ï¸ï¼šAODV åè®®é€šè¿‡ç®¡ç† sequence number æ¥åœ¨æœ‰å¤šä¸ªæœ‰æ•ˆè·¯ç”±çš„æƒ…å†µä¸‹è¿›è¡Œå†³ç­–ï¼Œæ¯ä½¿ç”¨è¿‡ä¸€æ¬¡ sequence number+1ï¼Œå¹¶ä»¥æ­¤æ¥è¡¨ç¤ºèŠ‚ç‚¹çš„æ–°é²œç¨‹åº¦ï¼Œé€‰æ‹© sequence number è¾ƒå¤§çš„æœ‰æ•ˆè·¯ç”±ã€‚è¿™æ ·éš¾é“ä¸ä¼šå¯¼è‡´ç§¯å‹ã€å¢å¤§è´Ÿè½½å—ï¼Ÿæ„Ÿè§‰å¹¶ä¸æ˜¯ä¸€ä¸ªåˆç†çš„æ–¹æ¡ˆ</p><hr><h2 id="AODV-Message-Type"><a href="#AODV-Message-Type" class="headerlink" title="AODV Message Type"></a>AODV Message Type</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* AODV Message types */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AODV_HELLO 0 <span class="comment">/* Really never used as a separate type... */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AODV_RREQ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AODV_RREP 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AODV_RERR 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AODV_RREP_ACK 4</span></span><br></pre></td></tr></table></figure><hr><h2 id="AODV-æ–‡ä»¶æ ‘åˆ†æ"><a href="#AODV-æ–‡ä»¶æ ‘åˆ†æ" class="headerlink" title="AODV æ–‡ä»¶æ ‘åˆ†æ"></a>AODV æ–‡ä»¶æ ‘åˆ†æ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ ChangeLog</span><br><span class="line">â”œâ”€â”€ GPL</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ README</span><br><span class="line">â”œâ”€â”€ README.ns</span><br><span class="line">â”œâ”€â”€ TODO</span><br><span class="line">â”œâ”€â”€ aodv_hello.c</span><br><span class="line">â”œâ”€â”€ aodv_hello.h</span><br><span class="line">â”œâ”€â”€ aodv_neighbor.c</span><br><span class="line">â”œâ”€â”€ aodv_neighbor.h</span><br><span class="line">â”œâ”€â”€ aodv_rerr.c</span><br><span class="line">â”œâ”€â”€ aodv_rerr.h</span><br><span class="line">â”œâ”€â”€ aodv_rrep.c</span><br><span class="line">â”œâ”€â”€ aodv_rrep.h</span><br><span class="line">â”œâ”€â”€ aodv_rreq.c</span><br><span class="line">â”œâ”€â”€ aodv_rreq.h</span><br><span class="line">â”œâ”€â”€ aodv_socket.c</span><br><span class="line">â”œâ”€â”€ aodv_socket.h</span><br><span class="line">â”œâ”€â”€ aodv_timeout.c</span><br><span class="line">â”œâ”€â”€ aodv_timeout.h</span><br><span class="line">â”œâ”€â”€ debug.c</span><br><span class="line">â”œâ”€â”€ debug.h</span><br><span class="line">â”œâ”€â”€ defs.h</span><br><span class="line">â”œâ”€â”€ endian.c</span><br><span class="line">â”œâ”€â”€ list.c</span><br><span class="line">â”œâ”€â”€ list.h</span><br><span class="line">â”œâ”€â”€ llf.c</span><br><span class="line">â”œâ”€â”€ llf.h</span><br><span class="line">â”œâ”€â”€ lnx</span><br><span class="line">â”‚   â”œâ”€â”€ Makefile</span><br><span class="line">â”‚   â”œâ”€â”€ TAGS</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-debug.c</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-debug.h</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-expl.c</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-expl.h</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-ipenc.c</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-ipenc.h</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-mod.c</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-mod.h</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-netlink.c</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-netlink.h</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-queue.c</span><br><span class="line">â”‚   â”œâ”€â”€ kaodv-queue.h</span><br><span class="line">â”‚   â””â”€â”€ kaodv.h</span><br><span class="line">â”œâ”€â”€ locality.c</span><br><span class="line">â”œâ”€â”€ locality.h</span><br><span class="line">â”œâ”€â”€ main.c</span><br><span class="line">â”œâ”€â”€ nl.c</span><br><span class="line">â”œâ”€â”€ nl.h</span><br><span class="line">â”œâ”€â”€ params.h</span><br><span class="line">â”œâ”€â”€ patches</span><br><span class="line">â”‚   â”œâ”€â”€ ns-2.26-aodv-uu-0.8.patch</span><br><span class="line">â”‚   â”œâ”€â”€ ns-2.27-aodv-uu-0.8.patch</span><br><span class="line">â”‚   â”œâ”€â”€ ns-2.27-aodv-uu-0.9.1.patch</span><br><span class="line">â”‚   â”œâ”€â”€ ns-2.27-aodv-uu-0.9.patch</span><br><span class="line">â”‚   â”œâ”€â”€ ns-2.28-aodv-uu-0.9.1.patch</span><br><span class="line">â”‚   â”œâ”€â”€ ns-2.29-aodv-uu-0.9.1-dsr-uu-0.2-oolsr-0.99.15.patch</span><br><span class="line">â”‚   â”œâ”€â”€ ns-2.29.3-aodv-uu-0.9.2.patch</span><br><span class="line">â”‚   â””â”€â”€ ns-2.32-aodv-uu.patch</span><br><span class="line">â”œâ”€â”€ rfc3561.txt</span><br><span class="line">â”œâ”€â”€ routing_table.c</span><br><span class="line">â”œâ”€â”€ routing_table.h</span><br><span class="line">â”œâ”€â”€ seek_list.c</span><br><span class="line">â”œâ”€â”€ seek_list.h</span><br><span class="line">â”œâ”€â”€ tags</span><br><span class="line">â”œâ”€â”€ timer_queue.c</span><br><span class="line">â””â”€â”€ timer_queue.h</span><br><span class="line"></span><br><span class="line">2 directories, 65 files</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡åœ¨ AODV é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ <code>tree</code> å¯ä»¥å¾—åˆ°å¦‚ä¸Šé¢ä»£ç å—ä¸­çš„ç»“æœã€‚é¡¹ç›®ä¸­å…±æœ‰65ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­é€šè¿‡åˆ†æ Makefile æ–‡ä»¶ä¸­çš„ç¼–è¯‘é“¾æ¥æ–¹å¼æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒAODV é¡¹ç›®å…±æä¾›äº†ä¸¤å¤§æ–¹å‘ï¼Œåˆ†åˆ«ä¸º ns-2 æ¨¡æ‹Ÿå™¨è¿è¡Œå’Œå®é™…è¿è¡ŒæœåŠ¡ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SRC =  main.c list.c debug.c timer_queue.c aodv_socket.c aodv_hello.c \</span><br><span class="line">  aodv_neighbor.c aodv_timeout.c routing_table.c seek_list.c \</span><br><span class="line">  aodv_rreq.c aodv_rrep.c aodv_rerr.c nl.c</span><br><span class="line"></span><br><span class="line">SRC_NS =   debug.c list.c timer_queue.c aodv_socket.c aodv_hello.c \</span><br><span class="line">    aodv_neighbor.c aodv_timeout.c routing_table.c seek_list.c \</span><br><span class="line">    aodv_rreq.c aodv_rrep.c aodv_rerr.c</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼ŒSRC æ˜¯ä¸ºå®é™…è¿è¡Œä½¿ç”¨çš„ c æ–‡ä»¶ï¼Œè€Œ SRC_NS æ˜¯åœ¨ NS æ¨¡æ‹Ÿå™¨ä¸­ç¼–è¯‘éœ€è¦ä½¿ç”¨çš„æ–‡ä»¶ã€‚åœ¨è¿™æ¬¡å¯¹ AODV æºä»£ç åˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªå…³æ³¨äºå®ƒè¿ç”¨åœ¨å®è·µä¸­çš„ä»£ç éƒ¨åˆ†ã€‚æ‰€ä»¥ä¸ä»…æ˜¯ SRC_NS çš„æ–‡ä»¶ï¼Œåœ¨ SRC çš„æ–‡ä»¶ä¸­å¦‚æœé‡åˆ°ä¾‹å¦‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> NS_PORT</span></span><br><span class="line"><span class="comment">/* code */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éƒ½å¯ä»¥å°†å…¶åŒ–ç®€ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰éœ€è¦æŸ¥çœ‹çš„æºä»£ç æ–‡ä»¶æ ¹æ®æˆ‘ä»¬å®šä¸‹çš„é˜…è¯»é¡ºåºè¿›è¡Œäº†åˆ†ç±»ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><ul><li>Preparation<ul><li>params.h: AODV è¿è¡Œæ—¶çš„å‚æ•°å®šä¹‰</li><li>defs.h: åŒ…å«äº† AODV ä»£ç ä¸­çš„ä¸»è¦å®å®šä¹‰ï¼Œä¾‹å¦‚ <code>MINTTL</code>ã€AODV message type ç­‰å…¨å±€å®å®šä¹‰ï¼Œä»¥åŠå¯¹ä¸»æœºå’Œç½‘å¡è®¾å¤‡çš„ä¿¡æ¯ç»“æ„ä½“ <code>host_info</code> å’Œ<code>dev_info</code></li><li>list.{c|h}: å¯¹å¾ªç¯åŒé“¾è¡¨ç»“æ„ <code>list_t</code> çš„å®šä¹‰åŠæ“ä½œ</li><li>timer_queue.{c|h}: å®šæ—¶å™¨ <code>timer</code> çš„å®šä¹‰åŠæ“ä½œï¼Œä¾æ‰˜äº <code>list_t</code> å¾ªç¯åŒé“¾è¡¨è¿›è¡Œä¸²è”</li><li>routing_table.{c|h}: è·¯ç”±è¡¨çš„å®šä¹‰åŠæ“ä½œ</li><li>endian.c: å¯¹äºç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å¤§å°ç«¯çš„å®šä¹‰ï¼Œè¢«åº”ç”¨äº aodv ç»“æ„ä½“å†…å˜é‡é¡ºåº</li></ul></li><li>AODV Message<ul><li>aodv_hello.{c|h}: </li><li>aodv_neighbor.{c|h}:</li><li>aodv_rreq.{c|h}:</li><li>aodv_rrep.{c|h}:</li><li>aodv_rerr.{c|h}:</li><li>aodv_socket.{c|h}:</li><li>aodv_timeout.{c|h}:</li></ul></li><li>Main<ul><li>llf.{c|h}: é“¾è·¯å±‚åé¦ˆ</li><li>locality.{c|h}: å¯»æ‰¾ç›®çš„åœ°çš„æ–¹ä½</li><li>nl.{c|h}: AODV åè®®ä¸“ç”¨å¥—æ¥å­—</li><li>seek_list.{c|h}: RREQå¯»æ‰¾çš„ç›®çš„åœ°é“¾è¡¨</li><li>main.c: åè®®åˆå§‹åŒ–å’Œè¿è¡Œ</li></ul></li></ul><hr><h2 id="define-do-while-0"><a href="#define-do-while-0" class="headerlink" title="#define do while (0)"></a><code>#define do while (0)</code></h2><p><a href="https://www.linuxidc.com/Linux/2014-10/108520.htm">Cè¯­è¨€å®å®šè¯­æ‰§è¡Œå¤šæ¡è¯­å¥ä¸€èˆ¬éƒ½ä¼šç”¨ do { â€¦ } while (0)</a></p><hr><h2 id="list-c"><a href="#list-c" class="headerlink" title="list.c"></a><code>list.c</code></h2><ul><li><code>list.c</code> æ–‡ä»¶æ˜¯æ‰€æœ‰<strong>å¾ªç¯åŒé“¾è¡¨</strong> æ“ä½œï¼Œæœ‰ä¸€ä¸ªç©ºçš„å¤´èŠ‚ç‚¹ head<ul><li><code>listelm_detach</code>: æŠŠä¸¤ä¸ªå‚æ•°çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥</li><li><code>listelm_add</code>: ç¬¬ä¸€ä¸ªå‚æ•°çš„èŠ‚ç‚¹æ·»åŠ åˆ°åä¸¤ä¸ªèŠ‚ç‚¹ä¸­é—´</li><li><code>list_add</code>: æ’å…¥å¤´èŠ‚ç‚¹ä¹‹åçš„é‚£ä¸ªä½ç½®</li><li><code>list_add_tail</code>: ç›¸å½“äºæ’å…¥tailä½ç½®</li><li><code>list_detach</code>: æŠŠå‚æ•°ä¸­çš„èŠ‚ç‚¹åˆ é™¤</li></ul></li></ul><blockquote><p>æ‰€æœ‰ <code>list_t *le</code> éƒ½å…¨åæ˜¯ list element</p></blockquote><hr><h2 id="Log-Path"><a href="#Log-Path" class="headerlink" title="Log Path"></a>Log Path</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AODV_LOG_PATH <span class="meta-string">&quot;/var/log/aodvd.log&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AODV_RT_LOG_PATH <span class="meta-string">&quot;/var/log/aodvd.rtlog&quot;</span></span></span><br></pre></td></tr></table></figure><hr><h2 id="defs-h"><a href="#defs-h" class="headerlink" title="defs.h"></a><code>defs.h</code></h2><ul><li><p><code>defs.h</code></p><ul><li><p>host ä¸»æœº, dev ç½‘å¡</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Data for a network device */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">dev_info</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> enabled; <span class="comment">/* 1 if struct is used, else 0 */</span></span><br><span class="line">    <span class="keyword">int</span> sock;    <span class="comment">/* AODV socket associated with this device */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> CONFIG_GATEWAY</span></span><br><span class="line">    <span class="keyword">int</span> psock; <span class="comment">/* Socket to send buffered data packets. */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> ifindex;</span><br><span class="line">    <span class="keyword">char</span> ifname[IFNAMSIZ];</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> <span class="title">ipaddr</span>;</span>  <span class="comment">/* The local IP address */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> <span class="title">netmask</span>;</span> <span class="comment">/* The netmask we use */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> <span class="title">broadcast</span>;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">host_info</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">u_int32_t</span> seqno;           <span class="comment">/* Sequence number */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">bcast_time</span>;</span> <span class="comment">/* The time of the last broadcast msg sent */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">fwd_time</span>;</span>   <span class="comment">/* The time a data packet was last forwarded */</span></span><br><span class="line">    <span class="keyword">u_int32_t</span> rreq_id;         <span class="comment">/* RREQ id */</span></span><br><span class="line">    <span class="keyword">int</span> nif;                   <span class="comment">/* Number of interfaces to broadcast on */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dev_info</span></span></span><br><span class="line"><span class="class">        <span class="title">devs</span>[<span class="title">MAX_NR_INTERFACES</span> +</span></span><br><span class="line"><span class="class">             1];</span> <span class="comment">/* Add +1 for returning as &quot;error&quot; in ifindex2devindex. */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><code>host_info</code> ä¸­å­˜å‚¨ <code>def_info</code> æ•°ç»„ï¼Œå¤šå¼€äº†ä¸€ä¸ªä½ç½® <code>(MAX_NR_INTERFACES+1)</code>ï¼Œè®©å‡½æ•°è¿”å›é”™è¯¯æ—¶ä½¿ç”¨ï¼Œæ¥ä»£è¡¨ error</p></li><li><p><code>ifindex</code> å…¨ç§°æ˜¯ network interface index</p></li><li><p>å¯¹ <code>AODV_msg</code> ç»“æ„ä½“è¿›è¡Œç®€åŒ–åä¸º</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">u_int8_t</span> type;</span><br><span class="line">&#125; AODV_msg;</span><br></pre></td></tr></table></figure>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* An generic AODV extensions header */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> type;</span><br><span class="line">    <span class="keyword">u_int8_t</span> length;</span><br><span class="line">    <span class="comment">/* Type specific data follows here */</span></span><br><span class="line">&#125; AODV_ext;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h2 id="å¯¹-list-t-å’Œ-timer-åµŒå¥—ç»“æ„ä½“çš„ç†è§£"><a href="#å¯¹-list-t-å’Œ-timer-åµŒå¥—ç»“æ„ä½“çš„ç†è§£" class="headerlink" title="å¯¹ list_t å’Œ timer åµŒå¥—ç»“æ„ä½“çš„ç†è§£"></a>å¯¹ <code>list_t</code> å’Œ <code>timer</code> åµŒå¥—ç»“æ„ä½“çš„ç†è§£</h2><p><img src="https://s2.loli.net/2021/12/12/ZitwIevknBAWyQ6.jpg" alt="timeré€šè¿‡list_tå®ç°å¾ªç¯åŒé“¾è¡¨"></p><hr><h2 id="timeval-ç»“æ„ä½“åœ¨ä¸åŒç³»ç»Ÿä¸­çš„ä¸åŒå®šä¹‰"><a href="#timeval-ç»“æ„ä½“åœ¨ä¸åŒç³»ç»Ÿä¸­çš„ä¸åŒå®šä¹‰" class="headerlink" title="timeval ç»“æ„ä½“åœ¨ä¸åŒç³»ç»Ÿä¸­çš„ä¸åŒå®šä¹‰"></a><code>timeval</code> ç»“æ„ä½“åœ¨ä¸åŒç³»ç»Ÿä¸­çš„ä¸åŒå®šä¹‰</h2><ul><li><p>åœ¨ Linux ä¸­<code>time.h</code>åº“æ–‡ä»¶å†…</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">timeval</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">__time_t</span> tv_sec;        <span class="comment">/* Seconds. */</span></span><br><span class="line"><span class="keyword">__suseconds_t</span> tv_usec;  <span class="comment">/* Microseconds. */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ macOS ä¸­</p><ul><li><p>util_ldap.h</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> timeval l_timeval</span></span><br></pre></td></tr></table></figure></li><li><p>time.h</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Structure used as a parameter by getitimer(2) and setitimer(2) system</span></span><br><span class="line"><span class="comment"> * calls.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span>  <span class="title">itimerval</span> &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span>  <span class="title">timeval</span> <span class="title">it_interval</span>;</span>    <span class="comment">/* timer interval */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span>  <span class="title">timeval</span> <span class="title">it_value</span>;</span>       <span class="comment">/* current value */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>clock_types.h</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Normal time specification used by the kernel clock facility.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mach_timespec</span> &#123;</span></span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span>    tv_sec;                 <span class="comment">/* seconds */</span></span><br><span class="line">  <span class="keyword">clock_res_t</span>             tv_nsec;                <span class="comment">/* nanoseconds */</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">mach_timespec</span>    <span class="title">mach_timespec_t</span>;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h2 id="timer-queue-c"><a href="#timer-queue-c" class="headerlink" title="timer_queue.c"></a><code>timer_queue.c</code></h2><ul><li><p><code>timer_queue.c</code></p><ul><li><p><code>timer_timeout</code> å‡½æ•°</p><ul><li>å¯¹ <code>list_t</code> ä¸²è”èµ·æ¥çš„ <code>timer</code> å¾ªç¯åŒé“¾è¡¨ <code>TQ</code></li><li>å¾ªç¯åˆ¤æ–­å…¶æ—¶é—´æ˜¯å¦ä¸ºå½“å‰æ—¶é—´ï¼Œå°† <code>timeout</code> çš„ <code>timer</code> æ”¾å…¥ <code>expTQ</code> ä¸­<ul><li>è‹¥æ˜¯ï¼Œåˆ™ä» <code>TQ</code> ä¸­ç§»é™¤ï¼Œå¹¶åŠ å…¥åˆ° <code>expTQ</code></li><li>è‹¥å¦ï¼Œåˆ™ç»ˆæ­¢å¾ªç¯åˆ¤æ–­</li></ul></li><li>å¾ªç¯æ‰§è¡Œå¹¶åˆ é™¤ <code>expTQ</code> ä¸­ <code>timer</code> çš„ handler function</li></ul></li><li><p><code>timer_remove</code></p><ul><li><code>t-&gt;used</code> ç½® 0</li></ul></li><li><p><code>timer_add</code></p><ul><li><p><code>t-&gt;used</code> ç½® 1</p></li><li><p>åˆ¤æ–­ <code>TQ</code> æ˜¯å¦ä¸ºç©º</p><ul><li>è‹¥ç©ºï¼Œåˆ™ç›´æ¥æ·»åŠ </li><li>è‹¥éç©ºï¼Œåˆ™éå† <code>TQ</code>ï¼Œå°† t æŒ‰ç…§æ—¶é—´é¡ºåºæ·»åŠ åˆ° <code>TQ</code> ä¸­</li></ul></li><li><p><code>timer_timeout_now</code></p><ul><li><p>åˆ¤æ–­ <code>timer</code> æ˜¯å¦åœ¨ <code>TQ</code> ä¸­</p><ul><li>è‹¥æ˜¯ï¼Œåˆ™æ‰§è¡Œ <code>handler</code>ï¼Œå¹¶ <code>t-&gt;used</code> ç½® 0ï¼Œ<code>timer</code> ä¾æ—§åœ¨ <code>TQ</code> ä¸­ç­‰å¾…æ‰§è¡Œ</li><li>è‹¥å¦ï¼Œåˆ™è¿”å›-1</li></ul></li><li><p><code>timer_set_timeout</code></p><ul><li><p><code>t-&gt;used</code> ç½® 0</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t-&gt;timeout.tv_usec += msec * <span class="number">1000</span>;</span><br><span class="line">t-&gt;timeout.tv_sec += t-&gt;timeout.tv_usec / <span class="number">1000000</span>;</span><br><span class="line">t-&gt;timeout.tv_usec = t-&gt;timeout.tv_usec % <span class="number">1000000</span>;</span><br></pre></td></tr></table></figure></li><li><p><code>timer_add(t)</code></p></li></ul></li></ul></li></ul></li></ul></li></ul><hr><h2 id="AODV-Socket"><a href="#AODV-Socket" class="headerlink" title="AODV Socket"></a>AODV Socket</h2><p>åœ¨å¯¹äº <code>aodv_socket.{c|h}</code> æ–‡ä»¶çš„åˆ†æä¸­ï¼Œæˆ‘ä»¬å‘ç°å®ƒå¤§é‡ä¾èµ–äºç³»ç»Ÿ C è¯­è¨€æºä»£ç ä¸­çš„ <code>struct cmsghdr</code>ï¼Œäºæ˜¯æˆ‘ä»¬æŸ¥çœ‹äº†ç³»ç»Ÿæºä»£ç  C è¯­è¨€æ–‡ä»¶ä¸­çš„ <code>socket.h</code> æ–‡ä»¶ï¼Œå¹¶ä»ä¸­æ‰¾åˆ°äº†å¯¹äº <code>msghdr</code> å’Œ <code>cmsghdr</code> ç»“æ„ä½“çš„å®šä¹‰ã€‚</p><ul><li><p><code>msghdr</code>ï¼šç”¨äºè°ƒç”¨ recvmsg å’Œ sendmsg çš„æ¶ˆæ¯å¤´ã€‚åœ¨ recvmsg ä¸­ä½¿ç”¨å€¼ä¸ç»“æœç›¸å¯¹åº”ï¼Œè€Œåœ¨ sendmsg ä¸­ä»…ä½¿ç”¨å€¼ã€‚</p><ul><li>å¥—æ¥å£åœ°å€æˆå‘˜ <code>msg_name</code> ä¸ <code>msg_namelen</code>ï¼Œåˆ†åˆ«æŒ‡å‘æˆ‘ä»¬è¦å‘é€æˆ–æ˜¯æ¥æ”¶ä¿¡æ¯çš„å¥—æ¥å£åœ°å€åŠè¿™ä¸ªå¥—æ¥å£åœ°å€çš„é•¿åº¦<ul><li>å½“è°ƒç”¨ recvmsg æ—¶ï¼Œmsg_name ä¼šæŒ‡å‘ä¸€ä¸ªå°†è¦æ¥æ”¶çš„åœ°å€çš„æ¥æ”¶åŒºåŸŸ</li><li>å½“è°ƒç”¨ sendmsg æ—¶ï¼Œå®ƒä¼šæŒ‡å‘ä¸€ä¸ªæ•°æ®æŠ¥å°†è¦å‘é€åˆ°çš„ç›®çš„åœ°å€</li></ul></li><li>I/O å‘é‡å¼•ç”¨ <code>msg_iov</code> ä¸ <code>msg_iovlen</code></li><li>é™„å±æ•°æ®ç¼“å†²åŒºæˆå‘˜ <code>msg_control</code> ä¸ <code>msg_controllen</code></li><li>æ¥æ”¶ä¿¡æ¯æ ‡è®°ä½ <code>msg_flags</code>ï¼Œå…¶å¯ä»¥æ¥æ”¶çš„æ ‡è®°å¦‚ä¸‹</li></ul><table><thead><tr><th>æ ‡è®°ä½</th><th>æè¿°</th></tr></thead><tbody><tr><td>MSG_EOR</td><td>å½“æ¥æ”¶åˆ°è®°å½•ç»“å°¾æ—¶ä¼šè®¾ç½®è¿™ä¸€ä½ã€‚è¿™é€šå¸¸å¯¹äºSOCK_SEQPACKETå¥—æ¥å£ç±»å‹ååˆ†æœ‰ç”¨</td></tr><tr><td>MSG_TRUNC</td><td>è¿™ä¸ªæ ‡è®°ä½è¡¨æ˜æ•°æ®çš„ç»“å°¾è¢«æˆªçŸ­ï¼Œå› ä¸ºæ¥æ”¶ç¼“å†²åŒºå¤ªå°ä¸è¶³ä»¥æ¥æ”¶å…¨éƒ¨çš„æ•°æ®</td></tr><tr><td>MSG_CTRUNC</td><td>è¿™ä¸ªæ ‡è®°ä½è¡¨æ˜æŸäº›æ§åˆ¶æ•°æ®(é™„å±æ•°æ®)è¢«æˆªçŸ­ï¼Œå› ä¸ºç¼“å†²åŒºå¤ªå°</td></tr><tr><td>MSG_OOB</td><td>è¿™ä¸ªæ ‡è®°ä½è¡¨æ˜æ¥æ”¶äº†å¸¦å¤–æ•°æ®</td></tr><tr><td>MSG_ERRQUEUE</td><td>è¿™ä¸ªæ ‡è®°ä½è¡¨æ˜æ²¡æœ‰æ¥æ”¶åˆ°æ•°æ®ï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ªæ‰©å±•é”™è¯¯</td></tr></tbody></table></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">msghdr</span> &#123;</span></span><br><span class="line">    <span class="keyword">void</span>            *msg_name;      <span class="comment">/* [XSI] optional address */</span></span><br><span class="line">    <span class="keyword">socklen_t</span>       msg_namelen;    <span class="comment">/* [XSI] size of address */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span>          <span class="title">iovec</span> *<span class="title">msg_iov</span>;</span> <span class="comment">/* [XSI] scatter/gather array */</span></span><br><span class="line">    <span class="keyword">int</span>             msg_iovlen;     <span class="comment">/* [XSI] # elements in msg_iov */</span></span><br><span class="line">    <span class="keyword">void</span>            *msg_control;   <span class="comment">/* [XSI] ancillary data, see below */</span></span><br><span class="line">    <span class="keyword">socklen_t</span>       msg_controllen; <span class="comment">/* [XSI] ancillary data buffer len */</span></span><br><span class="line">    <span class="keyword">int</span>             msg_flags;      <span class="comment">/* [XSI] flags on received message */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>cmsghdr</code>ï¼šmsg_control ç¼“å†²åŒºä¸­è¾…åŠ©æ•°æ®å¯¹è±¡çš„å¤´ã€‚ç”¨äºæä¾›æ•°æ®æŠ¥çš„é¢å¤–ä¿¡æ¯çš„é™„åŠ ä¿¡æ¯ã€‚ æ ¼å¼æ˜¯ä¸€ä¸²ä»¥ cmsghdr ç»“æ„ä¸ºé¦–çš„ä¿¡æ¯å…ƒç´ çš„åºåˆ—ã€‚<ul><li><code>cmsg_len</code>:  é™„å±æ•°æ®çš„å­—èŠ‚è®¡æ•°ï¼Œè¿™åŒ…å«ç»“æ„å¤´çš„å°ºå¯¸ã€‚è¿™ä¸ªå€¼æ˜¯ç”± <code>CMSG_LEN()</code> å®è®¡ç®—çš„</li><li><code>cmsg_level</code>:  è¿™ä¸ªå€¼è¡¨æ˜äº†åŸå§‹çš„åè®®çº§åˆ«(ä¾‹å¦‚ï¼Œ<code>SOL_SOCKET</code>)</li><li><code>cmsg_type</code>:  è¿™ä¸ªå€¼è¡¨æ˜äº†æ§åˆ¶ä¿¡æ¯ç±»å‹(ä¾‹å¦‚ï¼Œ<code>SCM_RIGHTS</code>)</li><li><code>cmsg_data</code>:  è¿™ä¸ªæˆå‘˜å¹¶ä¸å®é™…å­˜åœ¨ã€‚ä»–ç”¨æ¥æŒ‡æ˜å®é™…çš„é¢å¤–é™„å±æ•°æ®æ‰€åœ¨çš„ä½ç½®</li></ul></li></ul><p>å¯¹ <code>msg_level</code> çš„æè¿°å¦‚ä¸‹ï¼š</p><table><thead><tr><th>cmsg_level</th><th>æè¿°</th></tr></thead><tbody><tr><td>SCM_RIGHTS</td><td>é™„å±æ•°æ®å¯¹è±¡æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦</td></tr><tr><td>SCM_CREDENTIALS</td><td>é™„å±æ•°æ®å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ…å«è¯ä¹¦ä¿¡æ¯çš„ç»“æ„</td></tr></tbody></table><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cmsghdr</span> &#123;</span></span><br><span class="line">    <span class="keyword">socklen_t</span>       cmsg_len;       <span class="comment">/* [XSI] data byte count, including hdr */</span></span><br><span class="line">    <span class="keyword">int</span>             cmsg_level;     <span class="comment">/* [XSI] originating protocol */</span></span><br><span class="line">    <span class="keyword">int</span>             cmsg_type;      <span class="comment">/* [XSI] protocol-specific type */</span></span><br><span class="line"><span class="comment">/* followed by    unsigned char  cmsg_data[]; */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>AODV åè®®è®¤ä¸ºç³»ç»Ÿæä¾›çš„æºä»£ç çš„å…³äº routine éƒ¨åˆ†å­˜åœ¨ bugï¼Œæ‰€ä»¥é€šè¿‡ <code>msghdr</code> å’Œ <code>cmsghdr</code> ç»“æ„å¹¶é‡å†™éƒ¨åˆ†å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><ul><li><code>__cmsg_nxthdr_fix</code> </li><li><code>cmsg_nxthdr_fix</code></li></ul><p>å…¶ä¸­ <code>cmsg_nxthdr_fix</code> å‡½æ•°è°ƒç”¨ <code>__cmsg_nxthdr_fix</code> æ¥å®Œæˆ</p><ul><li><code>aodv_socket.c</code><ul><li><code>aodv_socket_init</code><ul><li></li></ul></li></ul></li></ul><p>æˆ‘ä»¬åœ¨å¤„ç† AODV åè®®æºä»£ç ä¸­çš„ <code>socket</code> å‡½æ•°æ—¶å‘ç°äº†å¯¹äº <code>PF_INET</code> é‡ï¼Œäºæˆ‘ä»¬åœ¨é«˜çº§ C è¯­è¨€è¯¾ç¨‹ä¸­å­¦ä¹ çš„ <code>AF_INET</code> ä¸åŒã€‚ç»è¿‡åœ¨ç½‘ä¸Šçš„æŸ¥é˜…æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äº Windows ç³»ç»Ÿæ¥è¯´ï¼Œå®ƒåœ¨ <code>Winsock2.h</code> ä¸­å°† <code>PF_INET</code> ä¸ <code>IF_INET</code> ç­‰ä»·</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AF_INET 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PF_INET AF_INET</span></span><br></pre></td></tr></table></figure><p>è€Œåœ¨ Unix/Linux ç³»ç»Ÿä¸­ï¼Œå¯¹äº BSD æ˜¯ AFï¼Œå¯¹äº POSIX æ˜¯ PFã€‚åœ¨ ã€ŠUnix ç½‘ç»œç¼–ç¨‹ å·1: å¥—æ¥å­—è”ç½‘ APIã€‹ä¹¦ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†è¿™ä¸€æ®µè§£é‡Š</p><blockquote><p><code>AF_XXX</code> Versus <code>PF_XXX</code></p><p>The â€œ<code>AF_</code>â€œ prefix stands for â€œaddress familyâ€ and the â€œ<code>PF_</code>â€œ prefix stands for â€œprotocol familyâ€. Historically, the intent was that a single protocol family might support multiple address families and that the <code>PF_</code> value was used to create the socket and the <code>AF_</code> value was used in socket address structures. But in actuality, a protocol family supporting multiple address families has never been supported and the <code>&lt;sys/socket.h&gt;</code> header defines the <code>PF_</code> value for a given protocol to be equal to the <code>AF_</code> value for that protocol. While there is no guarantee that this equality between the two will always be true, should anyone change this for existing protocols, lots of existing code would break. To conform to existing coding practice, we use only the <code>AF_</code> constants in this text, although you may encounter the <code>PF_</code> value, mainly in calls to socket.</p></blockquote><ul><li><p><code>aodv_socket_init</code></p><ul><li><p>åœ¨å‡½æ•°ä¸­ç¬¬ä¸€æ¬¡ä½¿ç”¨äº† ifreq ç»“æ„ä½“ï¼Œè·³è½¬å¾—åˆ°å…¶åŒ–ç®€åçš„éƒ¨åˆ†å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span>  <span class="title">ifreq</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span>    ifr_name[IFNAMSIZ];             <span class="comment">/* if name, e.g. &quot;en0&quot; */</span></span><br><span class="line">    <span class="keyword">union</span> &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span>  <span class="title">sockaddr</span> <span class="title">ifru_addr</span>;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span>  <span class="title">sockaddr</span> <span class="title">ifru_dstaddr</span>;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span>  <span class="title">sockaddr</span> <span class="title">ifru_broadaddr</span>;</span></span><br><span class="line">        <span class="keyword">short</span>   ifru_flags;</span><br><span class="line">        <span class="keyword">int</span>     ifru_metric;</span><br><span class="line">        <span class="keyword">int</span>     ifru_mtu;</span><br><span class="line">        <span class="keyword">int</span>     ifru_phys;</span><br><span class="line">        <span class="keyword">int</span>     ifru_media;</span><br><span class="line">        <span class="keyword">int</span>     ifru_intval;</span><br><span class="line">        <span class="keyword">caddr_t</span> ifru_data;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span>  <span class="title">ifdevmtu</span> <span class="title">ifru_devmtu</span>;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span>  <span class="title">ifkpi</span>   <span class="title">ifru_kpi</span>;</span></span><br><span class="line">        <span class="keyword">u_int32_t</span> ifru_wake_flags;</span><br><span class="line">        <span class="keyword">u_int32_t</span> ifru_route_refcnt;</span><br><span class="line">        <span class="keyword">int</span>     ifru_cap[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">u_int32_t</span> ifru_functional_type;</span><br><span class="line">    &#125; ifr_ifru;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç»“æ„ä½“ä¸­åŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼ŒåŒ…æ‹¬æ¥å£ interface çš„åç§°å’Œä¸€ä¸ª union ç±»å‹çš„å®šä¹‰ã€‚ifreq ä¸ºæ¥å£è¯·æ±‚ç»“æ„ï¼Œç”¨äºå¥—æ¥å­— ioctl çš„æ¥å£è¯·æ±‚ç»“æ„ã€‚ æ‰€æœ‰çš„æ¥å£ IOctl å¿…é¡»æœ‰å‚æ•°å®šä¹‰ï¼Œè¯¥å®šä¹‰ä»¥ ifr_name å¼€å¤´ã€‚ å…¶ä½™çš„å…¶ä½™çš„å¯ä»¥æ˜¯ç‰¹å®šçš„æ¥å£ã€‚</p></li><li><p>socket åˆå§‹åŒ– udp æ•°æ®åŒ…æ—¶ï¼Œä¼šæŸ¥çœ‹ <code>this_host.nif</code> å³ number of interface to boardcast onã€‚è‹¥ä¸º 0 åˆ™å¼‚å¸¸é€€å‡ºã€‚</p></li><li><p>åœ¨ socket éƒ¨åˆ†æœ‰éå¸¸å¤šçš„å†…å®¹åœ¨é«˜çº§ C è¯­è¨€è¯¾ç¨‹ Unix ç½‘ç»œç¼–ç¨‹ä¸­å­¦åˆ°è¿‡ï¼Œå¦‚ <code>socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)</code> æ¥åˆ›å»º UDP åŒ…ï¼Œä½†åœ¨ aodv åè®®ä¸­ï¼Œå‡ä½¿ç”¨äº† <code>PF_INET</code> æ¥æ›¿æ¢åŸå§‹çš„ <code>AF_INET</code></p></li><li><p>åœ¨ Unix Network Programming ä¸­ï¼Œä½œè€…æåˆ°ä»–å»ºè®®ä½¿ç”¨ <code>bzero</code> æ¥æ›¿æ¢ <code>memset(&amp;aodv_addr, 0, sizeof(aodv_addr))</code>ï¼Œæˆ‘ä»¬ç»„æˆå‘˜ä¹ŸæŸ¥é˜…äº†è¿™ä¸¤ç§åœ¨å†…å­˜å±‚é¢ä¸Šå¯¹å…¶èµ‹å€¼ä¸º 0 çš„åŒºåˆ«ã€‚<code>bcopy</code>ã€<code>bzero</code> å’Œ <code>bcmp</code> æ˜¯ä¼ ç»Ÿ BSD çš„å‡½æ•°ï¼Œå±äº POSIX æ ‡å‡†ï¼›<code>mem*</code> æ˜¯ C90 (ä»¥åŠ C99)æ ‡å‡†çš„ C å‡½æ•°ã€‚åŒºåˆ«åœ¨äºï¼Œå¦‚æœä½ æ‰“ç®—æŠŠç¨‹åºå¼„åˆ°ä¸€ä¸ªç¬¦åˆ C90/C99ï¼Œä½†æ˜¯ä¸ç¬¦åˆ POSIX æ ‡å‡†çš„å¹³å°æ—¶ï¼Œåè€…ä¼šæ›´æœ‰ä¼˜åŠ¿ã€‚ä½†æ˜¯ <code>memset</code> å‡½æ•°çš„ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªå‚æ•°éœ€è¦å•ç‹¬è®°å¿†</p><blockquote><p>C has memset(), the Berkeley UNIX C library has <strong>bzero</strong>(). They are not<br>identical, and <strong>bzero</strong>() pre dates memset() but is not widely available (since<br>itâ€™s not part of standard C</p></blockquote></li><li><p>å‡½æ•°ä¸­é€šè¿‡ <code>setsockopt</code> ç»™ socket è®¾ç½®äº†ä»¥ä¸‹çš„å­—æ®µé€‰é¡¹ï¼š</p><ul><li><code>SOL_SOCKET</code> - <code>SO_BROADCAST</code>ï¼šå…è®¸å‘é€å¹¿æ’­æ•°æ®åŒ…</li><li><code>SOL_SOCKET</code> - <code>SO_BINDTODEVICE</code>ï¼šå°†å¥—æ¥å­—ç»‘å®šåˆ°æŒ‡å®šæ¥å£</li><li><code>SOL_SOCKET</code> - <code>SO_PRIORITY</code>ï¼šè®¾ç½®åœ¨å¥—æ¥å­—å‘é€çš„æ‰€æœ‰åŒ…çš„åè®®å®šä¹‰ä¼˜å…ˆæƒ</li><li><code>SOL_SOCKET</code> - <code>SO_RCVBUF</code>ï¼šæ¥å—ç¼“å†²åŒºå¤§å°</li><li><code>SOL_IP</code> - <code>IP_RECVTTL</code>ï¼šä¼ é€ä¸€æ¡å¸¦æœ‰ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ¥æ”¶åŒ…ç”Ÿå­˜æ—¶é—´å­—æ®µçš„ IP_RECVTTL æ§åˆ¶ä¿¡æ¯</li><li><code>SOL_IP</code> - <code>IP_PKTINFO</code>ï¼šè·å–æ¥æ”¶æŠ¥æ–‡çš„ç›¸å…³ä¿¡æ¯ï¼Œä¹Ÿå¯åœ¨å‘é€æŠ¥æ–‡æ—¶æŒ‡å®šæŠ¥æ–‡çš„ç›¸å…³æ§åˆ¶ä¿¡æ¯</li></ul></li><li><p>aodv å°† receive buffer size è®¾å®šä¸ºäº† 1024 å¹¶ä¸”ä¸å…è®¸ä¿®æ”¹ï¼ˆæ²¡æœ‰é€šè¿‡ <code>#define</code> æˆ–å…¶ä»–å½¢å¼æä¾›ä¾¿äºä¿®æ”¹çš„æ–¹æ³•ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (setsockopt(DEV_NR(i).sock, SOL_SOCKET, SO_RCVBUF,</span><br><span class="line">               (<span class="keyword">char</span> *)&amp;bufsize, optlen) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    alog(LOG_NOTICE, <span class="number">0</span>, __FUNCTION__,</span><br><span class="line">         <span class="string">&quot;Receive buffer size set to %d&quot;</span>, bufsize);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (bufsize &lt; RECV_BUF_SIZE)</span><br><span class="line">&#123;</span><br><span class="line">    alog(LOG_ERR, <span class="number">0</span>, __FUNCTION__,</span><br><span class="line">         <span class="string">&quot;Could not set receive buffer size&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>aodv_socket_process_packet</code></p><ul><li>ç¡®ä¿é‚»å±…èŠ‚ç‚¹å·²ç»è¢«æ·»åŠ æˆ–æ›´æ–°</li><li>åˆ¤æ–­æ¶ˆæ¯æŠ¥æ–‡ç±»å‹<ul><li>é€šè¿‡ <code>type == RREP &amp; ttl == 1 &amp; dst.s_addr == AODV_BROADCAST</code> åˆ¤æ–­æ˜¯å¦ä¸º Hello åŒ…ï¼Œå¹¶è°ƒç”¨ hello_process æ¥å¯¹ Hello åŒ…è¿›è¡Œå¤„ç†</li><li><code>AODV_RREQ</code>: <code>rreq_process((RREQ *)aodv_msg, len, src, dst, ttl, ifindex)</code></li><li><code>AODV_RREP</code>: <code>rrep_process((RREP *)aodv_msg, len, src, dst, ttl, ifindex)</code></li><li><code>AODV_RERR</code>: <code>rerr_process((RERR *)aodv_msg, len, src, dst)</code></li><li><code>AODV_RREP_ACK</code>: <code>rrep_ack_process((RREP_ack *)aodv_msg, len, src, dst)</code></li></ul></li></ul></li><li><p><code>aodv_socket_read</code></p><ul><li>æœ¬å‡½æ•°è´Ÿè´£è¯»å–å¹¶è°ƒç”¨ <code>aodv_socket_process_packet</code> å¤„ç† AODV socket åŒ…ï¼Œåœ¨ NS-2 ç³»ç»Ÿä¸­ï¼Œå‡½æ•°ä¸º <code>recvAODVUUPacket</code></li><li>é€šè¿‡ <code>recvmsg(fd, &amp;msgh, 0)</code>  è¯»å– socketï¼Œå¹¶ä»æ§åˆ¶ä¿¡æ¯ä¸­è·å– ttl å’Œç›®æ ‡åœ°å€ã€‚é€šè¿‡åˆ¤æ–­ <code>cmsg-&gt;cmsg_type</code><ul><li><code>IP_TTL</code>: <code>ttl = *(CMSG_DATA(cmsg));</code></li><li><code>IP_PKTINFO</code>: <code>struct in_pktinfo *pi = (struct in_pktinfo *)CMSG_DATA(cmsg); dst.s_addr = pi-&gt;ipi_addr.s_addr;</code></li></ul></li><li>è‹¥ TTL ä¸ºè´Ÿå€¼ï¼Œåˆ™å¼‚å¸¸ï¼Œå¹¶è¿›è¡Œç©ºè¿”å›</li><li>é€šè¿‡ <code>devfromsock</code> å°è¯•å°† <code>sockf</code> è½¬æ¢ä¸º <code>dev_info</code>ï¼Œå¯¹è½¬æ¢é”™è¯¯å³ç©ºæŒ‡é’ˆçš„è¿”å›åŒæ ·æŒ‰ç…§å¼‚å¸¸å¤„ç†å¹¶è¿›è¡Œç©ºè¿”å›</li></ul></li><li><p><code>aodv_socket_send</code></p><ul><li><p>æœ¬å‡½æ•°è´Ÿè´£å‘é€ AODV socket æ•°æ®åŒ…</p></li><li><p>ä¸å¤„ç† AODV_RREP æ•°æ®åŒ…ï¼Œå¹¶ä¸”å½“ <code>wait_on_reboot</code> è¢«è®¾ç½®ä¸ºçœŸæ—¶ä¹Ÿä¸å†å‘é€æ•°æ®åŒ…</p></li><li><p>è®¾ç½® socket çš„ TTL å€¼</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsockopt(dev-&gt;sock, SOL_IP, IP_TTL, &amp;ttl, <span class="keyword">sizeof</span>(ttl))</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœé€Ÿç‡é™åˆ¶è¢«å¯ç”¨ï¼Œæ£€æŸ¥æˆ‘ä»¬æ˜¯å¦æ­£åœ¨å‘é€ä¸€ä¸ª RREQ æˆ– RERRã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¢å¼ƒä¼ å‡ºçš„æ§åˆ¶æ•°æ®åŒ…ã€‚å¦‚æœè·ç¦»ä¸Šæ¬¡å‘é€è¯¥ç±»å‹çš„æ•°æ®åŒ…çš„æ—¶é—´å°‘äºæˆ–å°äºå…è®¸çš„ RATE LIMIT æ—¶é—´</p></li></ul></li><li><p><code>aodv_socket_new_msg</code></p><ul><li>ä¸ºæ–°äº§ç”Ÿçš„æ•°æ®åŒ…å‘é€ç¼“å†²ç©ºé—´</li></ul></li><li><p><code>aodv_socket_queue_msg</code></p><ul><li>æŠŠä¸€ä¸ªAODVæ¶ˆæ¯å­˜å‚¨åœ¨å‘é€ç¼“å†²åŒºä¸­</li></ul></li><li><p><code>aodv_socket_clean</code></p><ul><li>æ¸…ç©ºå¥—æ¥å­—ä¿¡æ¯å¹¶å…³é—­</li></ul></li></ul><p>å¯¹éƒ¨åˆ† Socket å‡½æ•°çš„è¯¦ç»†è§£é‡Šå°†æ”¾åœ¨å†…å®¹ä¸­</p><hr><h2 id="RREQ"><a href="#RREQ" class="headerlink" title="RREQ"></a><code>RREQ</code></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>                   <span class="number">1</span>                   <span class="number">2</span>                   <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|     Type      |J|R|G|D|U|      Reserved       |   Hop Count   |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                            RREQ ID                            |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                    Destination IP Address                     |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                  Destination Sequence Number                  |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                    Originator IP Address                      |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                  Originator Sequence Number                   |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure><p>ç–‘é—®ğŸ¤”ï¸ï¼šä»£ç å®é™…æ²¡æœ‰ U æ ‡å¿—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> type;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(__LITTLE_ENDIAN)</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> res1:<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">u_int8_t</span> d:<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">u_int8_t</span> g:<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">u_int8_t</span> r:<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">u_int8_t</span> j:<span class="number">1</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">elif</span> defined(__BIG_ENDIAN)</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> j:<span class="number">1</span>;    <span class="comment">/* Join flag (multicast) */</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> r:<span class="number">1</span>;    <span class="comment">/* Repair flag */</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> g:<span class="number">1</span>;    <span class="comment">/* Gratuitous RREP flag */</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> d:<span class="number">1</span>;    <span class="comment">/* Destination only respond */</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> res1:<span class="number">4</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">error</span> <span class="meta-string">&quot;Adjust your &lt;bits/endian.h&gt; defines&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">u_int8_t</span> res2;</span><br><span class="line">    <span class="keyword">u_int8_t</span> hcnt;</span><br><span class="line">    <span class="keyword">u_int32_t</span> rreq_id;</span><br><span class="line">    <span class="keyword">u_int32_t</span> dest_addr;</span><br><span class="line">    <span class="keyword">u_int32_t</span> dest_seqno;</span><br><span class="line">    <span class="keyword">u_int32_t</span> orig_addr;</span><br><span class="line">    <span class="keyword">u_int32_t</span> orig_seqno;</span><br><span class="line">&#125; RREQ;</span><br></pre></td></tr></table></figure><ul><li><p><code>aodv_rreq.c</code></p><ul><li><p><code>rare_create</code></p><ul><li><p>åˆ›å»º <code>RREQ</code> å¹¶åˆå§‹åŒ–</p></li><li><p>seq number increaseï¼ˆ0 ä»ä¸º 0ï¼Œæœ€å¤§å€¼æ—¶å˜ä¸º 1ï¼Œå…¶ä»–æ­£å¸¸ +1ï¼‰</p><ul><li>å½“æŸä¸€èŠ‚ç‚¹è¦äº§ç”Ÿ RREQ æ´ªæ³›ï¼Œå¿…é¡»å…ˆå¢å¤§è‡ªèº«åºåˆ—å·</li></ul></li><li><p><code>flag</code> åŒ¹é…å¹¶ç»™å¯¹åº”çš„å€¼èµ‹ 1</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* RREQ Flags: */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RREQ_JOIN          0x1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RREQ_REPAIR        0x2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RREQ_GRATUITOUS    0x4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RREQ_DEST_ONLY     0x8</span></span><br></pre></td></tr></table></figure><ul><li><p>ç–‘é—®ğŸ¤”ï¸ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨æ•°ç»„è®°å½•ï¼Œæˆ–ç›´æ¥ä½¿ç”¨ <code>flag</code> è®°å½•ï¼Ÿç›®å‰ç”¨äºåŒ¹é…çš„ä»£ç å¦‚ä¸‹</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (flags &amp; RREQ_JOIN)</span><br><span class="line">    rreq-&gt;j = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (flags &amp; RREQ_REPAIR)</span><br><span class="line">    rreq-&gt;r = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (flags &amp; RREQ_GRATUITOUS)</span><br><span class="line">    rreq-&gt;g = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (flags &amp; RREQ_DEST_ONLY)</span><br><span class="line">    rreq-&gt;d = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li>è§£é‡Šï¼šå¯ä»¥åŒæ—¶æœ‰å¤šä¸ª <code>flag</code></li></ul></li><li><p><code>rreq_add_ext</code></p><ul><li><p>ç”¨äºå¯¹ RREQ è¿›è¡Œè¡¥å……</p></li><li><p>å­˜æ”¾äº <code>(AODV_ext *)((char *)rreq + offset)</code></p><ul><li><code>offset</code> åº”å¤§äºæˆ–ç­‰äº <code>RREQ_SIZE</code></li></ul></li><li><p><code>AODV_ext</code> å­˜å‚¨ä¿¡æ¯</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* An generic AODV extensions header */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">u_int8_t</span> type;</span><br><span class="line">    <span class="keyword">u_int8_t</span> length;</span><br><span class="line">    <span class="comment">/* Type specific data follows here */</span></span><br><span class="line">&#125; AODV_ext;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><code>type</code></li><li><code>length</code></li></ul></li><li><p>å°† data å¤åˆ¶åˆ° <code>((char *)((char *)ext + sizeof(AODV_ext))</code></p></li></ul></li><li><p><code>rreq_send</code></p><ul><li><p><code>struct in_addr</code></p></li><li><p><code>apr_uint32_t</code></p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> &#123;</span></span><br><span class="line">    <span class="keyword">apr_uint32_t</span>  s_addr; <span class="comment">/**&lt; storage to hold the IP# */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>unsigned int</code><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dest.s_addr = AODV_BROADCAST;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Broadcast on all interfaces */</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_NR_INTERFACES; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!DEV_NR(i).enabled)</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    rreq = rreq_create(flags, dest_addr, dest_seqno, DEV_NR(i).ipaddr);</span><br><span class="line">    aodv_socket_send((AODV_msg *)rreq, dest, RREQ_SIZE, ttl, &amp;DEV_NR(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¹¿æ’­ <code>dest.s_addr = AODV_BROADCAST;</code></p></li><li><p>åˆ›å»º RREQ å¹¶å‘é€æŠ¥æ–‡</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rreq = rreq_create(flags, dest_addr, dest_seqno, DEV_NR(i).ipaddr);</span><br><span class="line">aodv_socket_send((AODV_msg *)rreq, dest, RREQ_SIZE, ttl, &amp;DEV_NR(i));</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>rreq_forward</code></p><ul><li><p>è®°å½•ç›®çš„å’Œæº</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dest.s_addr = AODV_BROADCAST;</span><br><span class="line">orig.s_addr = rreq-&gt;orig_addr;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è‹¥ TTL ä»ç„¶å¤§äº 0 æ—¶ç»§ç»­è½¬å‘</p></li><li><p>æŠ¥æ–‡è¿›å…¥é˜Ÿåˆ— <code>send_buf</code>ï¼Œç­‰å¾…å‘é€</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rreq = (RREQ *)aodv_socket_queue_msg((AODV_msg *)rreq, size);</span><br></pre></td></tr></table></figure></li><li><p>å¢åŠ è·³æ•° hcnt <code>rreq-&gt;hcnt++;</code></p></li><li><p>è½¬å‘å‘é€ç¼“å†²åŒº <code>send_buf</code> ä¸­çš„æŠ¥æ–‡</p></li><li><p>ç–‘é—®ğŸ¤”ï¸ï¼šè½¬å‘æ—¶ TTL-1 æ“ä½œæ²¡æœ‰æ‰¾åˆ°</p><ul><li><p>å›ç­”ï¼šforward ä¸­åªè½¬å‘ï¼Œåœ¨ process ä¸­æ‰¾åˆ°å¦‚ä¸‹çš„å¯¹ TTL çš„å¤„ç†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (ip_ttl &gt; <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* Update the sequence number in case the maintained one is</span></span><br><span class="line"><span class="comment">     * larger */</span></span><br><span class="line">    <span class="keyword">if</span> (fwd_rt &amp;&amp; !(fwd_rt-&gt;flags &amp; RT_INET_DEST) &amp;&amp;</span><br><span class="line">        (<span class="keyword">int32_t</span>)fwd_rt-&gt;dest_seqno &gt; (<span class="keyword">int32_t</span>)rreq_dest_seqno)</span><br><span class="line">        rreq-&gt;dest_seqno = htonl(fwd_rt-&gt;dest_seqno);</span><br><span class="line">                                                                </span><br><span class="line">    rreq_forward(rreq, rreqlen, --ip_ttl);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    DEBUG(LOG_DEBUG, <span class="number">0</span>, <span class="string">&quot;RREQ not forwarded - ttl=0&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å½“ TTL å¤§äº 1 æ—¶ï¼Œåˆ¤æ–­å¹¶è½¬å‘ <code>â€”-ip_ttl</code> çš„åŒ…</p></li></ul></li><li><p><code>rreq_process</code></p><ul><li><p>ç›®çš„å’Œæºçš„åˆå§‹åŒ–</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rreq_dest.s_addr = rreq-&gt;dest_addr;</span><br><span class="line">rreq_orig.s_addr = rreq-&gt;orig_addr;</span><br><span class="line">rreq_id = ntohl(rreq-&gt;rreq_id);</span><br><span class="line">rreq_dest_seqno = ntohl(rreq-&gt;dest_seqno);</span><br><span class="line">rreq_orig_seqno = ntohl(rreq-&gt;orig_seqno);</span><br><span class="line">rreq_new_hcnt = rreq-&gt;hcnt + <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¿½ç•¥ç”±æœ¬èŠ‚ç‚¹å¼€å§‹å‘é€çš„åŒ…</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (rreq_orig.s_addr == DEV_IFINDEX(ifindex).ipaddr.s_addr)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥æ¥æ”¶åˆ°çš„ RREQ åŒ…çš„ä¸Šä¸€è·³æ˜¯å¦åœ¨é»‘åå•ä¸­ï¼Œè‹¥åœ¨åˆ™å¿½ç•¥è¯¥åŒ…</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (rreq_blacklist_find(ip_src))</span><br><span class="line">&#123;</span><br><span class="line">    DEBUG(LOG_DEBUG, <span class="number">0</span>, <span class="string">&quot;prev hop of RREQ blacklisted, ignoring!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¿½ç•¥å·²ç»å¤„ç†è¿‡çš„ RREQ åŒ…ï¼Œé˜²æ­¢å‘ç”Ÿç½‘ç»œé£æš´</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (rreq_record_find(rreq_orig, rreq_id))</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç–‘é—®ğŸ¤”ï¸ï¼šæ˜¯å¦å¯ä»¥é€šè¿‡å°†æ£€æŸ¥æ“ä½œå‰ç½®åˆ°å‡½æ•°å†…åˆå§‹åŒ–ä¹‹å‰ï¼Œå°å¹…åº¦æå‡è¿ç®—é€Ÿåº¦</p></li><li><p>ç¼“å­˜æ¥æ”¶åˆ°çš„ RREQ åŒ…ï¼Œä¸‹æ¬¡æ¥æ”¶åˆ°ç›¸åŒåŒ…æ—¶å¯ä»¥å¿½ç•¥ä¸è¿›è¡Œå¤„ç†</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rreq_record_insert(rreq_orig, rreq_id);</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡ rreqlen å’Œ extlen å¤„ç†åˆ†å‰² RREQ åŒ…</p></li><li><p>è·¯ç”±å‘ç° <code>rt_table_find</code></p><ul><li><p>è‹¥è·¯ç”±è¡¨ä¸­æ²¡æœ‰å­˜å‚¨è¿‡ç›®çš„èŠ‚ç‚¹ï¼Œåˆ™æ·»åŠ åˆ°è·¯ç”±è¡¨ä¸­ <code>rt_table_insert</code></p></li><li><p>è‹¥å‘ç°å·²ç»å­˜å‚¨è¿‡çš„è®°å½•ï¼Œåˆ™å°è¯•è®¡ç®—å‡ºå¼€é”€æœ€å°çš„è·¯å¾„å¹¶æ›´æ–°</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">life = PATH_DISCOVERY_TIME - <span class="number">2</span> * rreq_new_hcnt * NODE_TRAVERSAL_TIME;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (rev_rt-&gt;dest_seqno == <span class="number">0</span> ||</span><br><span class="line">    (<span class="keyword">int32_t</span>)rreq_orig_seqno &gt; (<span class="keyword">int32_t</span>)rev_rt-&gt;dest_seqno ||</span><br><span class="line">    (rreq_orig_seqno == rev_rt-&gt;dest_seqno &amp;&amp;</span><br><span class="line">     (rev_rt-&gt;state == INVALID || rreq_new_hcnt &lt; rev_rt-&gt;hcnt)))</span><br><span class="line">&#123;</span><br><span class="line">    rev_rt =</span><br><span class="line">        rt_table_update(rev_rt, ip_src, rreq_new_hcnt, rreq_orig_seqno,</span><br><span class="line">                        life, VALID, rev_rt-&gt;flags);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ¤æ–­è‡ªå·±æ˜¯å¦ä¸ºç›®çš„èŠ‚ç‚¹</p><ul><li><p>è‹¥æ˜¯ç›®çš„èŠ‚ç‚¹ï¼Œç»ˆæ­¢ RREQï¼Œå¼€å§‹ RREQ è¿‡ç¨‹ï¼Œæ›´æ–°æœ€å¤§åºåˆ—å·</p>  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (rreq_dest.s_addr == DEV_IFINDEX(ifindex).ipaddr.s_addr)</span><br><span class="line">&#123;</span><br><span class="line">                                                                           </span><br><span class="line">    <span class="comment">/* WE are the RREQ DESTINATION. Update the node&#x27;s own</span></span><br><span class="line"><span class="comment">       sequence number to the maximum of the current seqno and the</span></span><br><span class="line"><span class="comment">       one in the RREQ. */</span></span><br><span class="line">    <span class="keyword">if</span> (rreq_dest_seqno != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="keyword">int32_t</span>)this_host.seqno &lt; (<span class="keyword">int32_t</span>)rreq_dest_seqno)</span><br><span class="line">            this_host.seqno = rreq_dest_seqno;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (this_host.seqno == rreq_dest_seqno)</span><br><span class="line">            seqno_incr(this_host.seqno);</span><br><span class="line">    &#125;</span><br><span class="line">    rrep =</span><br><span class="line">        rrep_create(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, DEV_IFINDEX(rev_rt-&gt;ifindex).ipaddr,</span><br><span class="line">                    this_host.seqno, rev_rt-&gt;dest_addr, MY_ROUTE_TIMEOUT);</span><br><span class="line">                                                                           </span><br><span class="line">    rrep_send(rrep, rev_rt, <span class="literal">NULL</span>, RREP_SIZE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è‹¥ä¸æ˜¯ç›®çš„èŠ‚ç‚¹ï¼Œåˆ™æŸ¥çœ‹æ˜¯å¦åŒ…å«ç›®çš„èŠ‚ç‚¹çš„è·¯ç”±ä¿¡æ¯</p><ul><li>è‹¥æœ‰åˆ™å›å¤ RREP</li><li>è‹¥æ²¡æœ‰åˆ™ç»§ç»­å¹¿æ’­ RREQ<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* We are an INTERMEDIATE node. - check if we have an active</span></span><br><span class="line"><span class="comment">     * route entry */</span></span><br><span class="line">                                                                          </span><br><span class="line">    fwd_rt = rt_table_find(rreq_dest);</span><br><span class="line">                                                                          </span><br><span class="line">    <span class="keyword">if</span> (fwd_rt &amp;&amp; fwd_rt-&gt;state == VALID &amp;&amp; !rreq-&gt;d)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">now</span>;</span></span><br><span class="line">        <span class="keyword">u_int32_t</span> lifetime;</span><br><span class="line">                                                                          </span><br><span class="line">        <span class="comment">/* GENERATE RREP, i.e we have an ACTIVE route entry that is fresh</span></span><br><span class="line"><span class="comment">           enough (our destination sequence number for that route is</span></span><br><span class="line"><span class="comment">           larger than the one in the RREQ). */</span></span><br><span class="line">                                                                          </span><br><span class="line">        gettimeofday(&amp;now, <span class="literal">NULL</span>);</span><br><span class="line">                                                                          </span><br><span class="line">        <span class="comment">/* Respond only if the sequence number is fresh enough... */</span></span><br><span class="line">        <span class="keyword">if</span> (fwd_rt-&gt;dest_seqno != <span class="number">0</span> &amp;&amp;</span><br><span class="line">            (<span class="keyword">int32_t</span>)fwd_rt-&gt;dest_seqno &gt;= (<span class="keyword">int32_t</span>)rreq_dest_seqno)</span><br><span class="line">        &#123;</span><br><span class="line">            lifetime = timeval_diff(&amp;fwd_rt-&gt;rt_timer.timeout, &amp;now);</span><br><span class="line">            rrep = rrep_create(<span class="number">0</span>, <span class="number">0</span>, fwd_rt-&gt;hcnt, fwd_rt-&gt;dest_addr,</span><br><span class="line">                               fwd_rt-&gt;dest_seqno, rev_rt-&gt;dest_addr,</span><br><span class="line">                               lifetime);</span><br><span class="line">            rrep_send(rrep, rev_rt, fwd_rt, rrep_size);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">goto</span> forward;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* If the GRATUITOUS flag is set, we must also unicast a</span></span><br><span class="line"><span class="comment">           gratuitous RREP to the destination. */</span></span><br><span class="line">        <span class="keyword">if</span> (rreq-&gt;g)</span><br><span class="line">        &#123;</span><br><span class="line">            rrep = rrep_create(<span class="number">0</span>, <span class="number">0</span>, rev_rt-&gt;hcnt, rev_rt-&gt;dest_addr,</span><br><span class="line">                               rev_rt-&gt;dest_seqno, fwd_rt-&gt;dest_addr,</span><br><span class="line">                               lifetime);</span><br><span class="line">                                                                          </span><br><span class="line">            rrep_send(rrep, fwd_rt, rev_rt, RREP_SIZE);</span><br><span class="line">                                                                          </span><br><span class="line">            DEBUG(LOG_INFO, <span class="number">0</span>, <span class="string">&quot;Sending G-RREP to %s with rte to %s&quot;</span>,</span><br><span class="line">                  ip_to_str(rreq_dest), ip_to_str(rreq_orig));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">forward:</span><br><span class="line">    <span class="keyword">if</span> (ip_ttl &gt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* Update the sequence number in case the maintained one is</span></span><br><span class="line"><span class="comment">         * larger */</span></span><br><span class="line">        <span class="keyword">if</span> (fwd_rt &amp;&amp; !(fwd_rt-&gt;flags &amp; RT_INET_DEST) &amp;&amp;</span><br><span class="line">            (<span class="keyword">int32_t</span>)fwd_rt-&gt;dest_seqno &gt; (<span class="keyword">int32_t</span>)rreq_dest_seqno)</span><br><span class="line">            rreq-&gt;dest_seqno = htonl(fwd_rt-&gt;dest_seqno);</span><br><span class="line">                                                                          </span><br><span class="line">        rreq_forward(rreq, rreqlen, --ip_ttl);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        DEBUG(LOG_DEBUG, <span class="number">0</span>, <span class="string">&quot;RREQ not forwarded - ttl=0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><hr><h2 id="RREP"><a href="#RREP" class="headerlink" title="RREP"></a><code>RREP</code></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>                   <span class="number">1</span>                   <span class="number">2</span>                   <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|     Type      |R|A|    Reserved     |Prefix Sz|   Hop Count   |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                     Destination IP address                    |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                  Destination Sequence Number                  |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                    Originator IP address                      |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                           Lifetime                            |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure><ul><li><p><code>rrep_create</code></p><ul><li><p>é€šè¿‡ <code>aodv_socket_new_msg</code> åˆ›å»º socket messageï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rrep-&gt;type = AODV_RREP;</span><br><span class="line">rrep-&gt;res1 = <span class="number">0</span>;</span><br><span class="line">rrep-&gt;res2 = <span class="number">0</span>;</span><br><span class="line">rrep-&gt;prefix = prefix;</span><br><span class="line">rrep-&gt;hcnt = hcnt;</span><br><span class="line">rrep-&gt;dest_addr = dest_addr.s_addr;</span><br><span class="line">rrep-&gt;dest_seqno = htonl(dest_seqno);</span><br><span class="line">rrep-&gt;orig_addr = orig_addr.s_addr;</span><br><span class="line">rrep-&gt;lifetime = htonl(life);</span><br></pre></td></tr></table></figure></li><li><p>å¯¹ flag è¿›è¡Œä½åˆ¤æ–­ï¼Œå¹¶å°†å¯¹åº”åœ¨ message ä¸­çš„ä½ç½® 1</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (flags &amp; RREP_REPAIR)</span><br><span class="line">    rrep-&gt;r = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (flags &amp; RREP_ACK)</span><br><span class="line">    rrep-&gt;a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>rrep_ack_create</code></p><ul><li><p>åˆ›å»º socket messageï¼Œåˆå§‹åŒ–ä»…éœ€è¦å°†å…¶ç±»å‹è®¾ç½®ä¸º ACK åŒ…</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rrep_ack-&gt;type = AODV_RREP_ACK;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>rrep_ack_process</code></p><ul><li><p>å¤„ç† ACK åŒ…æ—¶ï¼Œå…ˆåœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾å…¶æº ipï¼Œç„¶ååˆ é™¤è¿™ä¸ª RREP_ACK åŒ…è¿˜æœªåˆ°æœŸçš„è®¡æ—¶å™¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timer_remove(&amp;rt-&gt;ack_timer);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>rrep_add_ext</code></p><ul><li>é€š RREQ æ—¶çš„å¤„ç†ï¼Œåœ¨ <code>(AODV_ext *)((char *)rrep + offset)</code> ä½ç½®æ·»åŠ  extension ä¿¡æ¯ã€‚å­˜å‚¨ç±»å‹å’Œé•¿åº¦ä¿¡æ¯</li></ul></li><li><p><code>rrep_send</code></p><ul><li><p>æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦åº”è¯¥è¯·æ±‚ <code>RREP_ACK</code>ã€‚å¦‚æœæ”¶åˆ° RREQ çš„èŠ‚ç‚¹æ˜¯é‚»å±…ï¼Œåˆ™å¯èƒ½é¢ä¸´å•å‘é“¾è·¯ï¼Œæœ€å¥½è¯·æ±‚ä¸€ä¸ª<code>RREP_ACK</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (neighbor &amp;&amp; neighbor-&gt;state == VALID &amp;&amp; !neighbor-&gt;ack_timer.used)</span><br><span class="line">&#123;</span><br><span class="line">    rrep_flags |= RREP_ACK;</span><br><span class="line">    neighbor-&gt;flags |= RT_UNIDIR;</span><br><span class="line">                                                                       </span><br><span class="line">    <span class="comment">/* Must remove any pending hello timeouts when we set the</span></span><br><span class="line"><span class="comment">       RT_UNIDIR flag, else the route may expire after we begin to</span></span><br><span class="line"><span class="comment">       ignore hellos... */</span></span><br><span class="line">    timer_remove(&amp;neighbor-&gt;hello_timer);</span><br><span class="line">    neighbor_link_break(neighbor);</span><br><span class="line">                                                                       </span><br><span class="line">    DEBUG(LOG_DEBUG, <span class="number">0</span>, <span class="string">&quot;Link to %s is unidirectional!&quot;</span>,</span><br><span class="line">          ip_to_str(neighbor-&gt;dest_addr));</span><br><span class="line">                                                                       </span><br><span class="line">    timer_set_timeout(&amp;neighbor-&gt;ack_timer, NEXT_HOP_WAIT);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½® <code>RT_UNIDIR</code> æ ‡å¿—æ—¶ï¼Œå¿…é¡»åˆ é™¤æ‰€æœ‰å¾…å¤„ç†çš„ Hello è¶…æ—¶ï¼Œå¦åˆ™è·¯ç”±å¯èƒ½ä¼šåœ¨å¼€å§‹å¿½ç•¥ Hello ä¹‹åç»ˆæ­¢</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (fwd_rt)</span><br><span class="line">&#123;</span><br><span class="line">    precursor_add(fwd_rt, rev_rt-&gt;next_hop);</span><br><span class="line">    precursor_add(rev_rt, fwd_rt-&gt;next_hop);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>rrep_forward</code></p><ul><li><p>æ£€æŸ¥æ˜¯å¦åº”è¯¥è¯·æ±‚ <code>RREP_ACK</code>ï¼Œå¦‚æœRREPçš„æ¥æºä¸æ˜¯ä¸€ä¸ªé‚»å±…ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°é‚»å±…æ¡ç›®ï¼Œå®ƒæ˜¯é€šå¾€ RREP æºçš„ä¸‹ä¸€è·³ã€‚å¦‚æœæˆ‘ä»¬æ¥æ”¶åˆ° RREQ çš„èŠ‚ç‚¹æ˜¯é‚»å±…ï¼Œåˆ™æˆ‘ä»¬å¯èƒ½æ­£é¢ä¸´å•å‘é“¾è·¯ï¼Œæœ€å¥½è¯·æ±‚ä¸€ä¸ª <code>RREP_ACK</code></p></li><li><p>ç–‘é—®ğŸ¤”ï¸ï¼šAODV æºç çš„ä½œè€…åœ¨è¿™é‡Œä¹Ÿæ²¡æœ‰å¼„æ˜ç™½ï¼Œä»–ä»¬è®¤ä¸ºè¿™é‡Œå­˜åœ¨ä¸€ä¸ªå•å‘çš„è¿æ¥ï¼Œäºæ˜¯ä½œè€…æš‚ä¸”ä½¿ç”¨äº† <code>if(0)</code> è®©è¿™æ®µä»£ç ä»…ä»…å­˜åœ¨äºç¨‹åºä¸­ä½†æ˜¯ä¸ä¼šè¢«æ‰§è¡Œ</p><blockquote><p>we suspect a unidirectional link</p></blockquote></li></ul></li><li><p><code>rrep_process</code></p><ul><li><p>åœ¨ RREP çš„å¤„ç†ä¸­ï¼Œå°† RREP åŒ…ä¸­çš„åœ°å€ä¿¡æ¯æå–å‡ºæ¥æ”¾å…¥å››å…ƒç»„ä¸­</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rrep_dest.s_addr = rrep-&gt;dest_addr;</span><br><span class="line">rrep_orig.s_addr = rrep-&gt;orig_addr;</span><br><span class="line">rrep_seqno = ntohl(rrep-&gt;dest_seqno);</span><br><span class="line">rrep_lifetime = ntohl(rrep-&gt;lifetime);</span><br></pre></td></tr></table></figure></li><li><p>è€ƒè™‘åˆ°ä¸­é—´èŠ‚ç‚¹çš„æƒ…å†µï¼Œå¢åŠ RREPè·³æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rrep_new_hcnt = rrep-&gt;hcnt + <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ RREQ çš„å¤„ç†æ—¶ï¼Œä¼šå¿½ç•¥é‚£äº›æ—¨åœ¨å»ºç«‹ä¸€æ¡é€šå¾€è‡ªæˆ‘çš„è·¯çº¿çš„ä¿¡æ¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (rrep_dest.s_addr == DEV_IFINDEX(ifindex).ipaddr.s_addr)</span><br><span class="line">    <span class="keyword">return</span>;</span><br></pre></td></tr></table></figure></li><li><p>å¯¹ RREQ åŒ…æ˜¯å¦è¿˜æœ‰ extension è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶å°†å…¶æ”¾å…¥ ext å˜é‡ä¸­</p></li><li><p>æ£€æŸ¥æ˜¯å¦åº”è¯¥è¿›è¡Œå‰è¿›çš„è·¯çº¿ã€‚è‹¥æ²¡æœ‰ç°æœ‰æ¡ç›®ï¼Œåˆ™æ’å…¥ä¸€ä¸ªæ–°æ¡ç›®ã€‚è‹¥æœ‰ï¼Œåˆ™æ›´æ–°æ¡ç›®</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">fwd_rt = rt_table_find(rrep_dest);</span><br><span class="line">rev_rt = rt_table_find(rrep_orig);</span><br><span class="line">                                                                           </span><br><span class="line"><span class="keyword">if</span> (!fwd_rt)</span><br><span class="line">&#123;</span><br><span class="line">    fwd_rt = rt_table_insert(rrep_dest, ip_src, rrep_new_hcnt, rrep_seqno,</span><br><span class="line">                             rrep_lifetime, VALID, rt_flags, ifindex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (fwd_rt-&gt;dest_seqno == <span class="number">0</span> ||</span><br><span class="line">         (<span class="keyword">int32_t</span>)rrep_seqno &gt; (<span class="keyword">int32_t</span>)fwd_rt-&gt;dest_seqno ||</span><br><span class="line">         (rrep_seqno == fwd_rt-&gt;dest_seqno &amp;&amp;</span><br><span class="line">          (fwd_rt-&gt;state == INVALID || fwd_rt-&gt;flags &amp; RT_UNIDIR ||</span><br><span class="line">           rrep_new_hcnt &lt; fwd_rt-&gt;hcnt)))</span><br><span class="line">&#123;</span><br><span class="line">    pre_repair_hcnt = fwd_rt-&gt;hcnt;</span><br><span class="line">    pre_repair_flags = fwd_rt-&gt;flags;</span><br><span class="line">                                                                           </span><br><span class="line">    fwd_rt =</span><br><span class="line">        rt_table_update(fwd_rt, ip_src, rrep_new_hcnt, rrep_seqno,</span><br><span class="line">                        rrep_lifetime, VALID, rt_flags | fwd_rt-&gt;flags);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (fwd_rt-&gt;hcnt &gt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        DEBUG(LOG_DEBUG, <span class="number">0</span>,</span><br><span class="line">              <span class="string">&quot;Dropping RREP, fwd_rt-&gt;hcnt=%d fwd_rt-&gt;seqno=%ld&quot;</span>,</span><br><span class="line">              fwd_rt-&gt;hcnt, fwd_rt-&gt;dest_seqno);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœè®¾ç½®äº† <code>RREP_ACK</code> æ ‡å¿—ï¼Œå°† RREP ç¡®è®¤å‘é€åˆ°æ‰€ç­”å¤çš„ç›®çš„åœ°ï¼Œå¹¶ç§»é™¤ <code>RREP_ACK</code> æ ‡å¿—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (rrep-&gt;a)</span><br><span class="line">&#123;</span><br><span class="line">    RREP_ack *rrep_ack;</span><br><span class="line">                                                                            </span><br><span class="line">    rrep_ack = rrep_ack_create();</span><br><span class="line">    aodv_socket_send((AODV_msg *)rrep_ack, fwd_rt-&gt;next_hop, NEXT_HOP_WAIT,</span><br><span class="line">                     MAXTTL, &amp;DEV_IFINDEX(fwd_rt-&gt;ifindex));</span><br><span class="line">    <span class="comment">/* Remove RREP_ACK flag... */</span></span><br><span class="line">    rrep-&gt;a = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœè·¯ç”±ä»¥å‰å¤„äºä¿®å¤çŠ¶æ€ï¼Œåº”è¯¥å‘è·¯ç”±æºå‘é€ <code>NO DELETE RERR</code>ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥é€‰æ‹©ä¸ºç›®çš„åœ°é‡æ–°å¯åŠ¨è·¯ç”±å‘ç°ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼å¯ä»¥ä¿®æ­£ä¸€ä¸ªå¯¼è‡´ä¿®å¤æ ‡å¿—æœªè¢«è®¾ç½®å’Œ <code>RERR</code> ä»æœªè¢«å‘é€çš„é”™è¯¯ã€‚</p></li></ul></li></ul><hr><h2 id="RERR"><a href="#RERR" class="headerlink" title="RERR"></a><code>RERR</code></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>                   <span class="number">1</span>                   <span class="number">2</span>                   <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|     Type      |N|          Reserved           |   DestCount   |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|            Unreachable Destination IP Address (1)             |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|         Unreachable Destination Sequence Number (1)           |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-|</span><br><span class="line">|  Additional Unreachable Destination IP Addresses (if needed)  |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|Additional Unreachable Destination Sequence Numbers (if needed)|</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure><ul><li><code>rerr_create</code><ul><li>RERR çš„åˆ›å»ºå’Œåˆå§‹åŒ–ä¸ RREQ å’Œ RREP ç±»ä¼¼ï¼Œæ•…è¿™é‡Œä¸å†èµ˜è¿°</li></ul></li><li><code>rerr_add_udest</code><ul><li>æ·»åŠ  RERR ä¿¡æ¯ï¼Œä¸ RREQ å’Œ RREP ä¸­çš„ ext ç±»ä¼¼ï¼Œå‡ä¸ºåœ¨å†…å­˜ä¸­ç»“æ„ä½“åé¢æ·»åŠ é™„åŠ ä¿¡æ¯</li></ul></li><li><code>rerr_process</code><ul><li>åœ¨å¤„ç† RERR æ¶ˆæ¯æ—¶ï¼Œä¼šæ£€æŸ¥å“ªäº›ç›®çš„èŠ‚ç‚¹æ—¶ä¸å¯è¾¾çš„ã€‚æ ¹æ®ä½œè€…çš„æè¿°ï¼Œè¿™äº›å†…å®¹ä»ç„¶åªæ˜¯è‰æ¡ˆ</li><li>ä½¿ç”¨æ•°æ®åŒ…ä¸­çš„ç›®æ ‡åºåˆ—å·æ›´æ–°ç›¸åº”çš„ç›®æ ‡åºåˆ—å·ã€‚æ£€æŸ¥å‰é©±åˆ—è¡¨æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™å°†è¯¥ç›®æ ‡ä½œä¸º RERR ä¸­çš„ä¸å¯è®¿é—®ç›®æ ‡ã€‚ç¡®å®šæ˜¯å¦æœ‰æ–°çš„å‰é©±ä½¿å®ƒæˆä¸ºéå•æ’­ RERR å¹¶åˆ é™¤æ‰€æœ‰æ— æ³•åˆ°è¾¾çš„ç›®çš„åœ°çš„å…ˆé©±åˆ—è¡¨</li><li>å¦‚æœåˆ›å»ºäº† RERR æ¶ˆæ¯ï¼Œåˆ™ç«‹å³å‘é€ï¼ŒåŒæ ·éœ€è¦ç»è¿‡è·¯ç”±å‘ç°ç­‰è¿‡ç¨‹ã€‚ä»…åœ¨å…·æœ‰ä¸­æ–­è·¯ç”±çš„å…ˆé©±èŠ‚ç‚¹çš„é‚£äº›æ¥å£ä¸Šå‘é€ RERR</li></ul></li></ul><hr><h2 id="HELLO"><a href="#HELLO" class="headerlink" title="HELLO"></a><code>HELLO</code></h2><ul><li><p><code>hello_start</code></p><ul><li><p>è‹¥è®¡æ—¶å™¨ used åˆ™æ¶ˆæ¯å·²ç»å‘é€</p></li><li><p>è®¾å®šè®¡æ—¶å™¨ï¼Œä¸ Hello è¿›è¡Œç»‘å®š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">timer_init(&amp;hello_timer, &amp;NS_CLASS hello_send, <span class="literal">NULL</span>);</span><br><span class="line">hello_send(<span class="literal">NULL</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>hello_stop</code></p><ul><li><p>ç§»é™¤è®¡æ—¶å™¨å³ä¸ºåœæ­¢</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timer_remove(&amp;hello_timer);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>hello_send</code></p><ul><li>æ£€æµ‹å‘é€ Hello æ¶ˆæ¯æ˜¯å¦æœ‰å¿…è¦ï¼Œé€šè¿‡åˆ¤æ–­ <code>time_diff &gt;= HELLO_INTERVAL</code> ä»¥é˜²æˆ‘ä»¬å·²ç»åœ¨HELLO_INTERVALå†…å‘é€äº†å…¶ä»–å¹¿æ’­ä¿¡æ¯</li></ul></li><li><p><code>hello_process</code></p><ul><li><p>å¤„ç† Hello æ¶ˆæ¯æ—¶ï¼Œä»…éœ€è¦å­˜å‚¨ç›®çš„èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œä¸éœ€è¦å®Œæ•´çš„å››å…ƒç»„ã€‚åŒæ ·ç»è¿‡è·¯ç”±å‘ç°è¿‡ç¨‹ï¼Œå¹¶æ£€æµ‹æ˜¯å¦æœ‰è¡¥å……ä¿¡æ¯</p></li><li><p>é‚»å±…èŠ‚ç‚¹åº”è¯¥åªåœ¨æ”¶åˆ°3ä¸ªè¿ç»­çš„ Hello æ¶ˆæ¯åæ‰æœ‰æ•ˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (receive_n_hellos)</span><br><span class="line">    state = INVALID;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    state = VALID;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å¯¹æ—¶é—´çš„åˆ¤æ–­ä¸Šï¼ŒHello æ¶ˆæ¯çš„å¤„ç†ä¸ºå…è®¸çš„æ—¶å»¶ä¸å‘é€åŒ…çš„æ•°é‡ç›¸ä¹˜ååŠ å…¥è·¯ç”±çš„æ—¶å»¶</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timeout = ALLOWED_HELLO_LOSS * hello_interval + ROUTE_TIMEOUT_SLACK;</span><br></pre></td></tr></table></figure></li><li><p>æœ€åé€šè¿‡ <code>hello_update_timeout</code> æ›´æ–° timeout ä¿¡æ¯ï¼Œè€Œ <code>hello_update_timeout</code> å‡½æ•°è°ƒç”¨è®¡æ—¶å™¨çš„æ›´æ–°æ–¹æ³•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timer_set_timeout(&amp;rt-&gt;hello_timer, time + HELLO_DELAY);</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h2 id="RREP-ACK"><a href="#RREP-ACK" class="headerlink" title="RREP_ACK"></a><code>RREP_ACK</code></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>                   <span class="number">1</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|     Type      |   Reserved    |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure><hr><h2 id="å…³äº-tåç¼€"><a href="#å…³äº-tåç¼€" class="headerlink" title="å…³äº_tåç¼€"></a>å…³äº<code>_t</code>åç¼€</h2><blockquote><p>but most often you will use &lt;inttypes.h&gt; which (unusually for standard C headers) includes &lt;stdint.h&gt;. It (&lt;inttypes.h&gt;) also defines macros for use with the printf() and scanf().</p><p>As Matt Curtis noted, there is no significance to the compiler in the suffix; it is a human-oriented convention.</p><p>However, you should also note that POSIX defines a lot of extra type names ending in â€˜_tâ€™, and reserves the suffix for the implementation. That means that if you are working on POSIX-related systems, defining your own type names with the convention is ill-advised. The system I work on has done it (for more than 20 years); we regularly get tripped up by systems defining types with the same name as we define.</p><p>CesarB:</p><p>I use _type instead of _t on my typedefs precisely to avoid that.</p><p><a href="https://stackoverflow.com/questions/231760/what-does-a-type-followed-by-t-underscore-t-represent">Reference</a></p></blockquote><p>æ¨æµ‹ AODV ä½œè€…æ„ä¸ºå¯¹æœ¬èº« <code>struct struct_name</code> çš„æ›¿æ¢ï¼Œä½¿å¾—æ‰€æœ‰ <code>struct_name_t</code> éƒ½ä¸ºå¯¹åº” <code>struct struct_name</code> çš„ <code>typedef</code>ï¼Œä½†æ˜¯æ ¹æ®ç½‘ä¸Šæ‰€æŸ¥é˜…çš„èµ„æ–™ï¼Œé™¤éå¯¹ç³»ç»Ÿå†…æ ¸ç­‰æœ‰æ·±å…¥äº†è§£ï¼Œå¯¹äºéå†…æ ¸çº§åˆ«ä»£ç å¹¶ä¸æ¨èè¿™æ ·å‘½åï¼Œå¯èƒ½ä¼šä¸ POSIX ç›¸å…³çš„ä»£ç èµ·å†²çª</p><hr>          </div>]]></content>
    
    <summary type="html">
    
      Analysis of AODV protocol based on its source code
    
    </summary>
    
    
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>How to Choose Your Own Courses in SSDUT</title>
    <link href="https://augists.top/SELF/SHARING/STUDY/How-to-choose-your-own-courses-in-SSDUT/"/>
    <id>https://augists.top/SELF/SHARING/STUDY/How-to-choose-your-own-courses-in-SSDUT/</id>
    <published>2022-01-03T06:25:24.000Z</published>
    <updated>2022-01-12T02:09:32.844Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <h1 id="ç©¶ææ— æ•Œé€‰è¯¾æ”»ç•¥"><a href="#ç©¶ææ— æ•Œé€‰è¯¾æ”»ç•¥" class="headerlink" title="ç©¶ææ— æ•Œé€‰è¯¾æ”»ç•¥"></a>ç©¶ææ— æ•Œé€‰è¯¾æ”»ç•¥</h1><blockquote><p>é‰´äºæ•™åŠ¡å¯¹äºåŸ¹å…»æ–¹æ¡ˆçš„å„ç§æ¨¡ç³Šï¼Œåœ¨è¿™é‡Œå†™ä¸€ä¸ªé¢å‘äºå¤§ä¸€æ–°ç”Ÿä»¥åŠå…¶ä»–å¯¹äºé€‰è¯¾çš„æ“ä½œæœ‰ç–‘é—®çš„åŒå­¦ã€‚å¸Œæœ›å¤§å®¶éƒ½èƒ½æŠ¢åˆ°è‡ªå·±å¿ƒä»ªçš„è¯¾ç¨‹</p></blockquote><div class="note danger">            <ul><li>é¦–å…ˆæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œæ‰¾åˆ°è‡ªå·±å­¦é™¢è‡ªå·±è¿™ä¸€å±Šçš„åŸ¹å…»æ–¹æ¡ˆï¼Œæ‹¿å‡ºæ¥å¥½å¥½çœ‹çœ‹ã€‚æ³¨æ„ä¸è¦å¤ªç›¸ä¿¡æ•™åŠ¡å†™çš„æ–‡å­—è§£é‡Šï¼Œä¸€å®šè¦ä»¥è¡¨æ ¼ä¸­å†™æ˜çš„ä¸ºå‡†</li></ul><p>æ¯”å¦‚åœ¨è½¯ä»¶å­¦é™¢ä¼šåœ¨å¤§äºŒä¸Šå¿«ç»“æŸçš„æ—¶å€™è¿›è¡Œä¸“ä¸šåˆ’åˆ†ï¼Œåˆ†ä¸ºè½¯ä»¶å·¥ç¨‹å’Œç½‘ç»œå·¥ç¨‹ã€‚æ‰€ä»¥åœ¨è¿˜æ²¡æœ‰åˆ†ä¸“ä¸šçš„æ—¶å€™ä¸¤ä¸ªéƒ½éœ€è¦çœ‹çœ‹ã€‚å½“ç„¶ï¼Œåœ¨æ²¡åˆ†ä¸“ä¸šä¹‹å‰ä¸¤è¾¹çš„è¯¾ç¨‹ç†åº”æ²¡æœ‰ä»»ä½•å·®åˆ«</p>          </div><ul><li>å¼€å‘åŒºçš„åŸ¹å…»æ–¹æ¡ˆæ˜¯ä»ä¸»æ ¡åŒºçš„æ–¹æ¡ˆåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ï¼Œæ‰€ä»¥ä¼šçœ‹åˆ°æœ‰å¾ˆå¤šè¯¾å…¶å®å¼€å‘åŒºä¸å®‰æ’ã€‚ä¾‹å¦‚ï¼šé€šè¯†è¯¾ç¨‹ä¸­çš„è‰ºæœ¯ç±»</li></ul><p><img src="https://s2.loli.net/2022/01/03/4HlezmgIncwr1NQ.jpg" alt=""></p><p>è™½ç„¶çœ‹èµ·æ¥æœ‰è¿™ä¹ˆå¤šè¯¾å¯ä»¥é€‰æ‹©ï¼Œä½†æ˜¯å®é™…ä¸Šå¼€å‘åŒºä¸€èˆ¬åªä¼šå¼€è®¾ã€Šè‰ºæœ¯ä¸å®¡ç¾ã€‹è¯¾ç¨‹å’Œã€ŠéŸ³ä¹é‰´èµã€‹è¯¾ç¨‹ï¼Œè€Œã€Šè‰ºæœ¯ä¸å®¡ç¾ã€‹è¯¾ç¨‹åŒæ—¶æ˜¯ä½œä¸ºæ ¸å¿ƒè¯¾ç¨‹å’Œè‰ºæœ¯ç±»è¯¾ç¨‹çš„</p><ul><li>æ¯å­¦æœŸçš„å¼€è®¾è¯¾ç¨‹ï¼ˆæ¨èè¯¾è¡¨ï¼‰å¯ä»¥æå‰ä» <code>æ•™åŠ¡ç³»ç»Ÿ - æˆ‘çš„ç­çº§è¯¾è¡¨ - é€‰æ‹©å¯¹åº”çš„å­¦å¹´å’Œå­¦æœŸ</code> çœ‹åˆ°éœ€è¦ä¸Šçš„è¯¾ç¨‹ï¼Œå¦‚æœè¿™é‡Œæ²¡æœ‰æ˜¾ç¤ºå¯ä»¥é€šè¿‡ç‚¹ <code>å­¦æœŸå…¨éƒ¨è¯¾ç¨‹</code> çœ‹åˆ°æ–‡å­—è¯´æ˜ç‰ˆæœ¬çš„è¯¾ç¨‹</li></ul><p>éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„è¯¾ç¨‹å¹¶ä¸æ„å‘³ç€ä½ å¿…é¡»æŒ‰ç…§è¿™æ ·æ¥è¿›è¡Œé€‰æ‹©ã€‚å¯¹äºé€‰ä¿®è¯¾æ¥è¯´ï¼Œä»–ä¸€èˆ¬æ˜¯æ•™åŠ¡ç»™ä½ å®‰æ’é”™å¼€æ‰€æœ‰é€‰ä¿®è¯¾çš„æœ€å¤§é›†ï¼Œä½ å¯ä»¥æŒ‰ç…§åŸ¹å…»æ–¹æ¡ˆä¸­çš„å­¦åˆ†è¦æ±‚è‡ªå·±è¿›è¡Œé€‰æ‹©<br>åŒæ—¶ï¼Œè¿™ä¹Ÿä¸æ„å‘³ç€ä½ åªèƒ½é€‰æ‹©è¿™ä¸ªè€å¸ˆæˆ–è¿™ä¸ªæ—¶é—´æ®µã€‚åœ¨é€‰è¯¾ç³»ç»Ÿä¸­åªä¼šè¿›è¡Œæ—¶é—´å†²çªé™åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¯¾ç¨‹ A ä¸è¯¾ç¨‹ B æ—¶é—´å‘ç”Ÿå†²çªï¼Œè€Œä½ å·²ç»é€‰äº†è¯¾ç¨‹ Aï¼Œé‚£ä¹ˆè¯¾ç¨‹ B çš„é€‰è¯¾æŒ‰é’®å°†å˜ä¸ºç°è‰²<br>é€šå¸¸çš„å»ºè®®æ˜¯å¯ä»¥æ‹¿åˆ«çš„ç­çº§ç›¸åŒä¸“ä¸šçš„åŒå­¦çš„æ¨èè¯¾è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œä½ å¯ä»¥å®Œå…¨æŒ‰ç…§åˆ«çš„ç­çš„æ¨èè¯¾è¡¨æ¥è¿›è¡Œé€‰è¯¾ï¼Œåªè¦ä½ èƒ½ä¿è¯ä½ çš„å­¦åˆ†ä¿®æ»¡åŸ¹å…»æ–¹æ¡ˆçš„è¦æ±‚å¹¶ä¸”æœ¬å­¦æœŸæ²¡æœ‰å†²çªå³å¯</p><blockquote><p>è‹¥è¯¾ç¨‹æœ‰å†²çªä¸”å¿…é¡»è¿™ä¹ˆé€‰ï¼Œå¯ä»¥é€šè¿‡ <code>å†²çªé€‰è¯¾ç”³è¯·</code> æˆ–ç›´æ¥è”ç³»ä½ ä»¬å¹´çºªçš„æ•™åŠ¡è€å¸ˆã€‚é€šå¸¸å»ºè®®ç›´æ¥å»åŠå…¬å®¤ç­‰çº¿ä¸‹è”ç³»æ–¹å¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç”µè¯ã€QQ ç­‰æ–¹å¼ã€‚æ•™åŠ¡çš„ä¸Šç­æ—¶é—´å¤§è‡´ä¸ºå·¥ä½œæ—¥çš„ä¸Šåˆ 9 ç‚¹åˆ°ä¸‹åˆ 5 ç‚¹ï¼Œä¸­åˆå¯èƒ½æœ‰ä¸¤ä¸ªå°æ—¶çš„ä¼‘æ¯ã€‚å¦‚æœæ•™åŠ¡ä¸åœ¨æˆ–åœ¨éæ•™åŠ¡å·¥ä½œæ—¶é—´ï¼Œè¯·å°è¯•åˆ«çš„æ–¹æ³•æˆ–å¤šå°è¯•å‡ æ¬¡</p></blockquote><ul><li>2020 å¹´é€‰è¯¾æ–¹æ¡ˆè¿›è¡Œäº†ä¿®æ”¹ï¼Œé¢„é€‰è¯¾é˜¶æ®µåªèƒ½é€‰æ‹©è‡ªå·±æ¨èè¯¾è¡¨ä¸­çš„è¯¾ç¨‹å’Œè€å¸ˆï¼ˆä¹Ÿå¯èƒ½å¼€æ”¾é€‰æ‹©åˆ«çš„å¹´çº§çš„è¯¾ç¨‹ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸è¦ç®¡ä»–ï¼‰ï¼Œé€šè¿‡æ„æ„¿å€¼åˆ†é…å¹¶æŠ½ç­¾çš„æ–¹å¼è¿›è¡Œé¢„é€‰è¯¾ã€‚æ¯ä¸ªäººæ¯å­¦æœŸé€‰è¯¾æœ‰ 100 çš„æ„æ„¿å€¼ï¼Œé€‰è¯¾æ—¶å¯ä»¥åˆ†é… 0 - 100 æ„æ„¿å€¼ã€‚æ•™åŠ¡ç³»ç»Ÿåœ¨ç¡®å®šé¢„é€‰ç»“æœæ—¶é€šå¸¸ä¼šå…ˆæŒ‰ç…§æ„æ„¿å€¼è¿›è¡Œæ’åºï¼Œå¹¶ä»é«˜åˆ°ä½é€‰æ‹©ã€‚å¦‚æœè¯¾å®¹é‡æ»¡æ—¶çš„å…è®¸çš„æ„æ„¿å€¼æœ‰å¤šä½å­¦ç”Ÿç›¸åŒï¼Œåˆ™ç”±è¿™äº›åŒå­¦è¿›è¡Œéšæœºå®‰æ’</li></ul><p>å¯¹äºæ„æ„¿å€¼åˆ†é…ï¼Œé€šå¸¸æ¥è¯´å¦‚æœè¯¾ç¨‹å¯é€‰çš„äººå‘˜å›ºå®šï¼Œä¾‹å¦‚æ¨èè¯¾è¡¨ä¸­å·²ç»åˆ†é…å¥½çš„è‹±è¯­è¯¾ç¨‹ï¼Œå¯ä»¥è€ƒè™‘æ„æ„¿å€¼æ˜¯å¦ç»™ 0ï¼Œå› ä¸ºæŒ‰ç…§ç°åœ¨çš„é€‰è¯¾æ–¹æ¡ˆï¼Œåªæœ‰åŒæ ·æ¨èè¯¾è¡¨åˆ†åˆ°äº†è¿™ä¸ªè¯¾åºå·çš„åŒå­¦å’Œé‡ä¿®æˆ–æå‰ä¿®çš„åŒå­¦å¯ä»¥é€‰æ‹©è¿™é—¨è¯¾ç¨‹ï¼Œæ‰è¯¾çš„å¯èƒ½æ€§ä¸å¤§ï¼ˆä¸è¿‡æœ€å¥½ä¹Ÿå¿½æ‚ ä½ åŒå­¦è·Ÿä½ ä¸€èµ·ç»™ 0ï¼Œä¸€èµ·èµŒï¼‰<br>å¯¹äºçŸ¥é“å¤§å®¶éƒ½ç»™å¤šå°‘çš„è¯¾ï¼Œæ¯”å¦‚ä»¥å‰çš„ç¤¾ä¼šå­¦ï¼Œä¸€èˆ¬äººéƒ½ä¼šç»™æ•´åæˆ–è€…æ•´äº”ï¼Œæ¯”å¦‚åˆ«äººéƒ½ç»™ 10ï¼Œä½ å°±ç»™ 11 å°±è¡Œ<br>å…¶å®ä¹Ÿå°±åªæœ‰ä¸€äº›çƒ­é—¨çš„è€å¸ˆéœ€è¦åœ¨æ„æ„¿å€¼ä¸Šå¤šè€ƒè™‘ä¸€ä¸‹ï¼Œå› ä¸ºé¢„é€‰è¯¾çš„é™åˆ¶ï¼Œæ„æ„¿å€¼å…¶å®ä½œç”¨ä¸å¤§äº†ç°åœ¨</p><p>å¦å¤–ï¼Œä¸è¦å¯¹æ„æ„¿å€¼æŠ±æœ‰å¤ªå¤§çš„æœŸå¾…ï¼Œå› ä¸º 2021 å¹´å°å­¦æœŸå‡ºç°è¿‡ç½‘ç»œçš„è¯¾ç¨‹æ‰€æœ‰ç½‘å®‰ä¸“ä¸šçš„åŒå­¦å…¨éƒ¨æ‰è¯¾çš„æƒ…å†µã€‚</p><ul><li><p>ä¸€èˆ¬ä½ å»é—®å­¦é•¿å­¦å§çš„æ—¶å€™ï¼Œéƒ½æ›´å¤šçš„æ˜¯ä¼šå‘Šè¯‰ä½ éœ€è¦é¿å¼€å“ªäº›è€å¸ˆï¼Œè€Œä¸æ˜¯å“ªäº›è€å¸ˆä¸€å®šä¸€å®šè¦æŠ¢åˆ°ã€‚ä¸€èˆ¬è¯¾ç¨‹è¦æ°´çš„æ—¶å€™å¤§å®¶ä¸€èµ·æ°´ï¼Œå¶å°”ä¼šæœ‰é‚£ç§äººç¾å¿ƒå–„çš„å¯ä»¥å¤šæ³¨æ„ä¸€ä¸‹ã€‚å¹¶ä¸”å¼€å‘åŒºä¸é™åˆ¶åŒå­¦ä»¬è¹­è¯¾ã€‚ä¾‹å¦‚è½¯ä»¶å­¦é™¢çš„è®¡ç®—æœºç½‘ç»œï¼Œä¸€èˆ¬é™¤äº†å­™wfå¤§å¸ˆï¼Œå…¶ä»–è€å¸ˆéƒ½ä¼šåœ¨ç¬¬ä¸€æ¬¡ä¸Šè¯¾æ—¶å‘Šè¯‰ä½ ï¼Œä¸Šè°çš„è¯¾éƒ½å¯ä»¥ã€‚å¹¶ä¸”è¿™é—¨è¯¾ä»¥è‡ªå­¦ä¸ºä¸»ï¼Œæˆ‘çš„æ¨èæ˜¯é€‰ä¸€ä¸ªä¾‹å¦‚ä¸‡è‰¯ç”°ä¹‹ç±»çš„è€å¸ˆï¼Œç„¶åå»è¹­å­™wfå¤§å¸ˆçš„è¯¾ï¼Œå› ä¸ºä»–çš„è¯¾åªè®²æ‹“å±•ï¼Œä¸æ¨èç›´æ¥é€‰æ‹©</p></li><li><p>é€‰è¯¾çš„æ—¶å€™è¦ä»æ ¡å›­é—¨æˆ·æˆ–è€…ä»ç½‘ç«™ä¸Šç›´æ¥ç™»é™†è¿›è¡Œé€‰è¯¾ï¼Œä¸è¦ä½¿ç”¨ webvpnã€‚é€‰è¯¾ç³»ç»Ÿæ²¡æœ‰ ip é™åˆ¶ï¼Œä¸å¿…ä½¿ç”¨æ ¡å›­ç½‘ã€‚ç°åœ¨æ•™åŠ¡ç³»ç»Ÿå¥½åƒå¯ä»¥ç›´æ¥ç™»é™†äº†ï¼Œä¹‹å‰æœ‰è¿‡ä¸€æ®µæ—¶é—´æ²¡å¯¼å…¥æ•°æ®</p></li><li><p>ä¸€èˆ¬æ¥è®²ï¼Œé¢„é€‰è¯¾å…ˆé€‰å’Œåé€‰æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œæ’ååªä¼šæŒ‰ç…§ç»™å‡ºçš„æ„æ„¿å€¼ï¼Œæ‰€ä»¥é¢„é€‰è¯¾å¯ä»¥ä¸ç”¨ç€æ€¥ï¼Œç€é‡çœ‹è‡ªå·±æƒ³è¦ä¸Šå“ªé—¨è¯¾</p></li><li><p>æ­£é€‰è¯¾å°±æ˜¯æŠ¢è¯¾ï¼Œæ ¹æ®ä½ çš„ç½‘ç»œæƒ…å†µç­‰ä¼šå‡ºç°å„ç§é—®é¢˜ã€‚ç³»ç»Ÿå¼€æ”¾æ—¶é—´æ¯æ¬¡éƒ½ä¸ä¸€å®šï¼Œå¯èƒ½æå‰åŠå°æ—¶ä¹Ÿå¯èƒ½å»¶åä¸€å°æ—¶ï¼Œå»ºè®®æ˜¯ç›´æ¥ brunchï¼Œç„¶åä¹–ä¹–ç­‰å¥½ã€‚æ­£é€‰è¯¾ä¸­é€€è¯¾é‡Šæ”¾çš„è¯¾å®¹é‡ä¸ä¼šç«‹åˆ»æ›´æ–°ï¼Œè€Œæ˜¯ä¼šæ”¾åˆ°ç¬¬äºŒå¤©ï¼Œä¸€èˆ¬ä¸ºä¸­åˆçš„æŸä¸€æ—¶é—´é›†ä¸­é‡Šæ”¾é€€æ‰çš„è¯¾å®¹é‡ï¼Œå¦‚æœæœ‰æƒ³æŠ¢çš„è¯¾ç¨‹è¯·æ¯å¤©å…³æ³¨è¯¾å®¹é‡çš„é‡Šæ”¾æƒ…å†µï¼Œå› ä¸ºä½ é€‰ä¸ä¸Šè¯¾æ•™åŠ¡ä¼šæ€ªä½ ä¸ºä»€ä¹ˆæ­£é€‰çš„åé¢å‡ å¤©ä¸çœ‹é‡Šæ”¾çš„è¯¾å®¹é‡</p></li><li><p>æ­£é€‰çš„æ—¶å€™æ¯å¤©ä¸‹åˆéƒ½æœ‰ä¸€ä¸ªæ—¶é—´æ®µæ˜¯ä¸å¼€æ”¾é€‰è¯¾çš„ï¼Œè¯·å…³æ³¨æ•™åŠ¡å‘æ”¾çš„é€‰è¯¾é€šçŸ¥</p></li><li><p>å½“å‰è‡ªå·±çš„è¯¾ç¨‹é€‰æ‹©æƒ…å†µå¯ä»¥åœ¨é€‰è¯¾ç³»ç»Ÿä¸­ç‚¹ <code>æˆ‘çš„è¯¾è¡¨</code> è¿›è¡ŒæŸ¥çœ‹ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ ¡å›­é—¨æˆ·é¡µé¢çš„è¯¾è¡¨é‡Œçœ‹ï¼‰ã€‚æŠ¢è¯¾æ—¶é—´å¾ˆç´§å¼ ï¼Œå»ºè®®æå‰è§„åˆ’å¥½è¯¾ç¨‹ï¼Œä¸è¦åˆ°æ—¶å€™å†ç‚¹å¼€çœ‹è‡ªå·±æ˜¯ä¸æ˜¯è¿˜æœ‰ä»€ä¹ˆæ—¶é—´å¯ä»¥é€‰ï¼Œç³»ç»Ÿå¾ˆæ…¢ï¼Œå¾ˆæµªè´¹æ—¶é—´</p></li><li><p>é‡åˆ°é€‰è¯¾ç³»ç»Ÿæ— æ³•è¿›å…¥æˆ–å‡ºç°å„ç§æ•…éšœè¯·ä¸è¦æƒŠæ…Œï¼Œæ˜¯æ¯æ¬¡å¿…æœ‰çš„å¸¸è§„æ“ä½œï¼Œè¯·å‘ŠçŸ¥å­¦å§”ï¼Œè®©å­¦å§”æ¥é—®æ•™åŠ¡ï¼Œä¸è¦æ‰€æœ‰äººéƒ½ä¸€çªèœ‚çš„æ‰¾æ•™åŠ¡ã€‚ä¼šè®©æ•™åŠ¡ä¸è€çƒ¦ï¼Œä¹Ÿä¼šè®©æœ‰ä»·å€¼çš„ä¿¡æ¯è¢«æ·¹æ²¡æ‰</p></li><li><p>å»ºè®®å­¦å§”åœ¨æ­£é€‰è¯¾å¼€å§‹ä¹‹ååˆ¶ä½œä¸€ä¸ªç­çº§æ²¡æœ‰é€‰ä¸Šè¯¾çš„åŒå­¦çš„ä¿¡æ¯å•ï¼Œä»¥ç­çº§æˆ–çº§é˜Ÿä¸ºå•ä½æ‰¾æ•™åŠ¡è¿›è¡Œå¤„ç†è€Œå°½é‡ä¸è¦å•ç‹¬æ¯ä¸ªäººéƒ½å»æ‰¾æ•™åŠ¡å¤„ç†ã€‚è™½ç„¶æˆ‘æ¯æ¬¡éƒ½å¯¹æ•™åŠ¡å¾ˆç”Ÿæ°”ï¼Œä½†æ˜¯é€‰è¯¾è¿™å‡ å¤©ä»–ä»¬ç¡®å®ä¼šå¾ˆå¿™æ¥ä¸åŠä¸€ä¸ªä¸€ä¸ªå›å¤ã€‚å¸Œæœ›å„ä½ç­çº§å’Œçº§é˜Ÿå­¦å§”èƒ½å¹²ä¸€ç‚¹æ´»å‘æŒ¥ä¸€ä¸‹è‡ªå·±çš„ä½œç”¨ï¼Œä¹Ÿæ˜¯ä¸ºä½ è‡ªå·±å¥½</p></li><li><p>é€‰è¯¾æœŸé—´çš„è¯¾ç¨‹æƒ…å†µå¯ä»¥åœ¨ <code>æ•™åŠ¡ç³»ç»Ÿ - å…¨æ ¡å¼€è¯¾æŸ¥è¯¢</code> ä¸­æ‰¾åˆ°ä½ æ‰€æƒ³è¦æŸ¥çœ‹çš„è¯¾ã€‚é€šå¸¸å¯ä»¥æŸ¥çœ‹åˆ°çš„ä¿¡æ¯æ˜¯è¯¾å®¹é‡å’Œå½“å‰å·²ç»é€‰æ‹©çš„äººæ•°ã€‚ä¸€èˆ¬åœ¨é¢„é€‰è¯¾å’Œæ­£é€‰æ¯ä¸€å¤©è¿‡äº†ä¸­åˆé€‰è¯¾é«˜å³°æœŸä¹‹åè¿›è¡Œï¼ŒæŸ¥çœ‹ä½ æƒ³è¦é€‰æ‹©çš„è¯¾ç¨‹æ˜¯å¦è¿˜æœ‰ç©ºä½™çš„åé¢ç•™ç»™ä½ æŠ¢</p></li><li><p>é¢„é€‰è¯¾ç»“æŸåï¼Œæ­£é€‰å¼€å§‹ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡ <code>æˆ‘çš„è¯¾è¡¨</code> æ¥æŸ¥çœ‹è‡ªå·±é¢„é€‰çš„è¯¾ç¨‹æ˜¯å¦å·²ç»è¢«é€‰ä¸­äº†</p></li><li><p><code>åŸ¹å…»æ–¹æ¡ˆå®Œæˆæƒ…å†µ</code> é‡Œä¼šæœ‰ä¸€éƒ¨åˆ†å­¦åˆ†å› ä¸ºä¸å½“å‰å¤§å››çš„åŸ¹å…»æ–¹æ¡ˆä¸åŒè€Œè¢«æ”¾å…¥è®¡åˆ’å¤–å®Œæˆæƒ…å†µã€‚è¿™éƒ¨åˆ†çš„å­¦åˆ†ä¼šåœ¨ä½ ä¸Šå¤§å››çš„æ—¶å€™ç”±æ•™åŠ¡æ·»åŠ è¿›ç³»ç»Ÿ</p></li><li><p>æŸ¥çœ‹æˆç»©çš„æ—¶å€™ï¼Œéœ€è¦å…ˆè¯„æ•™æ‰èƒ½æŸ¥çœ‹æˆç»©ï¼Œå¯ä»¥é€šè¿‡åŸ¹å…»æ–¹æ¡ˆå®Œæˆæƒ…å†µæ¥é¿å¼€</p></li><li><p>å…³äºé‡ä¿®åˆ·åˆ†åæˆç»©å•çš„æ˜¾ç¤ºæƒ…å†µç›®å‰ä»ç„¶æ²¡æœ‰å®šè®ºï¼Œå¸Œæœ›èƒ½æœ‰ä¸€ä¸ªå®˜æ–¹çš„è¯´æ³•ã€‚ç›®å‰æœ‰å¬è¯´å‡ºå›½ç”¨çš„è‹±æ–‡æˆç»©å•åœ¨ä¸»æ ¡åŒºçš„æ ¡å²é¦†æ‰“å°æ—¶å¯ä»¥é€‰æ‹©å°†æ€ä¿®ç±»è¯¾ç¨‹å»æ‰ï¼Œä½†æ˜¯æ‰€æœ‰è¿™æ–¹é¢çš„æ¶ˆæ¯éƒ½ä¸ºä¼ è¨€ï¼Œå¦‚æœ‰éœ€è¦è¯·è‡ªè¡Œè¯¢é—®æ•™åŠ¡</p></li><li><p>é€€è¯¾æœ€æ™šå¤§æ¦‚æ˜¯åœ¨è¡¥é€€é€‰çš„æ—¶é—´ï¼Œå­¦æœŸä¸­é—´éèº«ä½“åŸå› æ•™åŠ¡ä¸ä¼šç»™ä½ é€€è¯¾çš„ä¸€èˆ¬</p></li><li><p>å¤§ä¸€çš„ä½“è‚²éƒ½æ˜¯ä½“èƒ½è¯¾ï¼Œå¤§äºŒå¼€å§‹æ•™æŠ€èƒ½ï¼Œä½†æ˜¯æ•™çš„å¾ˆæµ…</p></li></ul>          </div>]]></content>
    
    <summary type="html">
    
      Help you select your favorite courses in SSDUT&lt;br&gt;For freshman
    
    </summary>
    
    
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>2021 Review</title>
    <link href="https://augists.top/SELF/REVIEW/2021-Review/"/>
    <id>https://augists.top/SELF/REVIEW/2021-Review/</id>
    <published>2021-12-31T02:32:44.000Z</published>
    <updated>2021-12-31T15:50:12.031Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>ç”±äºç–«æƒ…çš„å½±å“ï¼Œå¤§ä¸‰ä¸Šå­¦æœŸçš„è¯¾æ—¶å’Œè€ƒè¯•éƒ½å‹ç¼©äº†è¿‘ä¸‰ä¸ªå‘¨çš„æ—¶é—´ã€‚æˆ‘ä¹Ÿè¢«è¿«æ²¡æœ‰åƒå‰ä¸¤å¹´ä¸€æ ·èƒ½æ—©ä¸€ç‚¹å†™å®Œè‡ªå·±çš„å¹´ç»ˆæ€»ç»“ã€‚ç«™åœ¨è¿™ä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œå¤§å­¦å››å¹´çš„å¿…ä¿®è¯¾å·²ç»å…¨éƒ¨ç»“æŸï¼Œåªå‰©ä¸‹å­¦æœŸçš„6é—¨é€‰ä¿®è¯¾ç¨‹ã€‚è¿™å¯èƒ½ä¹Ÿæ„å‘³ç€æˆ‘çš„å¤§å­¦ç”Ÿæ´»å³å°†ç”»ä¸Šå¥å·ï¼Œç´§æ¥ç€çš„æ˜¯éœ€è¦è€ƒè™‘æ›´ä¸ºç°å®çš„ä¸€äº›é—®é¢˜ã€‚å›é¡¾æ•´ä¸ª2021å¹´ï¼Œå®Œå…¨å¯ä»¥ç”¨â€œé­”å¹»â€æ¥å½¢å®¹ã€‚ä»Šå¹´æˆ‘æ‰“ç®—æ¢ä¸ªæ–¹å¼ï¼ŒæŠŠè¿™æ®µç»å†è®²ç»™æ¯ä¸€ä¸ªçœ‹åˆ°çš„äººå¬ã€‚</p><div class="note info">            <p>æ›¾ç»æœ‰ä¸€ä¸ªå­¦é•¿ï¼Œäººåšçš„éå¸¸è€¿ç›´ï¼Œæ€ç»´æ–¹å¼å’Œå¾ˆå¤šäººç›¸å·®ç”šè¿œï¼Œæ€»æ˜¯èƒ½åšå‡ºä¸€äº›å¾ˆå¥‡æ€ªçš„äº‹æƒ…ã€‚åœ¨ä»–å¿ƒé‡Œäº‹ç‰©çš„é‡è¦ç¨‹åº¦å¾ˆå¤šäººä¹Ÿæ— æ³•ç†è§£ï¼Œä¾‹å¦‚ä»–ä¸€ç›´è®¤ä¸ºåœ¨æ‰“æ‰®è‡ªå·±è¿™ä»¶äº‹æƒ…ä¸ŠèŠ±è´¹æ—¶é—´æ˜¯ä¸–ç•Œä¸Šæœ€è ¢çš„äº†ã€‚è¿›å…¥å¤§äºŒåï¼Œä»–é€‰æ‹©äº†ç•™åœ¨dvå·¥ä½œå®¤ï¼Œåšä¸€ä¸ªä¸Šè¦è´Ÿè´£å­¦é™¢å’Œæ ¡åŒºæ´»åŠ¨çš„è‹¦åŠ›ï¼Œä¸‹è¦æ•™å¥½å¤§ä¸€æ–°å¹²äº‹çš„è€å¸ˆã€‚æ‰€ä»¥ï¼Œåœ¨dvä¸ºæ•°ä¸å¤šçš„ä¾‹ä¼šä¸­ï¼Œä»–æœ‰å››æ¬¡ç«™åœ¨äº†è®²å°ä¸Šï¼Œå¹¶ä¸”åœ¨å¯’å‡ç»„ç»‡äº†dvå¤§ä½œä¸šçš„ä¾‹ä¼šï¼Œå¹¶é¦–æ¬¡åšäº†bç«™çš„ç›´æ’­ã€‚åœ¨å·¥ä½œä¸Šï¼Œä»–å¯ä»¥æ”¾å¼ƒä»»ä½•ä¸€é—¨è¯¾ç¨‹ï¼Œæ¥ä¿è¯éšæ—¶å¯ä»¥å®Œæˆå­¦é™¢æ ¡åŒºçš„å¤§å¤§å°å°çš„ä»»åŠ¡ã€‚è¿™ä¸€å­¦å¹´ï¼Œå¾ˆå¤šè¯¾ä»–éƒ½æ²¡æ€ä¹ˆå»è¿‡ï¼Œå¤§å¤šæ•°æ—¶é—´å·¥ä½œå®¤çš„å‰¯éƒ¨ä¹Ÿåªæœ‰ä»–å®ˆåœ¨é‚£é‡Œï¼Œå³ä¾¿æ˜¯æœŸæœ«è€ƒè¯•å‰çš„ä¸€ä¸ªå‘¨ä»–æ¯å¤©æ™šä¸Šç•™åœ¨dvåšå›¾å¯¼å‡ºåˆ°ä¸¤ç‚¹ä»–ä¹Ÿæ²¡ä»€ä¹ˆæ‰€è°“ã€‚ä¿—è¯è¯´ï¼Œå¹²ä¸€è¡Œçˆ±ä¸€è¡Œã€‚æ—¢ç„¶é€‰æ‹©äº†ï¼Œé‚£ä¾¿å»åšã€‚ä½†æ˜¯ï¼Œä»–ä¸èƒ½å¿å—çš„æ˜¯åˆ«äººçš„ä¸ç†è§£ã€‚ä»–ä¸èƒ½å¿å—åˆ«äººæŠŠä»–çš„å·¥ä½œå®šä¹‰ä¸ºå·å·å‡ºå»å·ï¼Œä»–ä¸èƒ½å¿å—åœ¨æœŸæœ«å‰çš„å‡ å¤©å¸¦ç€åä¸ªå¹²äº‹ç†¬å¤œåšäº†ä¸Šç™¾å¼ å›¾ä¹‹åè¢«å½“ä½œæ²¡æœ‰æ´»å¹²ï¼Œä»–ä¸èƒ½å¿å—ä¸€å¹´å‡ ç™¾ä¸ªå°æ—¶çš„ä»˜å‡ºè¦å’Œåˆ«çš„éƒ¨é—¨åˆ’ç­‰å·ç”šè‡³å°äºå·ï¼Œä»–æœ€ä¸èƒ½å¿å—çš„æ˜¯ä½œä¸ºå·¥ä½œå®¤è´Ÿè´£çš„è€å¸ˆå±…ç„¶ä¸èƒ½ç†è§£å¤§å®¶çš„è¾›è‹¦ã€‚ä»–çœ‹ç€åŒäº‹å¿ƒç–¼ï¼Œå› ä¸ºä»–æ— æ³•æƒ³è±¡å‡ ä¸ªåŸæœ¬åº”è¯¥åœ¨è®¤çœŸå­¦ç€æ•²ä»£ç çš„æœ¬ç§‘ç”Ÿéœ€è¦æŠŠæ— æ•°çš„æ—¶é—´æ‹¿å‡ºæ¥å­¦ä¹ åˆ¶ä½œæµ·æŠ¥ã€åˆ¶ä½œè§†é¢‘ï¼Œå±…ç„¶è¿˜ä¼šè¢«è¦æ±‚å†åšçš„æ›´å¥½ä¸€ç‚¹ã€‚è¦çŸ¥é“è¿™ç§ä»»åŠ¡çš„æŠ¥ä»·å®Œå…¨ä¸è¾“äºè¢«å…¬è®¤ä¸ºå·¥èµ„ç¬¬ä¸€æ¢¯é˜Ÿçš„ç¨‹åºå‘˜çš„å°é¡¹ç›®æŠ¥ä»·ï¼Œä»–ä»¬å´å‡ ä¹æ²¡ä»€ä¹ˆå›æŠ¥ã€‚è¿™ä¸€å¹´ï¼Œå·¥ä½œå®¤æ·»è´­äº†æ¡Œå­æ¤…å­ï¼Œæ–°ä¹°äº†æœºç®±ç­‰ä¸€ä¼—é›¶é›¶æ•£æ•£çš„é…ä»¶ï¼Œè€Œç›´åˆ°2021å¹´çš„æœ€åä¸€å¤©éƒ½æ²¡èƒ½æ”¶åˆ°é‚£å°‘å¾—å¯æ€œçš„å·¥èµ„å¥–åŠ±ã€‚</p><p>æœ€ç»ˆï¼Œä»–æ”¾å¼ƒäº†ã€‚5æœˆä»½ï¼Œåœ¨é€šè¿‡åˆ«äººä½œä¸ºåª’ä»‹ä¼ è¾¾æ— æ•ˆåï¼Œä»–åœ¨ä¼šè®®ä¸Šä¸è´Ÿè´£è€å¸ˆé’ˆé”‹ç›¸å¯¹ã€‚ç•™ä»»é¢è¯•ä¸­ï¼Œä»–åœ¨pptä¸­ç”¨æ¯ä¸€é¡µç”¨é»‘åº•ç™½å­—åå•†åœ¨è¿‡å»ä¸€å¹´æ‰¿æ‹…çš„ä»»åŠ¡ï¼Œä»–èµ°äº†pptéƒ½æ²¡æœ‰æ’­æ”¾å®Œã€‚ä»–å¯ä»¥ä¸åœ¨ä¹è‡ªå·±è·å¾—ä»€ä¹ˆï¼Œå¯ä»¥æ— æ‰€è°“åé¢çš„è¯„é€‰ï¼Œä»–åªæƒ³è®©äººä»¬èƒ½çŸ¥é“èƒ½ç†è§£ä»–åœ¨dvå·¥ä½œå®¤è¿™ä¸€å¹´çš„è¾›è‹¦ã€‚åœ¨2021å¹´çš„æœ€åä¸€å¤©ï¼Œä»–ç»ˆäºé‡Šç„¶äº†ã€‚</p><div class="note danger">            <p>ä»°å¤©å¤§ç¬‘å‡ºé—¨å»ï¼Œæˆ‘è¾ˆå²‚æ˜¯è“¬è’¿äºº</p>          </div>          </div><p>å¯¹äº2021å¹´å‰åŠéƒ¨åˆ†çš„æ€»ç»“ï¼Œå¤§ä½“ä¸Šæ¯å¤©çš„è®°å¿†åªå‰©ä¸‹dvçš„å·¥ä½œã€ç©ç©æ¸¸æˆå°±æ²¡äº†ã€‚å¯’å‡å› ä¸ºåŒå­¦éƒ½åœ¨ç©ï¼ŒæŠŠåŸç¥åˆæ‹¾èµ·æ¥ï¼Œç„¶åæŠŠè‡ªå·±çš„è´¦å·è‚æˆå¤©èŠ±æ¿ï¼Œè¿˜ç¬¬ä¸€æ¬¡åœ¨æ¸¸æˆé‡Œæ°ªé‡‘ã€‚å‰åä¸€å…±èŠ±äº†800å¤šï¼Œè´¦å·å¹³å‡33å‘å‡ºé‡‘ã€‚æ”¶æ‰‹äº†ï¼Œè´¦å·é€ç»™æœ‹å‹ï¼Œä»æ­¤å†ä¹Ÿä¸ç¢°ã€‚</p><p>è¿™å­¦æœŸå¼€å§‹åšæ ¡åŒºå¿ƒåçš„ç†äº‹éƒ¨éƒ¨é•¿ï¼Œæ‰‹ä¸‹çªç„¶å˜æˆäº†äºŒåå¤šä¸ªäººã€‚æœ¬æ¥åœ¨dvå°±å…¨éƒ½æ˜¯æˆ‘å´½å´½ï¼Œç°åœ¨åˆå¤šå‡ºæ¥äºŒåå¤šä¸ªå´½å´½ã€‚æ˜¯å¼€å¿ƒï¼Œä¹Ÿæ˜¯è´£ä»»ã€‚æ˜¯æ•™å¤§å®¶æ€ä¹ˆæ‰æ˜¯å¹²æ´»ï¼Œæ˜¯çœ‹ç€å‰¯éƒ¨èƒ½æ‰¿æ‹…èµ·å¤§æ¢çš„æ¬£æ…°ï¼Œæ˜¯æ¯ä¸€æ¬¡ææ´»åŠ¨éƒ½é€¼ç€å¤§å®¶èƒ½éšå£è¯´å‡ºæ¥æ—è¾¹äººçš„åå­—ï¼Œæ˜¯è§£ç­”æ¯ä¸€ä¸ªé—®é—®é¢˜çš„å´½å´½ã€‚å¾ˆå¼€å¿ƒï¼Œå¯ä»¥åˆè®¤è¯†åˆ°è¿™ä¹ˆå¤šå¯çˆ±çš„äººã€‚å’Œä¹‹å‰çš„ä¸¤å¹´ä¸€æ ·ï¼Œæ²¡æœ‰äººæ˜¯ä¸ºäº†ä»€ä¹ˆç¤¾ä¼šå·¥ä½œå¥–å­¦é‡‘åœ¨é˜¿è°€å¥‰æ‰¿ï¼Œè·Ÿå¤§å®¶åœ¨ä¸€èµ·ï¼Œåªæœ‰å¼€å¿ƒ</p><p>å¹¸è¿çš„æ˜¯ï¼Œ4æœˆåº•å¼€å§‹å‚ä¸åˆ°å˜‰ç¦¾è¿ç†è®ºå›çš„é¡¹ç›®ä¸­ï¼Œå¹¶ä¸”åœ¨äº”ä¸€æ­£å¼ä¸Šçº¿å¼€æ”¾æµ‹è¯•ã€‚è®ºå›ä¸€å¼€å§‹æ­å»ºåœ¨æˆ‘çš„æ ‘è“æ´¾ä¸Šï¼ŒåŠ æŒ‚äº†ä¸€ä¸ªç¡¬ç›˜å°±ä½œä¸ºæµ‹è¯•ç‰ˆä¸Šçº¿äº†ã€‚è¢«ç½‘ä¿¡ä¸­å¿ƒæ‰¾ä¸Šæ¥ä¹‹åï¼Œè®ºå›é€æ¸å¼€å§‹æ­£è§„åŒ–ï¼Œå°è¯•å¹¶è½¬å‘äº†å„ç§äº‘æœåŠ¡å•†ï¼Œå¹¶ä½¿ç”¨ç€æœ€ä¸ºä¾¿å®œçš„æ–¹æ¡ˆâ€¦â€¦è®¤è¯†äº†å„ç§å¤§ä½¬ï¼Œè§è¯†åˆ°å¾ˆå¤šä»¥å‰æ²¡æœ‰æ¥è§¦è¿‡çš„ä¸œè¥¿ã€‚è®ºå›è¿™ä¸ªé¡¹ç›®è¢«ä½œä¸ºåˆ›æ–°åˆ›ä¸šé¡¹ç›®é™ªä¼´æˆ‘ä»¬æ‹¿åˆ°äº†æ ¡ã€çœå¥–ï¼Œå°½ç®¡ç”±äºå­¦æ ¡çš„æ—¶é—´å®‰æ’é—®é¢˜è®©æˆ‘ä»¬è¢«è¿«æ­¢æ­¥äºè¾½å®çœï¼Œä½†æ˜¯éå¸¸å¼€å¿ƒæˆ‘ä»¬çš„é¡¹ç›®èƒ½æ”¶åˆ°æ¥è‡ªåä¸ºçš„å„ä½å¤§ä½¬çš„é’çã€‚</p><p>æ›´å¹¸è¿çš„æ˜¯ï¼Œ7æœˆä»½èƒ½æœ‰æœºä¼šå’Œå­¦é•¿ä»¬ä¸€èµ·å»æ²ˆé˜³çš„å®é©¬å·¥å‚æ‹¼3å¤©2å¤œã€‚ä»åˆšåˆ°çš„æ‡µé€¼åˆ°é€šå®µå‡†å¤‡ç­”è¾©ã€‚æˆ‘ä»¬æ˜¯å…¨åœºæœ€ä¸ºå¹´è½»çš„é˜Ÿä¼ï¼Œä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªå…¨ç”±æœ¬ç§‘ç”Ÿç»„æˆçš„é˜Ÿä¼ï¼Œåœ¨ä¸€ä¼—æ¥è‡ªç¾å›½ã€æ¸…åŒ—æµ™çš„ç ”ç©¶ç”Ÿç”šè‡³åšå£«ç”Ÿé˜Ÿä¼ä¸­æ€å‡ºé‡å›´ï¼Œå¾—åˆ°äº†æ¥è‡ªå®é©¬å¾·å›½æ€»éƒ¨çš„å·¥ç¨‹å¸ˆçš„èµè¯†ï¼Œéå¸¸ä¾¥å¹¸æ‹¿åˆ°å…¨å›½å† å†›ğŸ†ã€‚3å¤©ï¼Œ3ä¸ªèµ›é“ï¼Œé•¿äº†ä¸æ­¢3æ–¤ã€‚è°¢è°¢å®é©¬å·¥å‚çš„çƒ­æƒ…æ¬¾å¾…ï¼Œè®©æˆ‘ä»¬ä¸ä»…èƒ½å¼€å¿ƒçš„å‚ä¸æ´»åŠ¨ï¼Œæ‹¿åˆ°é¢å¤–çš„æ´»åŠ¨å°ç¤¼å“ï¼Œè¿˜æ‹¿åˆ°äº†æœ€ä½³äººæ°”å¥–ğŸ†</p><p>8æœˆæ˜¯ä»Šå¹´æœ€é»‘æš—çš„ä¸€æ®µæ—¶é—´ã€‚å¯¹ç°åœ¨çš„æ‹…å¿§ã€å¯¹æœªæ¥çš„ç„¦è™‘ï¼Œæˆ‘æ— æ³•å¾ˆå¥½çš„è°ƒèŠ‚è‡ªå·±çš„æƒ…ç»ªï¼Œè®©æˆ‘æ‰¾ä¸åˆ°æ–¹å‘ï¼Œè®©æˆ‘ä¸å¾—ä¸æ”¾ä¸‹äº†å¾ˆå¤šä¸œè¥¿ã€‚è°¢è°¢ä»8æœˆä»½ä¸€ç›´ç†è§£ã€å¸®åŠ©æˆ‘çš„æ¯ä¸€ä¸ªäººã€‚æˆ‘çŸ¥é“ï¼Œå¿ƒæ€çš„è½¬å˜è‚¯å®šä¸æ˜¯ä¸€æœä¸€å¤•å°±èƒ½åšåˆ°çš„ï¼Œæœ‰äº›ä¸œè¥¿å¯¹äºæˆ‘è¿™ä¸ªä¸å¤ªæ“…é•¿è¡¨è¾¾è‡ªå·±çš„äººæ¥è¯´æœ‰äº›å›°éš¾ï¼Œæ‰€ä»¥å¾ˆå¤šæ˜¯éœ€è¦è‡ªå·±ä¸€ç‚¹ä¸€ç‚¹æ¥æ…¢æ…¢åŒ–è§£å¼€ï¼Œè¿‡ç¨‹ç—›è‹¦æœ‰æ¼«é•¿</p><p>è°¢è°¢hzmçš„ps5å’Œswitchï¼Œè®©æˆ‘è¿™ä¸ªæ¸¸æˆç™½ç—´è¸ä¸Šæ–°å¤§é™†ã€‚åœ¨åšå®šæˆ‘éœ€è¦æ•´ä¸€ä¸ªæ¥party gameçš„æƒ³æ³•åŒæ—¶è®©æˆ‘åœ¨é€‰æ‹©å“ªä¸€ä¸ªä¸Šçº ç»“æ­»ï¼›æ„Ÿè°¢è€èƒ¡çš„3070ï¼Œè®©æˆ‘è·å¾—äº†ä¸€ç‚¹ç§‘ç ”ä½“éªŒé¡ºä¾¿èƒ½åœ¨å¯å®¤è”æœº</p><p>æƒ³äº†æƒ³ï¼Œä»Šå¹´æŒ£äº†ä¸å°‘é’±ã€‚å¥–é‡‘ã€å¥–å­¦é‡‘ã€æŒ–çŸ¿ï¼ˆåˆæ³•æ—¶ï¼‰ã€ä»¥åŠçœ‹ä¸è§çš„å·¥èµ„ã€‚ä»Šå¹´ä¹Ÿæ²¡å°‘èŠ±é’±ã€‚ä¹°äº†å¿ƒå¿ƒå¿µå¿µçš„HHKBï¼ŒæŠŠä¹‹å‰çš„pokerå€Ÿå‡ºå»ï¼›ç»™å®¶é‡Œæ·»äº†æŠŠå¿ƒæ°´çš„äººä½“å·¥å­¦æ¤…ï¼Œå°±æ˜¯æˆ‘æ—¥å¸¸éƒ½ä¸åœ¨å®¶ï¼›åœ¨å¯å®¤æ”¾äº†å°æ–°æ˜¾ç¤ºå™¨ï¼Œæ˜¯æ»¡è¶³æˆ‘éœ€æ±‚çš„æœ€ä½ä»·æ ¼çš„æ˜¾ç¤ºå™¨äº†ï¼›ä¹°äº†äºŒæ‰‹çš„æ¶å­ï¼ŒæŠŠå¯å®¤å¸ƒç½®æ¢äº†ä¸ªåº•æœå¤©ï¼›ä¹°äº†å¥½ä¸€ç‚¹çš„å°ç¯ï¼Œç»ˆäºä¸ç”¨å¿å—ä¹‹å‰å°ç¯çš„ç”µæµå£°â€¦â€¦</p><p>å…¶å®å›è¿‡å¤´æ¥ï¼Œçœ‹çœ‹å¤§å­¦å·²ç»ç»è¿‡çš„ä¸¤å¹´åŠï¼Œå¿…ä¿®å·²ç»å…¨éƒ¨å­¦å®Œäº†çš„æˆ‘ä»¬ï¼Œä¹Ÿåº”è¯¥å¯¹è‡ªå·±çš„å¤§å­¦åšä¸ªæ€»ç»“äº†ã€‚ä½œä¸ºå…¥å­¦æ—¶ç«™åœ¨èµ·è·‘çº¿çš„æˆ‘ä»¬ï¼Œæ¯”å·²ç»æå‰å‡ºå‘çš„äººå¤šè·‘äº†å¤šè¿œï¼Œåˆä¸åŒæ ·ä»èµ·è·‘çº¿å‡ºå‘çš„äººæœ‰ä»€ä¹ˆåŒºåˆ«â€¦â€¦</p><p>2021ï¼Œæ³¨å®šä¸å¹³å‡¡ï¼›2022ï¼Œæˆ‘ä»¬æ‹­ç›®ä»¥å¾…</p>          </div>]]></content>
    
    <summary type="html">
    
      Written on December 31st 2021
    
    </summary>
    
    
    
      <category term="REVIEW" scheme="https://augists.top/tags/REVIEW/"/>
    
  </entry>
  
  <entry>
    <title>Software Engineering Review 2</title>
    <link href="https://augists.top/NOTES/COURSES/Software_Engineering/Software-Engineering-Review-2/"/>
    <id>https://augists.top/NOTES/COURSES/Software_Engineering/Software-Engineering-Review-2/</id>
    <published>2021-12-22T15:55:11.000Z</published>
    <updated>2021-12-24T11:23:02.717Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <h2 id="è½¯ä»¶å·¥ç¨‹å­¦æ¦‚è¿°"><a href="#è½¯ä»¶å·¥ç¨‹å­¦æ¦‚è¿°" class="headerlink" title="è½¯ä»¶å·¥ç¨‹å­¦æ¦‚è¿°"></a>è½¯ä»¶å·¥ç¨‹å­¦æ¦‚è¿°</h2><h3 id="ä½•è°“è½¯ä»¶å±æœº"><a href="#ä½•è°“è½¯ä»¶å±æœº" class="headerlink" title="ä½•è°“è½¯ä»¶å±æœº"></a>ä½•è°“è½¯ä»¶å±æœº</h3><p>è½¯ä»¶å±æœºæ˜¯æŒ‡åœ¨è®¡ç®—æœºè½¯ä»¶çš„å¼€å‘å’Œç»´æŠ¤è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„ä¸€ç³»åˆ—ä¸¥é‡é—®é¢˜</p><h3 id="äº§ç”Ÿè½¯ä»¶å±æœºçš„åŸå› åŠè§£å†³é€”å¾„"><a href="#äº§ç”Ÿè½¯ä»¶å±æœºçš„åŸå› åŠè§£å†³é€”å¾„" class="headerlink" title="äº§ç”Ÿè½¯ä»¶å±æœºçš„åŸå› åŠè§£å†³é€”å¾„"></a>äº§ç”Ÿè½¯ä»¶å±æœºçš„åŸå› åŠè§£å†³é€”å¾„</h3><ul><li><p>æŠ€æœ¯åŸå› </p><ul><li>è½¯ä»¶è§„æ¨¡è¶Šæ¥è¶Šå¤§</li><li>è½¯ä»¶å¤æ‚åº¦è¶Šæ¥è¶Šé«˜</li></ul></li><li><p>ç®¡ç†åŸå› </p><ul><li>è½¯ä»¶å¼€å‘ç¼ºä¹æ­£ç¡®çš„ç†è®ºæŒ‡å¯¼ï¼Œè¿‡åˆ†ä¾é ä¸ªäººæŠ€å·§å’Œåˆ›é€ æ€§</li><li>å¯¹ç”¨æˆ·éœ€æ±‚æ²¡æœ‰å®Œæ•´å‡†ç¡®çš„è®¤è¯†</li></ul></li><li><p>è§£å†³é€”å¾„ï¼šè½¯ä»¶å·¥ç¨‹</p><ul><li>å¯¹è®¡ç®—æœºè½¯ä»¶æ­£ç¡®è®¤è¯†</li><li>æ¨å¹¿ä½¿ç”¨å¼€å‘è½¯ä»¶æˆåŠŸçš„æŠ€æœ¯å’Œæ–¹æ³•ï¼Œç ”ç©¶æ¢ç´¢æ›´å¥½æ›´æœ‰æ•ˆçš„æŠ€æœ¯å’Œæ–¹æ³•ï¼Œæ¶ˆé™¤é”™è¯¯æ¦‚å¿µå’Œåšæ³•</li><li>å¼€å‘å’Œä½¿ç”¨æ›´å¥½çš„è½¯ä»¶å·¥å…·</li><li>å¯¹äºæ—¶é—´ã€äººå‘˜ã€èµ„æºç­‰éœ€è¦å¼•å…¥æ›´åŠ åˆç†çš„ç®¡ç†æªæ–½</li></ul></li></ul><h3 id="è½¯ä»¶å·¥ç¨‹å®šä¹‰åŠåŸºæœ¬åŸç†"><a href="#è½¯ä»¶å·¥ç¨‹å®šä¹‰åŠåŸºæœ¬åŸç†" class="headerlink" title="è½¯ä»¶å·¥ç¨‹å®šä¹‰åŠåŸºæœ¬åŸç†"></a>è½¯ä»¶å·¥ç¨‹å®šä¹‰åŠåŸºæœ¬åŸç†</h3><ul><li>è½¯ä»¶å·¥ç¨‹<ul><li>å°†ç³»ç»ŸåŒ–ã€è§„èŒƒåŒ–ã€å¯é‡åŒ–çš„å·¥ç¨‹åŸåˆ™å’Œæ–¹æ³•ï¼Œåº”ç”¨äºè½¯ä»¶çš„å¼€å‘ã€è¿è¡Œå’Œç»´æŠ¤</li><li>å¯¹å…¶ä¸­æ–¹æ³•çš„ç†è®ºç ”ç©¶</li></ul></li><li>ä¸»è¦ç›®æ ‡<ul><li>é«˜æ•ˆå¼€å‘é«˜è´¨é‡è½¯ä»¶ï¼Œé™ä½å¼€å‘æˆæœ¬</li></ul></li><li>åŸºæœ¬åŸç†<ul><li>ç”¨åˆ†é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸè®¡åˆ’ä¸¥æ ¼ç®¡ç†</li><li>åšæŒè¿›è¡Œé˜¶æ®µè¯„å®¡</li><li>å®è¡Œä¸¥æ ¼çš„äº§å“æ§åˆ¶</li><li>é‡‡ç”¨ç°ä»£ç¨‹åºè®¾è®¡æŠ€æœ¯</li><li>ç»“æœåº”èƒ½æ¸…æ¥šçš„å®¡æŸ¥</li><li>å¼€å‘å°ç»„çš„äººå‘˜åº”è¯¥å°‘è€Œç²¾</li><li>æ‰¿è®¤ä¸æ–­æ”¹è¿›è½¯ä»¶å·¥ç¨‹å®è·µçš„å¿…è¦æ€§</li></ul></li></ul><h3 id="è½¯ä»¶å·¥ç¨‹æ–¹æ³•å­¦åŒ…å«å“ªä¸‰ä¸ªè¦ç´ "><a href="#è½¯ä»¶å·¥ç¨‹æ–¹æ³•å­¦åŒ…å«å“ªä¸‰ä¸ªè¦ç´ " class="headerlink" title="è½¯ä»¶å·¥ç¨‹æ–¹æ³•å­¦åŒ…å«å“ªä¸‰ä¸ªè¦ç´ "></a>è½¯ä»¶å·¥ç¨‹æ–¹æ³•å­¦åŒ…å«å“ªä¸‰ä¸ªè¦ç´ </h3><ul><li>æ–¹æ³•</li><li>å·¥å…·</li><li>è¿‡ç¨‹</li></ul><h3 id="è½¯ä»¶ç”Ÿå‘½å‘¨æœŸé˜¶æ®µåˆ’åˆ†åŠå„é˜¶æ®µçš„ä»»åŠ¡"><a href="#è½¯ä»¶ç”Ÿå‘½å‘¨æœŸé˜¶æ®µåˆ’åˆ†åŠå„é˜¶æ®µçš„ä»»åŠ¡" class="headerlink" title="è½¯ä»¶ç”Ÿå‘½å‘¨æœŸé˜¶æ®µåˆ’åˆ†åŠå„é˜¶æ®µçš„ä»»åŠ¡"></a>è½¯ä»¶ç”Ÿå‘½å‘¨æœŸé˜¶æ®µåˆ’åˆ†åŠå„é˜¶æ®µçš„ä»»åŠ¡</h3><ul><li>å¯è¡Œæ€§åˆ†æä¸å¼€å‘è®¡åˆ’<ul><li>çº¦æŸå’Œé™åˆ¶</li><li>ç®€è¦éœ€æ±‚åˆ†æï¼Œå»ºç«‹é€»è¾‘æ¨¡å‹</li><li>å¯¹å¯ä¾›é€‰æ‹©çš„è§£å†³æ–¹æ³•è¿›è¡Œç ”ç©¶<ul><li>æŠ€æœ¯å¯è¡Œæ€§</li><li>ç»æµå¯è¡Œæ€§</li><li>ç¤¾ä¼šå¯è¡Œæ€§</li></ul></li></ul></li><li>éœ€æ±‚åˆ†æ<ul><li>åŠŸèƒ½éœ€æ±‚</li><li>éåŠŸèƒ½æ€§éœ€æ±‚</li></ul></li><li>è½¯ä»¶è®¾è®¡<ul><li>æ¦‚è¦è®¾è®¡</li><li>è¯¦ç»†è®¾è®¡</li></ul></li><li>ç¨‹åºç¼–ç </li><li>è½¯ä»¶æµ‹è¯•<ul><li>å•å…ƒæµ‹è¯•</li><li>é›†æˆæµ‹è¯•</li><li>ç³»ç»Ÿæµ‹è¯•</li></ul></li><li>è½¯ä»¶ç»´æŠ¤<ul><li>æ”¹æ­£æ€§ç»´æŠ¤</li><li>é€‚åº”æ€§ç»´æŠ¤</li><li>å®Œå–„æ€§ç»´æŠ¤</li><li>é¢„é˜²æ€§ç»´æŠ¤</li></ul></li></ul><h3 id="å„ç§ç”Ÿå‘½å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µå’Œç‰¹ç‚¹"><a href="#å„ç§ç”Ÿå‘½å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µå’Œç‰¹ç‚¹" class="headerlink" title="å„ç§ç”Ÿå‘½å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µå’Œç‰¹ç‚¹"></a>å„ç§ç”Ÿå‘½å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µå’Œç‰¹ç‚¹</h3><h4 id="ç€‘å¸ƒæ¨¡å‹"><a href="#ç€‘å¸ƒæ¨¡å‹" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹"></a>ç€‘å¸ƒæ¨¡å‹</h4><ul><li>é˜¶æ®µé—´å…·æœ‰é¡ºåºæ€§å’Œä¾èµ–æ€§ï¼Œæ–‡æ¡£é©±åŠ¨</li><li>æ¨è¿Ÿå®ç°ï¼Œä¸æ€¥äºç¼–å†™ä»£ç <ul><li>å°½å¯èƒ½çš„ç†è§£å’ŒæŒæ¡ç³»ç»Ÿéœ€æ±‚</li><li>æ¸…æ¥šåŒºåˆ†é€»è¾‘è®¾è®¡ä¸ç‰©ç†è®¾è®¡ï¼Œå°½å¯èƒ½æ¨è¿Ÿç¨‹åºçš„ç‰©ç†å®ç°</li></ul></li><li>è´¨é‡ä¿è¯çš„è§‚ç‚¹<ul><li>æ¯ä¸ªé˜¶æ®µéƒ½å¿…é¡»å®Œæˆè§„å®šçš„æ–‡æ¡£ï¼Œæ²¡æœ‰äº¤å‡ºåˆæ ¼çš„æ–‡æ¡£å°±æ˜¯æ²¡æœ‰å®Œæˆè¯¥é˜¶æ®µçš„ä»»åŠ¡</li><li>æ¯ä¸ªé˜¶æ®µç»“æŸå‰éƒ½è¦å¯¹æ‰€å®Œæˆçš„æ–‡æ¡£è¿›è¡Œè¯„å®¡ï¼Œä»¥ä¾¿å°½æ—©å‘ç°é—®é¢˜ï¼Œæ”¹æ­£é”™è¯¯</li></ul></li></ul><p>é—®é¢˜</p><ul><li>ä¸å¸Œæœ›æœ‰å˜åŒ–</li><li>å˜åŒ–æ¥çš„è¶Šæ™šï¼Œä»˜å‡ºçš„ä»£ä»·è¶Šé«˜</li><li>è®¾è®¡é˜¶æ®µè¿‡å¤šçš„å‡è®¾ï¼Œå¯¼è‡´ç†æƒ³åŒ–ã€ä¸€å¢æƒ…æ„¿çš„ä¸œè¥¿è¿‡å¤šï¼ˆç”¨æˆ·åªå‚ä¸éœ€æ±‚ï¼‰</li><li>æ–‡æ¡£é©±åŠ¨ï¼Œé™æ€</li></ul><p>é€‚åˆè§„æ¨¡è¾ƒå¤§çš„ç³»ç»Ÿæˆ–åˆ†å¸ƒå¼å¼€å‘æ¨¡å¼</p><h4 id="å¿«é€ŸåŸå‹æ¨¡å‹"><a href="#å¿«é€ŸåŸå‹æ¨¡å‹" class="headerlink" title="å¿«é€ŸåŸå‹æ¨¡å‹"></a>å¿«é€ŸåŸå‹æ¨¡å‹</h4><ul><li>å¯¹ç³»ç»Ÿè¿›è¡Œç®€å•å’Œå¿«é€Ÿçš„åˆ†æï¼Œå¿«é€Ÿæ„é€ ä¸€ä¸ªè½¯ä»¶åŸå‹</li><li>ç”¨æˆ·å’Œå¼€å‘è€…åœ¨è¯•ç”¨æˆ–æ¼”ç¤ºè¿‡ç¨‹ä¸­åŠ å¼ºæ²Ÿé€šå’Œåé¦ˆï¼Œè·å–åˆ°ç”¨æˆ·çœŸæ­£çš„éœ€æ±‚</li></ul><p>é—®é¢˜</p><ul><li>æ‰€é€‰ç”¨çš„å¼€å‘æŠ€æœ¯å’Œå·¥å…·ä¸ä¸€å®šæ˜¯å®é™…é¡¹ç›®çš„éœ€è¦</li><li>å¿«é€Ÿå»ºç«‹èµ·æ¥çš„æ¨¡å‹å¯èƒ½ç”±äºä¸ç¬¦åˆå„ç§å¼€å‘è§„èŒƒï¼ŒåŠ ä¸Šä¸æ–­ä¿®æ”¹ï¼Œè´¨é‡è¾ƒå·®ï¼Œè¢«æŠ›å¼ƒ</li></ul><p>é€‚åˆä¸€ä¸ªå…¨æ–°çš„ç³»ç»Ÿå¼€å‘</p><h4 id="å¢é‡æ¨¡å‹"><a href="#å¢é‡æ¨¡å‹" class="headerlink" title="å¢é‡æ¨¡å‹"></a>å¢é‡æ¨¡å‹</h4><ul><li>é€æ­¥å¢åŠ ç³»ç»ŸåŠŸèƒ½</li><li>ç¬¬ä¸€ä¸ªå¢é‡æ„ä»¶å¾€å¾€å®ç°è½¯ä»¶çš„åŸºæœ¬éœ€æ±‚ï¼Œæä¾›æœ€æ ¸å¿ƒçš„åŠŸèƒ½</li></ul><p>é—®é¢˜ï¼š</p><ul><li>åŠ å…¥æ„ä»¶å¿…é¡»ä¸ç ´åå·²æ„é€ å¥½çš„ç³»ç»Ÿéƒ¨åˆ†</li><li>å®¹æ˜“é€€åŒ–ä¸ºâ€œè¾¹åšè¾¹æ”¹â€æ¨¡å‹ï¼Œä»è€Œä½¿è½¯ä»¶è¿‡ç¨‹çš„æ§åˆ¶å¤±å»æ•´ä½“æ€§</li></ul><h4 id="èºæ—‹æ¨¡å‹"><a href="#èºæ—‹æ¨¡å‹" class="headerlink" title="èºæ—‹æ¨¡å‹"></a>èºæ—‹æ¨¡å‹</h4><ul><li>åœ¨æ¯ä¸ªé˜¶æ®µä¹‹å‰éƒ½å¢åŠ äº†é£é™©åˆ†æè¿‡ç¨‹ï¼ˆç€‘å¸ƒæ¨¡å‹ï¼‰çš„å¿«é€ŸåŸå‹æ¨¡å‹</li></ul><p>é€‚åˆå¤§å‹å¤æ‚çš„ç³»ç»Ÿ</p><h4 id="å–·æ³‰æ¨¡å‹"><a href="#å–·æ³‰æ¨¡å‹" class="headerlink" title="å–·æ³‰æ¨¡å‹"></a>å–·æ³‰æ¨¡å‹</h4><ul><li>å…¸å‹çš„é¢å‘å¯¹è±¡ç”Ÿå‘½å‘¨æœŸæ¨¡å‹</li><li>è¿­ä»£ï¼šé€æ­¥æ±‚ç²¾</li><li>é˜¶æ®µé—´æ²¡æœ‰æ˜æ˜¾çš„ç•Œé™</li></ul><h4 id="æ•æ·è½¯ä»¶å¼€å‘"><a href="#æ•æ·è½¯ä»¶å¼€å‘" class="headerlink" title="æ•æ·è½¯ä»¶å¼€å‘"></a>æ•æ·è½¯ä»¶å¼€å‘</h4><ul><li>è¿­ä»£å¼å¼€å‘</li><li>å¢é‡äº¤ä»˜</li><li>å¼€å‘å›¢é˜Ÿå’Œç”¨æˆ·åé¦ˆæ¨åŠ¨äº§å“å¼€å‘</li><li>æŒç»­é›†æˆ</li><li>å¼€å‘å›¢é˜Ÿè‡ªæˆ‘ç®¡ç†</li></ul><p>æ•æ·å®£è¨€ï¼š</p><ul><li>ä¸ªä½“å’Œäº’åŠ¨èƒœè¿‡æµç¨‹å’Œå·¥å…·</li><li>å·¥ä½œçš„è½¯ä»¶èƒœè¿‡è¯¦å°½çš„æ–‡æ¡£</li><li>å®¢æˆ·åˆä½œèƒœè¿‡åˆåŒè°ˆåˆ¤</li><li>ç›¸åº”å˜åŒ–èƒœè¿‡éµå¾ªè®¡åˆ’</li></ul><p>ä¼˜åŠ¿</p><ul><li>ç²¾ç¡®</li><li>è´¨é‡</li><li>é€Ÿåº¦</li><li>ä¸°åšçš„æŠ•èµ„å›æŠ¥ç‡</li><li>é«˜æ•ˆçš„è‡ªæˆ‘ç®¡ç†å›¢é˜Ÿ</li></ul><p>é€‚åˆè§„æ¨¡ä¸­å°ã€éœ€æ±‚å˜åŒ–é¢‘ç¹çš„ç³»ç»Ÿå¼€å‘ï¼Œå¹¶ä¸”å¼ºè°ƒå›¢é˜Ÿçš„ä½œç”¨ï¼Œé€‚åˆé›†ä¸­å¼çš„å¼€å‘æ¨¡å¼</p><h4 id="æé™ç¼–ç¨‹"><a href="#æé™ç¼–ç¨‹" class="headerlink" title="æé™ç¼–ç¨‹"></a>æé™ç¼–ç¨‹</h4><ul><li>e<strong>X</strong>treme <strong>P</strong>rogramming</li><li>ç›®çš„æ˜¯é™ä½éœ€æ±‚å˜åŒ–çš„æˆæœ¬</li><li>å¼€å‘æ–¹æ³•<ul><li>å®¢æˆ·ä»£è¡¨ä¸å¼€å‘å›¢é˜Ÿç´§å¯†èåˆ</li><li>ç»“å¯¹ç¼–ç¨‹ pair-programming</li></ul></li><li>å¼€å‘æµç¨‹<ul><li>ç¼–å†™ç”¨æˆ·æ•…äº‹</li><li>æ¶æ„è§„èŒƒ</li><li>å®æ–½è§„åˆ’</li><li>è¿­ä»£è®¡åˆ’</li><li>ä»£ç å¼€å‘</li><li>å•å…ƒæµ‹è¯•</li><li>éªŒæ”¶æµ‹è¯•</li></ul></li><li>æ ¸å¿ƒåšæ³•<ul><li>å°è§„æ¨¡ï¼Œé¢‘ç¹çš„ç‰ˆæœ¬å‘å¸ƒï¼ŒçŸ­è¿­ä»£å‘¨æœŸ</li><li>æµ‹è¯•é©±åŠ¨å¼€å‘ Test-driven development</li><li>ç»“å¯¹ç¼–ç¨‹ Pair programming</li><li>æŒç»­é›†æˆ Continuous integration</li><li>æ¯æ—¥ç«™ç«‹ä¼šè®® Daily stand-up meeting</li><li>å…±åŒæ‹¥æœ‰ä»£ç  Collative code ownership</li><li>ç³»ç»Ÿéšå–» System metaphor</li></ul></li></ul><h3 id="äº†è§£æ•æ·è¿‡ç¨‹å’Œæé™ç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³"><a href="#äº†è§£æ•æ·è¿‡ç¨‹å’Œæé™ç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³" class="headerlink" title="äº†è§£æ•æ·è¿‡ç¨‹å’Œæé™ç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³"></a>äº†è§£æ•æ·è¿‡ç¨‹å’Œæé™ç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³</h3><ul><li>Scrum æ³¨é‡è¿‡ç¨‹ï¼ŒXP æ³¨é‡å®è·µ</li><li>éœ€æ±‚è¢«å®šä¹‰ä¸ºäº§å“éœ€æ±‚ç§¯å‹ product backlogs</li><li>å¼€å‘è¿‡ç¨‹æ°›å›´å¤šä¸ªå†²åˆºå‘¨æœŸ sprint</li><li>ç‡ƒå°½å›¾ burn down æ˜¾ç¤ºå½“å‰å†²åˆºä¸­æœªå®Œæˆçš„æ•°ç›®</li></ul><p>Scrum è§’è‰²</p><ul><li>äº§å“æ‹¥æœ‰è€… Product Owner</li><li>åˆ©ç›Šç›¸å…³è€… Stakeholder</li><li>ä¸“å®¶ Scrum Master</li><li>å›¢é˜Ÿæˆå‘˜ Team Member</li></ul><p>DevOps è¿‡ç¨‹</p><ul><li>æ ¸å¿ƒç›®æ ‡æ˜¯è‡ªåŠ¨åŒ–å’Œå¯æŒç»­äº¤ä»˜</li></ul><h2 id="è½¯ä»¶æ¶æ„çš„æ„ä»¶"><a href="#è½¯ä»¶æ¶æ„çš„æ„ä»¶" class="headerlink" title="è½¯ä»¶æ¶æ„çš„æ„ä»¶"></a>è½¯ä»¶æ¶æ„çš„æ„ä»¶</h2><h3 id="4-1-è§†å›¾"><a href="#4-1-è§†å›¾" class="headerlink" title="4+1 è§†å›¾"></a>4+1 è§†å›¾</h3><ul><li>é€»è¾‘è§†å›¾ Logic View<ul><li>ä¸»è¦æ”¯æŒç³»ç»Ÿçš„åŠŸèƒ½æ€§éœ€æ±‚ï¼Œå³ç³»ç»Ÿæä¾›ç»™æœ€ç»ˆç”¨æˆ·çš„æœåŠ¡</li><li>åŠŸèƒ½æè¿°</li><li>ç±»æ¨¡å‹</li></ul></li><li>å¼€å‘è§†å›¾ Development View ï¼ˆæ¨¡å—è§†å›¾ Module Viewï¼‰<ul><li>è½¯ä»¶æ¨¡å—çš„ç»„ç»‡å’Œç®¡ç†</li><li>è½¯ä»¶å¯é€šè¿‡ç¨‹åºåº“æˆ–å­ç³»ç»Ÿè¿›è¡Œç»„ç»‡</li><li>å­ç³»ç»Ÿ</li><li>æ¥å£</li></ul></li><li>è¿›ç¨‹è§†å›¾ Process View ï¼ˆå¹¶å‘è§†å›¾ï¼‰<ul><li>ç³»ç»Ÿçš„è¿è¡Œç‰¹æ€§ï¼Œä¸»è¦å…³æ³¨éåŠŸèƒ½æ€§éœ€æ±‚</li><li>å¤„ç†æµç¨‹</li><li>å¹¶è¡Œæ€§</li><li>åŒæ­¥</li></ul></li><li>ç‰©ç†è§†å›¾ Physical View<ul><li>æŠŠè½¯ä»¶æ˜ å°„åˆ°ç¡¬ä»¶ä¸Š</li><li>è€ƒè™‘ç³»ç»Ÿæ€§èƒ½ã€è§„æ¨¡ã€å¯é æ€§</li><li>ç›®æ ‡ç¡¬ä»¶</li><li>ç½‘ç»œ</li></ul></li><li>åœºæ™¯è§†å›¾ Scenarios View<ul><li>é‡è¦ç³»ç»Ÿæ´»åŠ¨çš„æŠ½è±¡</li></ul></li></ul><h3 id="è½¯ä»¶æ¶æ„é£æ ¼"><a href="#è½¯ä»¶æ¶æ„é£æ ¼" class="headerlink" title="è½¯ä»¶æ¶æ„é£æ ¼"></a>è½¯ä»¶æ¶æ„é£æ ¼</h3><h4 id="ç®¡é“ä¸è¿‡æ»¤å™¨"><a href="#ç®¡é“ä¸è¿‡æ»¤å™¨" class="headerlink" title="ç®¡é“ä¸è¿‡æ»¤å™¨"></a>ç®¡é“ä¸è¿‡æ»¤å™¨</h4><h4 id="å±‚æ¬¡ç»“æ„"><a href="#å±‚æ¬¡ç»“æ„" class="headerlink" title="å±‚æ¬¡ç»“æ„"></a>å±‚æ¬¡ç»“æ„</h4><h4 id="ä»“åº“-é»‘æ¿ç³»ç»Ÿ"><a href="#ä»“åº“-é»‘æ¿ç³»ç»Ÿ" class="headerlink" title="ä»“åº“/é»‘æ¿ç³»ç»Ÿ"></a>ä»“åº“/é»‘æ¿ç³»ç»Ÿ</h4><ul><li>ä¸­å¤®æ•°æ®ç»“æ„ï¼šè¯´æ˜å½“å‰çŠ¶æ€</li><li>ç‹¬ç«‹æ„ä»¶ï¼šåœ¨ä¸­å¤®æ•°æ®å­˜å‚¨ä¸Šæ‰§è¡Œ</li></ul><p>è‹¥è¾“å…¥æµä¸­æŸç±»æ—¶é—´è§¦å‘è¿›ç¨‹æ‰§è¡Œçš„é€‰æ‹©ï¼Œåˆ™ä»“åº“æ˜¯ä¸€ä¸ªä¼ ç»Ÿå‹æ•°æ®åº“<br>è‹¥ä¸­å¤®æ•°æ®ç»“æ„çš„å½“å‰çŠ¶æ€è§¦å‘è¿›ç¨‹æ‰§è¡Œçš„é€‰æ‹©ï¼Œåˆ™ä»“åº“æ˜¯ä¸€ä¸ªé»‘æ¿ç³»ç»Ÿ</p><h4 id="æ­£äº¤è½¯ä»¶ç»“æ„"><a href="#æ­£äº¤è½¯ä»¶ç»“æ„" class="headerlink" title="æ­£äº¤è½¯ä»¶ç»“æ„"></a>æ­£äº¤è½¯ä»¶ç»“æ„</h4><ul><li>ç»„ç»‡å±‚</li><li>çº¿ç´¢</li></ul><h4 id="å®¢æˆ·æœº-æœåŠ¡å™¨ç»“æ„"><a href="#å®¢æˆ·æœº-æœåŠ¡å™¨ç»“æ„" class="headerlink" title="å®¢æˆ·æœº/æœåŠ¡å™¨ç»“æ„"></a>å®¢æˆ·æœº/æœåŠ¡å™¨ç»“æ„</h4><ul><li>æœåŠ¡å™¨ï¼šç®¡ç†ç³»ç»Ÿçš„èµ„æºï¼ŒæœåŠ¡å™¨è®¿é—®ä¸å¹¶å‘æ€§æ§åˆ¶ã€æœåŠ¡å™¨å®‰å…¨æ€§ã€æœåŠ¡å™¨çš„å¤‡ä»½ä¸æ¢å¤å’Œå…¨å±€æ•°æ®å®Œæ•´æ€§è§„åˆ™</li><li>å®¢æˆ·åº”ç”¨ç¨‹åºï¼šæä¾›ç”¨æˆ·ä¸æœåŠ¡å™¨äº¤äº’çš„ç•Œé¢ã€å‘æœåŠ¡å™¨æäº¤ç”¨æˆ·è¯·æ±‚å¹¶æ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„ä¿¡æ¯ã€åˆ©ç”¨å®¢æˆ·åº”ç”¨ç¨‹åºå¯¹å­˜åœ¨äºå®¢æˆ·ç«¯çš„æ•°æ®æ‰§è¡Œåº”ç”¨é€»è¾‘è¦æ±‚</li><li>ç½‘ç»œï¼šå®ŒæˆæœåŠ¡å™¨å’Œå®¢æˆ·åº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®ä¼ è¾“</li></ul><h4 id="æµè§ˆå™¨-æœåŠ¡å™¨ç»“æ„"><a href="#æµè§ˆå™¨-æœåŠ¡å™¨ç»“æ„" class="headerlink" title="æµè§ˆå™¨/æœåŠ¡å™¨ç»“æ„"></a>æµè§ˆå™¨/æœåŠ¡å™¨ç»“æ„</h4><p>ä¸ C/S ç»“æ„ç›¸æ¯”ï¼ŒB/S ç»“æ„å¢åŠ äº†ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ï¼Œå¯ä»¥å°†æ•´ä¸ªåº”ç”¨é€»è¾‘ä¿å­˜åœ¨åº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·ç«¯çš„å‹åŠ›å¤§å¤§å‡è½»ï¼Œè´Ÿè·è¢«å‡è¡¡çš„åˆ†é…ç»™äº†æœåŠ¡å™¨</p><h4 id="MVC-ç»“æ„"><a href="#MVC-ç»“æ„" class="headerlink" title="MVC ç»“æ„"></a>MVC ç»“æ„</h4><p>Model View Controller</p>          </div>]]></content>
    
    <summary type="html">
    
      Software Engineering Review
    
    </summary>
    
    
    
      <category term="NOTE" scheme="https://augists.top/tags/NOTE/"/>
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>Software Engineering Review</title>
    <link href="https://augists.top/NOTES/COURSES/Software_Engineering/Software-Engineering-Review/"/>
    <id>https://augists.top/NOTES/COURSES/Software_Engineering/Software-Engineering-Review/</id>
    <published>2021-12-19T07:06:30.000Z</published>
    <updated>2021-12-20T06:00:41.480Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <h1 id="è½¯ä»¶å·¥ç¨‹å¤ä¹ "><a href="#è½¯ä»¶å·¥ç¨‹å¤ä¹ " class="headerlink" title="è½¯ä»¶å·¥ç¨‹å¤ä¹ "></a>è½¯ä»¶å·¥ç¨‹å¤ä¹ </h1><p>è½¯ä»¶å·¥ç¨‹ä¸‰è¦ç´ ï¼š æ–¹æ³• å·¥å…· å’Œ è¿‡ç¨‹</p><h2 id="è½¯ä»¶å¼€å‘æ–¹æ³•"><a href="#è½¯ä»¶å¼€å‘æ–¹æ³•" class="headerlink" title="è½¯ä»¶å¼€å‘æ–¹æ³•*"></a>è½¯ä»¶å¼€å‘æ–¹æ³•*</h2><h3 id="ä¼ ç»Ÿå¼€å‘æ–¹æ³•"><a href="#ä¼ ç»Ÿå¼€å‘æ–¹æ³•" class="headerlink" title="ä¼ ç»Ÿå¼€å‘æ–¹æ³•"></a>ä¼ ç»Ÿå¼€å‘æ–¹æ³•</h3><p>ç»“æ„åŒ–æ–¹æ³•ï¼šåˆ†é˜¶æ®µçš„ï¼Œé¡ºåºçš„ï¼Œä¾èµ–æ€§</p><p>ç¼ºç‚¹ï¼šç¼ºå°‘çµæ´»æ€§ï¼Œé™æ€ï¼Œç¼ºå°‘åº”å¯¹å˜åŒ–çš„èƒ½åŠ›</p><h3 id="é¢å‘å¯¹è±¡æ–¹æ³•"><a href="#é¢å‘å¯¹è±¡æ–¹æ³•" class="headerlink" title="é¢å‘å¯¹è±¡æ–¹æ³•"></a>é¢å‘å¯¹è±¡æ–¹æ³•</h3><p>å°†è½¯ä»¶æ„ä»¶åˆ’åˆ†ä¸º<strong>ç±»</strong>ï¼Œå¹¶å®šä¹‰ä¸€ç»„é™æ€çš„<strong>å˜é‡</strong>å’ŒåŠ¨æ€çš„<strong>æ–¹æ³•</strong></p><p>åˆ©ç”¨çˆ¶å­ç±»å’Œ<strong>ç»§æ‰¿</strong>çš„å…³ç³»å½¢æˆ<strong>å±‚æ¬¡ç»“æ„</strong>ï¼Œ</p><p><strong>å°è£…æ€§</strong>ï¼šå¯¹è±¡é—´ä»…èƒ½é€šè¿‡å‘é€æ¶ˆæ¯äº’ç›¸è”ç³»</p><p>é€šè¿‡<strong>åå¤è¿­ä»£</strong>å¼€å‘è½¯ä»¶ï¼Œé™ä½<strong>å¤æ‚æ€§</strong>ï¼Œæé«˜<strong>å¯ç†è§£æ€§</strong>ï¼Œæ”¯æŒ<strong>è½¯ä»¶é‡ç”¨</strong></p><p>æ›´å¥½çš„åº”å¯¹å˜åŒ–</p><h2 id="è½¯ä»¶å¼€å‘å„é˜¶æ®µæ´»åŠ¨åŠä»»åŠ¡"><a href="#è½¯ä»¶å¼€å‘å„é˜¶æ®µæ´»åŠ¨åŠä»»åŠ¡" class="headerlink" title="è½¯ä»¶å¼€å‘å„é˜¶æ®µæ´»åŠ¨åŠä»»åŠ¡*"></a>è½¯ä»¶å¼€å‘å„é˜¶æ®µæ´»åŠ¨åŠä»»åŠ¡*</h2><ul><li>å¯è¡Œæ€§åˆ†æï¼šé«˜å±‚æ¬¡éœ€æ±‚åˆ†æ - æŠ€æœ¯ï¼Œç»æµï¼Œç¤¾ä¼š</li><li>éœ€æ±‚åˆ†æï¼šè¿›è¡Œ<strong>å˜æ›´ç®¡ç†</strong>é€‚åº”å˜åŒ–ï¼Œåˆ†ä¸ºåŠŸèƒ½æ€§å’ŒéåŠŸèƒ½æ€§ï¼Œè¾“å‡ºéœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦</li><li>è½¯ä»¶è®¾è®¡ï¼šæ¦‚è¦+è¯¦ç»†</li><li>ç¨‹åºç¼–ç </li><li>è½¯ä»¶æµ‹è¯•ï¼šå•å…ƒ-&gt;é›†æˆ-&gt;ç³»ç»Ÿï¼Œåˆ†ä¸ºé»‘ç›’å’Œç™½ç›’</li><li>è½¯ä»¶ç»´æŠ¤ï¼šæ”¹æ­£æ€§ï¼Œé€‚åº”æ€§ï¼Œå®Œå–„æ€§ï¼Œé¢„é˜²æ€§</li></ul><h2 id="ç”Ÿå‘½å‘¨æœŸæ¨¡å‹"><a href="#ç”Ÿå‘½å‘¨æœŸæ¨¡å‹" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸæ¨¡å‹"></a>ç”Ÿå‘½å‘¨æœŸæ¨¡å‹</h2><h3 id="ç€‘å¸ƒæ¨¡å‹"><a href="#ç€‘å¸ƒæ¨¡å‹" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹*"></a>ç€‘å¸ƒæ¨¡å‹*</h3><p>ä¼ ç»Ÿå¼€å‘æ–¹æ³• <strong>æœ€å¹¿æ³›</strong>ï¼Œé¡ºåºæ€§ï¼Œä¾èµ–æ€§</p><p>æ¨è¿Ÿå†™ä»£ç ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½å†™æ–‡æ¡£</p><p>ç¼ºç‚¹ï¼šç”¨æˆ·å‚ä¸å°‘ï¼Œé™æ€</p><h3 id="å¿«é€ŸåŸå‹æ¨¡å‹"><a href="#å¿«é€ŸåŸå‹æ¨¡å‹" class="headerlink" title="å¿«é€ŸåŸå‹æ¨¡å‹*"></a>å¿«é€ŸåŸå‹æ¨¡å‹*</h3><p>çœ‹å</p><p>ä¼˜ç‚¹ï¼š ç”¨æˆ·å‚ä¸å¤šäº†</p><p>ç¼ºç‚¹ï¼š åŸå‹å¤§æ¦‚ç‡æŠ›å¼ƒ</p><h3 id="å¢é‡æ¨¡å‹"><a href="#å¢é‡æ¨¡å‹" class="headerlink" title="å¢é‡æ¨¡å‹"></a>å¢é‡æ¨¡å‹</h3><p>åˆ†ä¸ºåŠŸèƒ½æ¨¡å—ï¼Œé€æ­¥å®ç°ï¼ˆå¼€æ”¾æ¶æ„ï¼‰</p><h3 id="èºæ—‹æ¨¡å‹"><a href="#èºæ—‹æ¨¡å‹" class="headerlink" title="èºæ—‹æ¨¡å‹"></a>èºæ—‹æ¨¡å‹</h3><p>ç€‘å¸ƒ+å¿«é€ŸåŸå‹+é£é™©åˆ†æ</p><p>æ¯é˜¶æ®µå¢åŠ é£é™©åˆ†æï¼Œé™ä½é£é™©</p><h3 id="å–·æ³‰æ¨¡å‹"><a href="#å–·æ³‰æ¨¡å‹" class="headerlink" title="å–·æ³‰æ¨¡å‹*"></a>å–·æ³‰æ¨¡å‹*</h3><p>è¿­ä»£å’Œæ— ç¼</p><p>æ€»ç›®æ ‡ï¼šçº¿æ€§è¿‡ç¨‹</p><p><strong>è¿­ä»£</strong> é€æ­¥æ±‚ç²¾ï¼Œé¢å‘å¯¹è±¡</p><h2 id="æ•æ·"><a href="#æ•æ·" class="headerlink" title="æ•æ·"></a>æ•æ·</h2><h3 id="æ•æ·å®£è¨€"><a href="#æ•æ·å®£è¨€" class="headerlink" title="æ•æ·å®£è¨€"></a>æ•æ·å®£è¨€</h3><ul><li>ä¸ªä½“ + äº’åŠ¨ &gt; æµç¨‹ + å·¥å…·</li><li>è½¯ä»¶ &gt; æ–‡æ¡£</li><li>å®¢æˆ·åˆä½œ &gt; åˆåŒè°ˆåˆ¤</li><li>ç›¸åº”å˜åŒ– &gt; éµå¾ªè®¡åˆ’</li></ul><h3 id="å¢é‡å’Œè¿­ä»£"><a href="#å¢é‡å’Œè¿­ä»£" class="headerlink" title="å¢é‡å’Œè¿­ä»£"></a>å¢é‡å’Œè¿­ä»£</h3><p>ç³»ç»Ÿç”±ä¸‰ä¸ªæ¨¡å—æ„æˆ</p><ul><li><p>å¢é‡ï¼šä¸€ä¸ªä¸ªå®ç°</p></li><li><p>è¿­ä»£ï¼šå®ç°ä¸‰ä¸ªåƒåœ¾æ¨¡å—ï¼Œå†ä¸€æ­¥æ­¥æ±‚ç²¾</p></li></ul><h3 id="SCRUM"><a href="#SCRUM" class="headerlink" title="SCRUM*"></a>SCRUM*</h3><p><strong>å†²åˆº Sprint</strong>ï¼šä¸€ä¸ªå·¥ä½œå‘¨æœŸ</p><ul><li>äº§å“è®¢å•ï¼šé¡¹ç›®çš„æ¦‚è¦æ–‡æ¡£ï¼Œä»¥å¤©ä¸ºå•ä½</li><li>å†²åˆºè®¢å•ï¼šå°æ–‡æ¡£ï¼Œä»¥ 16 å°æ—¶ä¸ºå•ä½</li><li>ç‡ƒå°½å›¾ï¼što-do list</li></ul><p>è§’è‰²</p><ul><li>äº§å“æ‹¥æœ‰è€…ï¼šç”²æ–¹é¢†å¯¼</li><li>åˆ©ç›Šç›¸å…³è€…ï¼šå®¢æˆ·</li><li>ä¸“å®¶ï¼šæŠ€æœ¯æ€»ç›‘</li><li>å›¢é˜Ÿæˆå‘˜ï¼šç¨‹åºå‘˜</li></ul><p>æ´»åŠ¨</p><ul><li>è®¡åˆ’ä¼šï¼šå†²åˆºåˆåˆ¶å®šè®¡åˆ’</li><li>æ¯æ—¥ç«‹ä¼šï¼šæ¯å¤©15åˆ†é’Ÿ</li><li>è¯„å®¡ä¼šï¼šå†²åˆºç»“æŸå‰</li><li>åæ€ä¼š/å›é¡¾ä¼šï¼šå†²åˆºç»“æŸå</li></ul><p>XP(æé™ç¼–ç¨‹) äº SCRUM åŒºåˆ«</p><table><thead><tr><th></th><th>XP</th><th>SCRUM</th></tr></thead><tbody><tr><td>è¿­ä»£é•¿åº¦</td><td>1-2å‘¨</td><td>3-4å‘¨</td></tr><tr><td>è¿­ä»£ä¸­æ˜¯å¦å…è®¸ä¿®æ”¹éœ€æ±‚</td><td>yes</td><td>no</td></tr><tr><td>è¿­ä»£ä¸­æ˜¯å¦æŒ‰ä¼˜å…ˆçº§å®ç°</td><td>yes</td><td>no</td></tr><tr><td>æ˜¯å¦é‡‡ç”¨ä¸¥æ ¼å·¥ç¨‹æ–¹æ³•ï¼Œä¿è¯è¿›åº¦è´¨é‡</td><td>yes</td><td>no</td></tr></tbody></table><h3 id="DevOps"><a href="#DevOps" class="headerlink" title="DevOps"></a>DevOps</h3><p>è‡ªåŠ¨åŒ–ï¼Œé«˜åº¦ä¾èµ–å·¥å…·</p><h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><h3 id="ç”¨æˆ·-amp-ç³»ç»Ÿ"><a href="#ç”¨æˆ·-amp-ç³»ç»Ÿ" class="headerlink" title="ç”¨æˆ· &amp; ç³»ç»Ÿ"></a>ç”¨æˆ· &amp; ç³»ç»Ÿ</h3><ul><li>ç³»ç»Ÿéœ€æ±‚æ˜¯å¯¹ç”¨æˆ·éœ€æ±‚çš„ç»†åŒ–å’Œå®Œå–„</li><li>ç³»ç»Ÿéœ€æ±‚çš„é˜…è¯»å¯¹è±¡æ˜¯å¼€å‘è€…ï¼Œç”¨æˆ·éœ€æ±‚æ˜¯å®¢æˆ·</li><li>ç³»ç»Ÿéœ€æ±‚æ˜¯ç”¨æˆ·éœ€æ±‚çš„å¼€å§‹</li><li>ç›®æ ‡ &amp; æ¶‰ä¼—</li></ul><h3 id="æ¶‰ä¼—"><a href="#æ¶‰ä¼—" class="headerlink" title="æ¶‰ä¼—"></a>æ¶‰ä¼—</h3><p>ä¸ç›®æ ‡ç³»ç»Ÿç›¸å…³çš„ä¸€åˆ‡äººå’Œç‰©</p><h3 id="ç³»ç»ŸåŠŸèƒ½çš„ç¡®å®š"><a href="#ç³»ç»ŸåŠŸèƒ½çš„ç¡®å®š" class="headerlink" title="ç³»ç»ŸåŠŸèƒ½çš„ç¡®å®š"></a>ç³»ç»ŸåŠŸèƒ½çš„ç¡®å®š</h3><p>æ­£å¼å’Œéæ­£å¼çš„è®¿è°ˆ</p><h3 id="åˆ†æè¿‡ç¨‹"><a href="#åˆ†æè¿‡ç¨‹" class="headerlink" title="åˆ†æè¿‡ç¨‹"></a>åˆ†æè¿‡ç¨‹</h3><p>ç”¨ä¾‹-&gt;è§„çº¦ç”¨ä¾‹å¹¶ç”Ÿæˆæ–‡æ¡£-&gt;æ´»åŠ¨å›¾-&gt;æ–‡å­—åŠŸèƒ½æ€§éœ€æ±‚</p><h4 id="ä¸‰ç§åŠŸèƒ½æ€§éœ€æ±‚"><a href="#ä¸‰ç§åŠŸèƒ½æ€§éœ€æ±‚" class="headerlink" title="ä¸‰ç§åŠŸèƒ½æ€§éœ€æ±‚"></a>ä¸‰ç§åŠŸèƒ½æ€§éœ€æ±‚</h4><p>ç³»ç»ŸåŠŸèƒ½éœ€æ±‚ + äº¤äº’éœ€æ±‚ + å¤–éƒ¨æ¥å£éœ€æ±‚</p><h4 id="éœ€æ±‚è¯´æ˜ä¹¦"><a href="#éœ€æ±‚è¯´æ˜ä¹¦" class="headerlink" title="éœ€æ±‚è¯´æ˜ä¹¦"></a>éœ€æ±‚è¯´æ˜ä¹¦</h4><p>æ–‡æ¡£+æ¶‰ä¼—+ç›®æ ‡+åŠŸèƒ½ï¼ŒéåŠŸèƒ½+äº¤ä»˜ç‰©+éªŒæ”¶æ ‡å‡†+é™„ä»¶</p><h4 id="éœ€æ±‚è·Ÿè¸ª"><a href="#éœ€æ±‚è·Ÿè¸ª" class="headerlink" title="éœ€æ±‚è·Ÿè¸ª"></a>éœ€æ±‚è·Ÿè¸ª</h4><p>ä¸šåŠ¡ï¼Œéœ€æ±‚ï¼Œç±»æ¨¡å‹ ä¸‰è€…é€’å½’ç¡®å®šï¼Œäº’æœ‰å¯¹åº”</p><p>æ´»åŠ¨å›¾ï¼Œéœ€æ±‚æ–‡æ¡£ï¼Œç±»å›¾</p><p>æé«˜å®Œå¤‡æ€§ï¼ŒåŒæ—¶æ£€æŸ¥æ˜¯å¦æœ‰å†—ä½™ï¼ˆæœ‰æ²¡æœ‰ç¼ºçš„ï¼Œå¤šçš„ï¼‰</p><h2 id="è½¯ä»¶æ¶æ„"><a href="#è½¯ä»¶æ¶æ„" class="headerlink" title="è½¯ä»¶æ¶æ„"></a>è½¯ä»¶æ¶æ„</h2><h3 id="åŸºæœ¬å…ƒç´ "><a href="#åŸºæœ¬å…ƒç´ " class="headerlink" title="åŸºæœ¬å…ƒç´ "></a>åŸºæœ¬å…ƒç´ </h3><p>æ„ä»¶ + è¿æ¥ä»¶ + é…ç½®</p><h3 id="æ•°æ®æµé£æ ¼"><a href="#æ•°æ®æµé£æ ¼" class="headerlink" title="æ•°æ®æµé£æ ¼"></a>æ•°æ®æµé£æ ¼</h3><p><strong>ç®¡é“ä¸è¿‡æ»¤å™¨</strong>ï¼šä¿¡æ¯éšè—ï¼Œé«˜å†…èšä½è€¦åˆï¼Œå¯ä»¥çµæ´»ç»„åˆ</p><p><strong>å±‚æ¬¡ç³»ç»Ÿ</strong>ï¼šè®¡ç®—æœºç½‘ç»œ</p><p><strong>æ­£äº¤è½¯ä»¶æ¶æ„</strong>ï¼š</p><ul><li><p>å±‚ï¼šä¸€ç»„å…·æœ‰ç›¸åŒæŠ½è±¡çº§åˆ«çš„æ„ä»¶</p></li><li><p>çº¿ç´¢ï¼šç”¨ä¾‹å½¢æˆçš„è°ƒç”¨å…³ç³»</p></li><li><p>å¥½å¤„ï¼šæ¯ä¸ªéœ€æ±‚å˜åŠ¨ä»…å½±å“æŸä¸€æ¡çº¿ç´¢</p></li></ul><p><strong>å®¢æˆ·æœºæœåŠ¡å™¨æ¶æ„</strong>ï¼š</p><ul><li>ä¸€ä¸ªæœåŠ¡å™¨æœåŠ¡å¤šä¸ªå®¢æˆ·ç«¯</li><li>é€‚åº”å˜åŒ–ï¼Œçµæ´»</li><li>æ˜“äºå¯¹ç³»ç»Ÿè¿›è¡Œæ‰©å……å’Œç¼©å°</li><li>åŠŸèƒ½æ„å»ºéš”ç¦»</li></ul><p><strong>æµè§ˆå™¨/æœåŠ¡å™¨æ¶æ„</strong>ï¼šåŸºæœ¬åŒä¸Š+æŠ½å–clientçš„functionå½¢æˆçš„webæœåŠ¡å™¨</p><h3 id="ç‹¬ç«‹æ„å»ºé£æ ¼"><a href="#ç‹¬ç«‹æ„å»ºé£æ ¼" class="headerlink" title="ç‹¬ç«‹æ„å»ºé£æ ¼"></a>ç‹¬ç«‹æ„å»ºé£æ ¼</h3><h4 id="MVCæ¶æ„"><a href="#MVCæ¶æ„" class="headerlink" title="MVCæ¶æ„*"></a>MVCæ¶æ„*</h4><ul><li><p>Model: ä¼ä¸šæ•°æ®å’Œä¸šåŠ¡è§„åˆ™</p></li><li><p>View: ç”¨æˆ·çœ‹åˆ°å¹¶ä¸ä¹‹äº¤äº’çš„ç•Œé¢</p></li><li><p>Controller: æ ¹æ®è¾“å…¥è°ƒç”¨æ¨¡å‹å’Œè§†å›¾å»å®Œæˆç”¨æˆ·çš„éœ€æ±‚ï¼Œä¸è¾“å‡ºç»“æœï¼Œä¸åšä»»ä½•å¤„ç†</p></li></ul><h3 id="æ•°æ®ä¸­å¿ƒé£æ ¼-ä»“åº“ç³»ç»Ÿ"><a href="#æ•°æ®ä¸­å¿ƒé£æ ¼-ä»“åº“ç³»ç»Ÿ" class="headerlink" title="æ•°æ®ä¸­å¿ƒé£æ ¼ - ä»“åº“ç³»ç»Ÿ"></a>æ•°æ®ä¸­å¿ƒé£æ ¼ - ä»“åº“ç³»ç»Ÿ</h3><p>æ˜Ÿå‹ç»“æ„ï¼Œä¸­å¤®æ•°æ®åº“å’Œå‘¨è¾¹client</p><p>é»‘æ¿ç³»ç»Ÿï¼šä¸­å¤®æ•°æ®åº“å°†çŠ¶æ€é€šçŸ¥clientï¼Œç”±clientå†³å®šé€‰æ‹©</p><h2 id="ç±»çš„åˆ†æä¸è®¾è®¡"><a href="#ç±»çš„åˆ†æä¸è®¾è®¡" class="headerlink" title="ç±»çš„åˆ†æä¸è®¾è®¡"></a>ç±»çš„åˆ†æä¸è®¾è®¡</h2><p>è¿­ä»£é€çº§ç»†åŒ–</p><h3 id="ç±»çš„ç§ç±»"><a href="#ç±»çš„ç§ç±»" class="headerlink" title="ç±»çš„ç§ç±»"></a>ç±»çš„ç§ç±»</h3><ul><li>å®ä½“ç±»ï¼šå­˜å‚¨ï¼Œä¼ é€’æ•°æ®çš„ç±»ï¼Œåè¯</li><li>æ§åˆ¶ç±»ï¼šç®¡ç†ç±»ï¼Œä½“ç°æ‰§è¡Œé€»è¾‘ï¼ŒåŠ¨å®¾</li><li>è¾¹ç•Œç±»ï¼šå¤–éƒ¨ç”¨æˆ·äº¤äº’ï¼Œç•Œé¢ç±»ï¼Œæ•°æ®äº¤æ¢ç±»</li></ul><h4 id="é¢†åŸŸæ¨¡å‹"><a href="#é¢†åŸŸæ¨¡å‹" class="headerlink" title="é¢†åŸŸæ¨¡å‹"></a>é¢†åŸŸæ¨¡å‹</h4><p>åˆå§‹ç±»å›¾-å®ä½“ç±»</p><p><strong>å®ä½“ç±»</strong> <code>&lt;&lt;entity&gt;&gt;</code></p><ul><li>ç±»åï¼šæ„é€ æ€§</li><li>å˜é‡ï¼š<ul><li>å¯è§æ€§ (private, public ..) - (<code>-+_~</code>)</li><li>ä¾èµ–ï¼ˆè®¡ç®—ï¼‰å±æ€§ï¼Œ(<code>/</code>)</li><li>åå­—</li><li>ç±»å‹ï¼šUMLå®šä¹‰çš„ï¼Œint Stringâ€¦</li><li>ä¸‹åˆ’çº¿ï¼šè¡¨ç¤ºé™æ€</li></ul></li></ul><p>æ²¡æœ‰æ–¹æ³•</p><h4 id="ç±»çš„å…³ç³»"><a href="#ç±»çš„å…³ç³»" class="headerlink" title="ç±»çš„å…³ç³»*"></a>ç±»çš„å…³ç³»*</h4><ul><li>å…³è”å…³ç³»ï¼šé™æ€ï¼Œæ‹¥æœ‰ï¼Œé•¿æœŸæŒä¹…</li><li>å¯¼èˆªæ–¹å‘ï¼šç®­å¤´ï¼ŒåŒ…å«å…³ç³»</li><li>ä¾èµ–å…³ç³»ï¼šåŠ¨æ€ï¼Œä¸´æ—¶ - é¿å…åŒå‘ä¾èµ–</li><li>ä¾èµ– åŒ…å« å…³è”</li></ul><h4 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h4><ul><li>å¯¹è±¡åï¼šç±»çš„ç±»å‹</li><li>å®ä¾‹å˜é‡ = åˆå§‹å€¼</li><li>å¯¹è±¡åä¸ºç©ºä»£è¡¨åŒ¿åå¯¹è±¡ï¼Œç±»åä¸ºç©ºä»£è¡¨æœ‰ä¸Šä¸‹æ–‡</li></ul><h4 id="ç®¡ç†ç±»-amp-æ§åˆ¶ç±»"><a href="#ç®¡ç†ç±»-amp-æ§åˆ¶ç±»" class="headerlink" title="ç®¡ç†ç±» &amp; æ§åˆ¶ç±»"></a>ç®¡ç†ç±» &amp; æ§åˆ¶ç±»</h4><table><thead><tr><th></th><th>ç®¡ç†ç±»</th><th>æ§åˆ¶ç±»</th></tr></thead><tbody><tr><td></td><td>ä¸è€ƒè™‘getï¼Œsetæ–¹æ³•</td><td>éš”ç¦»è¾¹ç•Œä¸å®ä½“</td></tr><tr><td>å¯¹è±¡</td><td>å¯¹äºåŒç±»å¯¹è±¡çš„åè°ƒå’Œç®¡ç†</td><td>ä¸åŒç±»</td></tr><tr><td>å±‚</td><td>Domainå±‚</td><td>ä¸šåŠ¡æ§åˆ¶å±‚</td></tr><tr><td>ä½œç”¨</td><td>åˆ›å»ºå¯¹è±¡ï¼Œä»£ç†è®¿é—®å…¶ä»–å¯¹è±¡</td><td>ä¸€ä¸ªç”¨ä¾‹ä¸€ä¸ª</td></tr></tbody></table><h4 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h4><p>åˆ©ç”¨æŠ½è±¡ç±»éš”ç¦»å˜åŒ–</p><p>ç©ºä¸‰è§’ç®­å¤´è¡¨ç¤ºç»§æ‰¿</p><h4 id="æšä¸¾ç±»-lt-lt-enumeration-gt-gt"><a href="#æšä¸¾ç±»-lt-lt-enumeration-gt-gt" class="headerlink" title="æšä¸¾ç±» &lt;&lt;enumeration&gt;&gt;"></a>æšä¸¾ç±» <code>&lt;&lt;enumeration&gt;&gt;</code></h4><h4 id="ç•Œé¢è®¾è®¡"><a href="#ç•Œé¢è®¾è®¡" class="headerlink" title="ç•Œé¢è®¾è®¡"></a>ç•Œé¢è®¾è®¡</h4><p>å¯¹å®ä½“ï¼Œç”Ÿæˆ <code>ProjectMask</code> ä»£ç†ç±»</p><h4 id="CASEå·¥å…·"><a href="#CASEå·¥å…·" class="headerlink" title="CASEå·¥å…·"></a>CASEå·¥å…·</h4><p>è½¯ä»¶å¼€å‘ç¯å¢ƒï¼Œè®¡ç®—æœºè¾…åŠ©è½¯ä»¶å·¥ç¨‹</p><h2 id="ç±»çš„å…³ç³»-1"><a href="#ç±»çš„å…³ç³»-1" class="headerlink" title="ç±»çš„å…³ç³»"></a>ç±»çš„å…³ç³»</h2><h3 id="é›†åˆç±»å‹"><a href="#é›†åˆç±»å‹" class="headerlink" title="é›†åˆç±»å‹"></a>é›†åˆç±»å‹</h3><table><thead><tr><th>æ˜¯å¦è¦æ±‚é¡ºåº</th><th>æ˜¯å¦è¦æ±‚å”¯ä¸€æ€§</th><th></th></tr></thead><tbody><tr><td>no</td><td>yes</td><td>Set</td></tr><tr><td>no</td><td>no</td><td>Bag/Multiset</td></tr><tr><td>yes</td><td>yes</td><td>OrderedSet</td></tr><tr><td>yes</td><td>no</td><td>List/Sequence</td></tr></tbody></table><p>é€‚ç”¨æ¨¡æ¿ç±»è€Œéå…·ä½“ç±»</p><h4 id="èšåˆ-èšé›†"><a href="#èšåˆ-èšé›†" class="headerlink" title="èšåˆ - èšé›†"></a>èšåˆ - èšé›†</h4><p>éƒ¨åˆ†ä¸æ•´ä½“ï¼Œå…±äº«</p><h4 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h4><p>å­˜åœ¨ä¾èµ–æ€§ - åŒç”Ÿå…±æ­»</p><h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><p>è®¿é—®çš„ç¬æ—¶æ€§ - ç”¨å‚æ•°</p><h2 id="ç±»çš„è¯¦ç»†è®¾è®¡"><a href="#ç±»çš„è¯¦ç»†è®¾è®¡" class="headerlink" title="ç±»çš„è¯¦ç»†è®¾è®¡"></a>ç±»çš„è¯¦ç»†è®¾è®¡</h2><p>ç®—æ³•+æ•°æ®ç»“æ„+ç‰©ç†ç»“æ„</p><p>å…¶ä»–è®¾è®¡+è¯¦ç»†è®¾è®¡è¯´æ˜ä¹¦+è¯„å®¡</p><p>ä»€ä¹ˆæ˜¯ç»“æ„åŒ–çš„ç¨‹åº</p><h3 id="ç›’å›¾"><a href="#ç›’å›¾" class="headerlink" title="ç›’å›¾"></a>ç›’å›¾</h3><p>å›¾ä¾‹ï¼šä¸å…è®¸éšæ„è·³è½¬ - å‘é‡ŒåµŒå¥—</p><h3 id="PADå›¾"><a href="#PADå›¾" class="headerlink" title="PADå›¾"></a>PADå›¾</h3><p>é—®é¢˜åˆ†æå›¾ - å‘å³åµŒå¥—</p><h3 id="åˆ¤å®šè¡¨"><a href="#åˆ¤å®šè¡¨" class="headerlink" title="åˆ¤å®šè¡¨"></a>åˆ¤å®šè¡¨</h3><p>ä½¿ç”¨<code>â€”</code>æ¥è¡¨ ç¤ºå¯¹æ­¤æ¡ä»¶çš„ä¸å…³å¿ƒæˆ–ä¸é€‚ç”¨</p><p>åˆ¤å®šæ ‘ï¼šç»“ç‚¹-é€‰æ‹©ï¼Œå¶å­-ç»“æœ</p><h3 id="PDL"><a href="#PDL" class="headerlink" title="PDL"></a>PDL</h3><p>äººè¯ç‰ˆçš„Cè¯­è¨€</p><h3 id="OCL"><a href="#OCL" class="headerlink" title="OCL"></a>OCL</h3><h2 id="è®¾è®¡ä¼˜åŒ–"><a href="#è®¾è®¡ä¼˜åŒ–" class="headerlink" title="è®¾è®¡ä¼˜åŒ–"></a>è®¾è®¡ä¼˜åŒ–</h2><h3 id="smell"><a href="#smell" class="headerlink" title="smell"></a>smell</h3><p>åƒµåŒ–æ€§ï¼Œè„†å¼±æ€§ï¼Œé¡½å›ºæ€§ï¼Œç²˜æ»æ€§ï¼Œå¤æ‚ï¼Œé‡å¤ï¼Œæ™¦æ¶©</p><h4 id="é‡å†™"><a href="#é‡å†™" class="headerlink" title="é‡å†™"></a>é‡å†™</h4><ul><li>ä¸çˆ¶ç±»æ–¹æ³•æœ‰ç›¸ä¼¼çš„è¡Œä¸ºï¼Œç»†èŠ‚è°ƒæ•´</li><li>ç›¸åŒæ¡ä»¶å·¥ä½œï¼Œå­ç±»ä¸åº”å…·æœ‰æ¯”å…¶çˆ¶ç±»æ›´ä¸¥æ ¼çš„æ¡ä»¶é™åˆ¶ - <strong>Liskov æ›¿æ¢åŸåˆ™</strong></li><li>é‡å†™çš„æ–¹æ³•æœ€é«˜ä¸èƒ½è¶…å‡ºçˆ¶ç±»æ–¹æ³•çš„çŠ¶æ€ã€‚</li></ul><p>å¾ªç¯ä¾èµ–ï¼šæå–æ¥å£</p><p>ç‹æ˜µå…³ç³»ï¼šä¸¤ä¸ªç±»è¿‡åˆ†äº²å¯†ï¼Œé«˜è€¦åˆ</p><p>æ¥å£éš”ç¦»åŸåˆ™ï¼šæ¥å£çš„ç¨³å®šï¼Œé€‚åº”å˜åŒ–ï¼ŒåŒä¸€ä¸ªç±»æå–ä¸åŒçš„æ¥å£</p><p>ä¾èµ–å€’ç½®åŸåˆ™ï¼šä¾èµ–äºæŠ½è±¡</p><p>å¼€æ”¾å°é—­åŸåˆ™ï¼šæ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹å°é—­</p><p>å•ä¸€èŒè´£åŸåˆ™ï¼šå•ä¸€åŠŸèƒ½</p><p>åˆæˆ/èšåˆå¤ç”¨åŸåˆ™ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆå½¢å¼çš„å§”æ‰˜é‡ç”¨ï¼Œå°½é‡ä¸ä½¿ç”¨ç»§æ‰¿é‡ç”¨</p><blockquote><p>å­ç±»æ˜¯çˆ¶ç±»çš„ç‰¹æ®Šç±»å‹</p></blockquote><h3 id="æ¨¡å¼"><a href="#æ¨¡å¼" class="headerlink" title="æ¨¡å¼"></a>æ¨¡å¼</h3><ul><li>æ¶æ„æ¨¡å¼ï¼šMVCï¼Œå±‚æ¬¡ç­‰</li><li>è®¾è®¡æ¨¡å¼ï¼šæŠ½è±¡å·¥ç¨‹ä¹‹ç±»çš„</li><li>å®ç°æ¨¡å¼ï¼šå…·ä½“åˆ°å†™ä»£ç ï¼Œç±»åï¼Œå˜é‡åï¼Œå‡½æ•°å</li></ul><table><thead><tr><th></th><th>åˆ›å»ºæ¨¡å¼</th><th>ç»“æ„æ¨¡å¼</th><th>è¡Œä¸ºæ¨¡å¼</th></tr></thead><tbody><tr><td>ç±»</td><td>æŠ½è±¡å·¥å‚</td><td>é€‚é…å™¨</td><td>è§‚å¯Ÿè€…æ¨¡å¼</td></tr><tr><td>ç±»</td><td>å•ä¾‹</td><td>æ¡¥ - è£…é¥°</td><td>ç­–ç•¥æ¨¡å¼</td></tr><tr><td>ç±»</td><td></td><td>ä»£ç†</td><td>çŠ¶æ€</td></tr><tr><td>ç±»</td><td></td><td>é—¨é¢</td><td></td></tr></tbody></table><h4 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h4><p>å·¥å‚è¡¨ç¤ºä¸€ç»„äº§å“çš„æ‰“åŒ…ï¼Œä¸åŒçš„å·¥å‚å¯¹åº”ä¸åŒçš„ç»„åˆ</p><p>æŠ½è±¡å·¥å‚æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨äºç”Ÿæˆä¸€ç»„å¯¹è±¡ï¼Œå®é™…å¯¹è±¡æ ¹æ®ç±»åˆ«åˆæœ‰è‡ªå·±çš„æ¥å£</p><p>ä½è€¦åˆï¼Œä¸”æ·»åŠ æ–°çš„æ›´å®¹æ˜“</p><h4 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h4><p>ç®¡ç†ç±»æˆ–æ§åˆ¶ç±»ç³»ç»Ÿä¸­åªéœ€è¦ä¸€ä¸ªå®ä¾‹ï¼Œè¯¥å®ä¾‹åœ¨ç¨‹åºä¸­è¢«åˆ›å»º</p><p>è¦æ±‚ç±»çš„æ„é€ æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œæœ‰å…¬æœ‰çš„æ–¹æ³•è·å–è¯¥ç±»çš„å®ä¾‹ï¼Œå®ä¾‹å˜é‡ä¸ºç§æœ‰æˆ–å—ä¿æŠ¤çš„ã€‚</p><h4 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h4><p>åˆ©ç”¨é€‚é…å™¨è¿›è¡Œæ¥å£çš„è½¬æ¢</p><h4 id="æ¡¥æ¨¡å¼"><a href="#æ¡¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¨¡å¼"></a>æ¡¥æ¨¡å¼</h4><p>å…ˆå°†ä¸åŒçš„å˜åŒ–ç»´åº¦ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰åˆ†ç¦»ï¼Œæ¯ä¸ªç»´åº¦éƒ½æœ‰ç‹¬ç«‹çš„æŠ½è±¡å’Œç»§æ‰¿ç»“æ„ï¼Œå»ºç«‹æŠ½è±¡è€¦åˆ</p><h4 id="è£…é¥°æ¨¡å¼"><a href="#è£…é¥°æ¨¡å¼" class="headerlink" title="è£…é¥°æ¨¡å¼"></a>è£…é¥°æ¨¡å¼</h4><p>å¯¹äºè´Ÿæ•°åŠŸèƒ½ï¼Œè‹¥å°†å…¶å½’å…¥ä¸åŒçš„å˜åŒ–ç»´åº¦å¤ªå¤šäº†ï¼Œå½’å…¥è£…é¥°å™¨</p><p>å°† Bridge ä¸­çš„æŠ½è±¡å’Œå®ç°åˆäºŒä¸ºä¸€äº†ï¼Œæ˜¯å…¶ç‰¹æ®Šå½¢å¼</p><h4 id="é—¨é¢æ¨¡å¼"><a href="#é—¨é¢æ¨¡å¼" class="headerlink" title="é—¨é¢æ¨¡å¼"></a>é—¨é¢æ¨¡å¼</h4><p>å¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„é—¨é¢å¯¹è±¡ï¼Œä¸”å•ä¾‹</p><h4 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h4><p>ä¸­ä»‹ï¼Œè´Ÿè´£èµ„æºçš„ä¸­é—´å¤„ç†ï¼ŒèŠ‚çœä¸»ä½“çš„æ—¶é—´</p><p>ç”¨æ¥å¯¹æœ‰ä»·å€¼ç¨€ç¼ºèµ„æºçš„ç®¡ç†ï¼Œæ¯”å¦‚æ•°æ®åº“çš„è¿æ¥ç­‰ï¼Œæé«˜èµ„æºçš„åˆ©ç”¨ç‡æˆ–ç³»ç»Ÿæ€§èƒ½</p><h4 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h4><p>MVC é€‚ç”¨äº†è§‚å¯Ÿè€…</p><p>å½“ä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€ä¸Šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±</p><h4 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h4><p>å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥å£çš„ç‹¬ç«‹çš„ç±»ä¸­</p><p>çµæ´»å¯ä»¥ç›¸äº’æ›¿æ¢</p><h4 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h4><p>ä½¿ç”¨ä¸€ä¸ªå…·æœ‰å¤šä¸ªå­ç±»çš„ç±»ï¼Œæå‰åˆ›å»ºæ‰€æœ‰å¯¹åº”çš„å­ç±»ï¼ŒçŠ¶æ€å˜åŒ–æ—¶æ¢ç±»</p><h2 id="è½¯ä»¶æµ‹è¯•"><a href="#è½¯ä»¶æµ‹è¯•" class="headerlink" title="è½¯ä»¶æµ‹è¯•"></a>è½¯ä»¶æµ‹è¯•</h2><p>æµ‹è¯•çš„é€šè¿‡å¹¶ä¸èƒ½ç”¨æ¥è¯æ˜æ•´ä¸ªç³»ç»Ÿæ˜¯æ­£ç¡®çš„</p><h3 id="æµ‹è¯•Væ¨¡å‹-æµ‹è¯•"><a href="#æµ‹è¯•Væ¨¡å‹-æµ‹è¯•" class="headerlink" title="æµ‹è¯•Væ¨¡å‹ + æµ‹è¯•*"></a>æµ‹è¯•Væ¨¡å‹ + æµ‹è¯•*</h3><table><thead><tr><th>æµ‹è¯•åç§°</th><th>å¼€å‘é˜¶æ®µ</th><th>æµ‹è¯•å¯¹è±¡</th><th>æµ‹è¯•æ–¹æ³•</th></tr></thead><tbody><tr><td>å•å…ƒæµ‹è¯•</td><td>å®ç°</td><td>ç±»æµ‹è¯•</td><td>ç™½ç›’æµ‹è¯•</td></tr><tr><td>é›†æˆæµ‹è¯•</td><td>ç³»ç»Ÿè®¾è®¡</td><td>åŒ…æˆ–ç³»ç»Ÿæµ‹è¯•-äº¤äº’</td><td>ç°ç›’æµ‹è¯•</td></tr><tr><td>ç³»ç»Ÿæµ‹è¯•</td><td>ç³»ç»Ÿéœ€æ±‚</td><td>æ„ä»¶å’Œæ¥å£æµ‹è¯•</td><td>é»‘ç›’æµ‹è¯•</td></tr><tr><td>éªŒæ”¶æµ‹è¯•</td><td>å®¢æˆ·éœ€æ±‚</td><td>ç°åœºå¤ç°</td><td>é»‘ç›’æµ‹è¯•</td></tr></tbody></table><p>ä¸ºä»€ä¹ˆè¦æ—©ä¿®æ­£</p><ul><li>æ¶‰åŠçš„èŒƒå›´è¶Šæ¥è¶Šå¹¿æ³›</li><li>æ›¾ç»ä»˜å‡ºçš„æˆæœ¬è¶Šæ¥è¶Šé«˜</li></ul><p>çœ‹ä¸€çœ¼ P9 å·¦ä¸‹å›¾</p><h5 id="éåŠŸèƒ½æµ‹è¯•"><a href="#éåŠŸèƒ½æµ‹è¯•" class="headerlink" title="éåŠŸèƒ½æµ‹è¯•"></a>éåŠŸèƒ½æµ‹è¯•</h5><p>å³°å€¼ï¼Œå°–å³°ï¼Œå‹åŠ›ï¼Œæµ¸æ³¡</p><h4 id="è½¯ä»¶åº¦é‡"><a href="#è½¯ä»¶åº¦é‡" class="headerlink" title="è½¯ä»¶åº¦é‡"></a>è½¯ä»¶åº¦é‡</h4><h5 id="McCabe-æ§åˆ¶æµå›¾"><a href="#McCabe-æ§åˆ¶æµå›¾" class="headerlink" title="McCabe + æ§åˆ¶æµå›¾"></a>McCabe + æ§åˆ¶æµå›¾</h5><p>è¾¹æ•° - ç‚¹æ•° + 2 = åˆ†æ”¯ç»“ç‚¹+1</p><h5 id="LCOM"><a href="#LCOM" class="headerlink" title="LCOM"></a>LCOM</h5><p><img src="https://s2.loli.net/2021/12/20/3BY8Z46qzw5btSX.png" alt=""></p><p>mä¸ºæ–¹æ³•æ•°ï¼Œaä¸ºæ‰€å«çš„å®ä¾‹å˜é‡æ•°ï¼Œä¸ºè®¿é—®æ¯ä¸ªå®ä¾‹å˜é‡çš„æ–¹æ³•æ•°ã€‚</p><h4 id="ç­‰ä»·ç±»æµ‹è¯•-é»‘ç›’"><a href="#ç­‰ä»·ç±»æµ‹è¯•-é»‘ç›’" class="headerlink" title="ç­‰ä»·ç±»æµ‹è¯• - é»‘ç›’"></a>ç­‰ä»·ç±»æµ‹è¯• - é»‘ç›’</h4><ul><li>æ•°å€¼ï¼šä¸€èˆ¬ï¼Œä¸€ä¸ªæœ‰æ•ˆï¼Œä¸¤ä¸ªæ— æ•ˆ</li><li>å…¶ä»–ï¼šä¸€ä¸ªæœ‰æ•ˆï¼Œä¸€ä¸ªæ— æ•ˆ</li><li>ä¼ ç»Ÿ + å¼ºç­‰ä»·ç±»æ–¹æ³•</li><li>è¾¹ç•Œå€¼åˆ†æï¼šå¯¹æ•°å€¼è¾¹ç•Œåˆ›å»ºæœ‰æ•ˆæˆ–æ— æ•ˆç­‰ä»·ç±»</li></ul><h4 id="æ§åˆ¶æµçš„è¦†ç›–æµ‹è¯•-ç™½ç›’"><a href="#æ§åˆ¶æµçš„è¦†ç›–æµ‹è¯•-ç™½ç›’" class="headerlink" title="æ§åˆ¶æµçš„è¦†ç›–æµ‹è¯• - ç™½ç›’"></a>æ§åˆ¶æµçš„è¦†ç›–æµ‹è¯• - ç™½ç›’</h4><ul><li>è¯­å¥è¦†ç›– - ç»“ç‚¹</li><li>åˆ†æ”¯è¦†ç›– - è¾¹</li><li>æ¡ä»¶è¦†ç›– - åŸå­è°“è¯çœŸå‡</li></ul><p>æ»¡è¶³åˆ†æ”¯è¦†ç›–è¦æ±‚ä¸€å®šä¼šæ»¡è¶³è¯­å¥è¦†ç›–è¦æ±‚</p><ul><li><p>åˆ†æ”¯è¦†ç›–ä¸èƒ½è¦†ç›–æ¡ä»¶ï¼Œå› ä¸ºæ¡ä»¶æ˜¯åŸå­è°“è¯åˆ¤æ–­ï¼Œä½†å¯¹äºç»„åˆæ¡ä»¶å¯èƒ½ä¼šæœ‰è¯¸å¦‚çŸ­è·¯çš„æƒ…å†µ</p></li><li><p>æ¡ä»¶ä¸èƒ½è¦†ç›–åˆ†æ”¯ï¼Œå› ä¸ºæ˜¯åŸå­è°“è¯ï¼Œå¯èƒ½æœ‰æ²¡è¦†ç›–åˆ°çš„æƒ…å†µ</p></li></ul><p>åˆ†æ”¯ï¼Œæ¡ä»¶å¹¶ä¸å®Œå…¨è¦†ç›–ï¼Œç»¼åˆä¸€ä¸‹</p><ul><li><p>å¤šæ¡ä»¶ç»„åˆè¦†ç›– - åŸå­è°“è¯åŠå…¶ç»„åˆè¦†ç›–</p></li><li><p>åŸºæœ¬è·¯å¾„æµ‹è¯• - ç‹¬ç«‹è·¯å¾„ ï¼ˆ ç‹¬ç«‹è·¯å¾„è¦æ±‚åœ¨è·¯å¾„ä¸­è‡³å°‘å«æœ‰ä¸€æ¡æœªæ›¾ä½¿ç”¨è¿‡çš„è¾¹ï¼‰</p><ul><li><code>&lt;= V(G)</code></li></ul></li></ul><h4 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h4><h4 id="Junit"><a href="#Junit" class="headerlink" title="Junit"></a>Junit</h4><p>å¯æµ‹è¯•æ€§ - å½¼æ­¤ä¾èµ–è€Œéœ€è¦æ¨¡æ‹Ÿç¨‹åºæˆ–æ¡©</p><p>è®¾è®¡ç®€å•æ–¹æ³•</p><p>é¿å…ç§æœ‰æ–¹æ³•</p><p>ä¼˜å…ˆä½¿ç”¨é€šç”¨æ–¹æ³•</p><p>ç»„åˆä¼˜äºç»§æ‰¿</p><p>é¿å…éšè—çš„ä¾èµ–å…³ç³»ä¸å…¨å±€çŠ¶æ€</p><h4 id="äººå·¥æµ‹è¯•"><a href="#äººå·¥æµ‹è¯•" class="headerlink" title="äººå·¥æµ‹è¯•"></a>äººå·¥æµ‹è¯•</h4><p>å®¡æŸ¥ - è¯„å®¡ - èµ°æŸ¥</p><h2 id="CMMI"><a href="#CMMI" class="headerlink" title="CMMI"></a>CMMI</h2><p>ç»Ÿä¸€çš„ï¼Œæ˜ç¡®å®šä¹‰çš„ç»„ç»‡çº§è½¯ä»¶å·¥ç¨‹</p><p>åˆå§‹çº§ - å·²ç®¡ç† - å·²å®šä¹‰ - å·²é‡åŒ–ç®¡ç† - ä¼˜åŒ–</p><h2 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h2><h3 id="ç”¨ä¾‹å›¾"><a href="#ç”¨ä¾‹å›¾" class="headerlink" title="ç”¨ä¾‹å›¾"></a>ç”¨ä¾‹å›¾</h3><p>æ³¨æ„åŒä¸€ä¸ªå›¾ä¸­çš„ç”¨ä¾‹åœ¨åŒä¸€ä¸ªæŠ½è±¡çº§åˆ«</p><h4 id="è§’è‰²-Actor"><a href="#è§’è‰²-Actor" class="headerlink" title="è§’è‰² Actor"></a>è§’è‰² Actor</h4><p>äººæˆ–è½¯ä»¶ç³»ç»Ÿï¼Œä½¿ç”¨ç³»ç»Ÿï¼Œä¸ç³»ç»Ÿæœ‰å…³ç³»</p><h4 id="å¯»æ‰¾ç”¨ä¾‹"><a href="#å¯»æ‰¾ç”¨ä¾‹" class="headerlink" title="å¯»æ‰¾ç”¨ä¾‹"></a>å¯»æ‰¾ç”¨ä¾‹</h4><h4 id="åŒ…å«å…³ç³»-lt-lt-include-gt-gt"><a href="#åŒ…å«å…³ç³»-lt-lt-include-gt-gt" class="headerlink" title="åŒ…å«å…³ç³» &lt;&lt;include&gt;&gt;"></a>åŒ…å«å…³ç³» <code>&lt;&lt;include&gt;&gt;</code></h4><p>ä¸€äº›é€šç”¨ï¼Œå…±åŒåŸºç¡€è¿‡ç¨‹çš„åŠŸèƒ½ï¼Œé¿å…é‡å¤å®ç° - éé€»è¾‘åˆ†è§£</p><p>å…³é”®è¯ï¼šä¾èµ–ï¼ŒåŒ…å«</p><h4 id="æ‰©å±•å…³ç³»-lt-lt-extend-gt-gt"><a href="#æ‰©å±•å…³ç³»-lt-lt-extend-gt-gt" class="headerlink" title="æ‰©å±•å…³ç³» &lt;&lt;extend&gt;&gt;"></a>æ‰©å±•å…³ç³» <code>&lt;&lt;extend&gt;&gt;</code></h4><p>ç‰¹æ®Šæƒ…å†µï¼Œéœ€è¦æœ‰æ¡ä»¶</p><p>å…³é”®è¯ï¼šé”™è¯¯ï¼Œç‰¹æ®Šæƒ…å†µ</p><h3 id="æ´»åŠ¨å›¾"><a href="#æ´»åŠ¨å›¾" class="headerlink" title="æ´»åŠ¨å›¾"></a>æ´»åŠ¨å›¾</h3><p>è·¨ç”¨ä¾‹</p><h4 id="å›¾ç¤º"><a href="#å›¾ç¤º" class="headerlink" title="å›¾ç¤º"></a>å›¾ç¤º</h4><ul><li><strong>å¼€å§‹ç‚¹</strong>ï¼šå®å¿ƒåœ†ç‚¹</li><li><strong>ç»“æŸç‚¹</strong>ï¼šå®å¿ƒåŠ ä¸€åœˆ</li><li><strong>åŠ¨ä½œ</strong>ï¼šåœ†è§’çŸ©å½¢</li><li><strong>æ¡ä»¶</strong>ï¼šè±å½¢ - å¯çœç•¥</li><li><strong>åˆ†æ”¯ï¼Œæ±‡èš</strong>ï¼šç²—æ¨ªçº¿ï¼Œ{and}ï¼Œ{or}</li><li><strong>å¯¹è±¡</strong>ï¼šç›´è§’çŸ©å½¢</li><li><strong>é›†åˆ</strong>ï¼šå¤šä¸ªåŠ¨ä½œï¼ˆä¸‰å‰æˆŸï¼‰</li></ul><p>å¦‚æœåŠ¨ä½œå…·æœ‰å¤šä¸ªæ±‡èšçš„ç®­å¤´ï¼Œéœ€è¦ç­‰å¾…æ‰€æœ‰åˆ†æ”¯éƒ½å®Œæˆ</p><h4 id="æ³³é“"><a href="#æ³³é“" class="headerlink" title="æ³³é“"></a>æ³³é“</h4><p>æŒ‰è§’è‰²åˆ’åˆ†</p><h4 id="åŸºæœ¬äº‹ä»¶æµå’Œå¤‡é€‰"><a href="#åŸºæœ¬äº‹ä»¶æµå’Œå¤‡é€‰" class="headerlink" title="åŸºæœ¬äº‹ä»¶æµå’Œå¤‡é€‰"></a>åŸºæœ¬äº‹ä»¶æµå’Œå¤‡é€‰</h4><p>åˆ©ç”¨ä¸­æ‹¬å·<code>[]</code>å›´ç»•å­æ´»åŠ¨æˆ–è€…è¿›å…¥å¤‡é€‰äº‹ä»¶æµçš„æ¡ä»¶ï¼Œå¯ä»¥å¦ç”¨æ´»åŠ¨å›¾æè¿°</p><h3 id="æ•°æ®æµå›¾"><a href="#æ•°æ®æµå›¾" class="headerlink" title="æ•°æ®æµå›¾"></a>æ•°æ®æµå›¾</h3><h4 id="åŸºæœ¬ç¬¦å·"><a href="#åŸºæœ¬ç¬¦å·" class="headerlink" title="åŸºæœ¬ç¬¦å·"></a>åŸºæœ¬ç¬¦å·</h4><p>å®ä½“ï¼Œå¤„ç†ï¼Œå­˜å‚¨ï¼Œæµ</p><h4 id="ç”»æ³•"><a href="#ç”»æ³•" class="headerlink" title="ç”»æ³•"></a>ç”»æ³•</h4><p>çœ‹è¯¾ä»¶</p><h3 id="åŒ…å›¾"><a href="#åŒ…å›¾" class="headerlink" title="åŒ…å›¾"></a>åŒ…å›¾</h3><p>å¤§åŒ…åµŒå¥—å°åŒ…ï¼Œå°åŒ…åµŒå¥—ç±»</p><p>âŠ•ï¼šåµŒå¥—å…³ç³»</p><p>è™šçº¿ï¼šå±‚é—´çš„ä½¿ç”¨(ä¾èµ–)å…³ç³»</p><p>å®çº¿ï¼šåŒ…é—´çš„ä½¿ç”¨(ä¾èµ–)å…³ç³»</p><p>ç©ºå¿ƒä¸‰è§’ï¼šç»§æ‰¿</p><p>é¿å…å¾ªç¯ä¾èµ–</p><h3 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h3><h4 id="é¢†åŸŸæ¨¡å‹-1"><a href="#é¢†åŸŸæ¨¡å‹-1" class="headerlink" title="é¢†åŸŸæ¨¡å‹"></a>é¢†åŸŸæ¨¡å‹</h4><h5 id="å®ä½“ç±»-lt-lt-entity-gt-gt"><a href="#å®ä½“ç±»-lt-lt-entity-gt-gt" class="headerlink" title="å®ä½“ç±» &lt;&lt;entity&gt;&gt;"></a>å®ä½“ç±» <code>&lt;&lt;entity&gt;&gt;</code></h5><ul><li>ç±»åï¼šæ„é€ æ€§</li><li>å˜é‡ï¼š<ul><li>å¯è§æ€§ (private, public ..) - (<code>-+_~</code>)</li><li>ä¾èµ–ï¼ˆè®¡ç®—ï¼‰å±æ€§ï¼Œ(<code>/</code>)</li><li>åå­—ï¼š</li><li>ç±»å‹ï¼šUMLå®šä¹‰çš„ï¼Œint Stringâ€¦</li><li>ä¸‹åˆ’çº¿ï¼šè¡¨ç¤ºé™æ€</li></ul></li><li>æ–¹æ³•ï¼š<ul><li>åŒä¸Š</li><li>å‚æ•°ä¸‰ç§ç±»å‹ï¼šin, out, inout</li></ul></li></ul><p>æ²¡æœ‰æ–¹æ³•</p><h4 id="å…³è”ç±»"><a href="#å…³è”ç±»" class="headerlink" title="å…³è”ç±»"></a>å…³è”ç±»</h4><p>æè¿°ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„è”ç³»</p><h3 id="é¡ºåºå›¾"><a href="#é¡ºåºå›¾" class="headerlink" title="é¡ºåºå›¾"></a>é¡ºåºå›¾</h3><p>è¡¨ç¤ºä¸€ä¸ªç”¨ä¾‹ï¼ŒåŒæ­¥è°ƒç”¨çš„æ–¹å¼ï¼ˆé˜»å¡ï¼‰</p><ul><li>æ§åˆ¶ç„¦ç‚¹ï¼šé•¿æ–¹å½¢</li><li>ç”Ÿå‘½çº¿ï¼šç«–è™šçº¿</li><li>åŒæ­¥æ¶ˆæ¯ï¼šå®å¿ƒä¸‰è§’ç®­å¤´ï¼ˆå·¦å³éƒ½å¯ä»¥ï¼‰</li><li>è¿”å›æ¶ˆæ¯ï¼šè™šçº¿å·¦ç®­å¤´</li><li>å¼‚æ­¥æ¶ˆæ¯ï¼šåˆ›å»ºå¯¹è±¡ï¼Œè™šçº¿å³ç®­å¤´</li></ul><p>ç»“æ„ï¼š</p><ul><li>æ–¹æ‹¬å· condition</li><li>å¯é€‰ï¼šopt - æœ‰æ¡ä»¶æ‰§è¡Œçš„åŠ¨ä½œï¼Œä¸æ»¡è¶³æ¡ä»¶å°±ä¸æ‰§è¡Œ</li><li>å¤šåˆ†æ”¯ alt - ä¸åŒçš„æ¡ä»¶æ‰§è¡Œä¸åŒ</li><li>å¾ªç¯ loop (start,end,condition)</li></ul><h3 id="é€šä¿¡å›¾"><a href="#é€šä¿¡å›¾" class="headerlink" title="é€šä¿¡å›¾"></a>é€šä¿¡å›¾</h3><p>å¯åµŒå¥—ï¼Œæˆ–ç”¨ç¼–å· ç¼–å·è¡¨ç¤ºåµŒå¥—çº§åˆ«</p><p>å…¶ä»–ä¸é¡ºåºå›¾ç±»ä¼¼</p><h3 id="çŠ¶æ€å›¾"><a href="#çŠ¶æ€å›¾" class="headerlink" title="çŠ¶æ€å›¾"></a>çŠ¶æ€å›¾</h3><p>å”¯ä¸€çš„å¼€å§‹çŠ¶æ€ï¼Œå¯ä»¥æœ‰å¤šä¸ªç»“æŸçŠ¶æ€ï¼Œé’ˆå¯¹ç¡®å®šæ€§è¡Œä¸º</p><p>è½¬å°æ¡†ä¸­çš„ä¸‰ä¸ªçŠ¶æ€ï¼šEntry - Do - Exit</p><h4 id="çŠ¶æ€è½¬æ¢-è¿‡æ¸¡"><a href="#çŠ¶æ€è½¬æ¢-è¿‡æ¸¡" class="headerlink" title="çŠ¶æ€è½¬æ¢ - è¿‡æ¸¡"></a>çŠ¶æ€è½¬æ¢ - è¿‡æ¸¡</h4><p>äº‹ä»¶+[æ¡ä»¶]+åŠ¨ä½œ</p><p>åœ¨äº‹ä»¶è¢«è§¦å‘å¹¶ä¸”æ»¡è¶³æŸä¸ªç‰¹å®šæ¡ä»¶çš„æƒ…å†µä¸‹æ‰ä¼šè¿›è¡Œ</p><p>åŠ¨ä½œï¼šentry æ‰§è¡Œå‰ï¼Œæœªè¿›å…¥çŠ¶æ€æ—¶åšçš„åŠ¨ä½œ</p><p>å±‚æ¬¡åŒ–ç»„ç»‡ï¼šæ¡†èµ·æ¥</p><p>åˆ†è§£ï¼šåˆ†è§£ä¸ºäº’ä¸ä¾èµ–çš„å­çŠ¶æ€ - å­çŠ¶æ€ç¦»å¼€</p><p>å¹¶è¡Œï¼šæœ‰ä¸¤ä¸ªè¾“å…¥ï¼Œåˆ™éƒ½å®Œæˆæ‰ä¼šè¢«è§¦å‘</p><h2 id="ä½“ç³»ç»“æ„é£æ ¼"><a href="#ä½“ç³»ç»“æ„é£æ ¼" class="headerlink" title="ä½“ç³»ç»“æ„é£æ ¼"></a>ä½“ç³»ç»“æ„é£æ ¼</h2><h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p>ä»ä½åˆ°é«˜æ’åº</p><p>å†…èšç¨‹åº¦ï¼šå†…éƒ¨å„ä¸ªå…ƒç´ å½¼æ­¤ç»“åˆçš„ç´§å¯†ç¨‹åº¦ - è¶Šé«˜ï¼Œæ¨¡å—ç‹¬ç«‹æ€§è¶Šå¼º</p><ul><li>å¶ç„¶å†…èš</li><li>é€»è¾‘å†…èš</li><li>æ—¶é—´å†…èš</li><li>é€šä¿¡å†…èš</li><li>é¡ºåºå†…èš</li><li>åŠŸèƒ½å†…èš</li></ul><p>è€¦åˆç¨‹åº¦ï¼šæ¨¡å—ä¹‹é—´äº’ç›¸è¿æ¥çš„ç´§å¯†ç¨‹åº¦ - è¶Šä½ï¼Œæ¨¡å—ç‹¬ç«‹æ€§è¶Šå¼º</p><p>éç›´æ¥ &lt; æ•°æ® &lt; æ ‡è®° &lt; æ§åˆ¶ &lt; å¤–éƒ¨ &lt; å…¬å…± &lt; å†…å®¹</p><h3 id="4-1-è§†å›¾æ¨¡å‹"><a href="#4-1-è§†å›¾æ¨¡å‹" class="headerlink" title="4+1 è§†å›¾æ¨¡å‹"></a>4+1 è§†å›¾æ¨¡å‹</h3><p>ç”¨ä¾‹åœ¨ä¸­é—´ï¼Œå››å‘¨æ˜¯é€»è¾‘è§†å›¾ï¼ˆåŠŸèƒ½éœ€æ±‚ï¼‰ï¼Œå¼€å‘è¯•å›¾ï¼ˆè½¯ä»¶æ¨¡å—ï¼‰ï¼Œè¿›ç¨‹è§†å›¾ï¼ˆå¹¶å‘ï¼‰ï¼Œç‰©ç†è§†å›¾ï¼ˆç¡¬ä»¶ï¼‰</p>          </div>]]></content>
    
    <summary type="html">
    
      Copyright (c) Dingsoul&lt;br&gt;Link: https://dingiso.github.io/2021/03/11/è½¯ä»¶å·¥ç¨‹å¤ä¹ /
    
    </summary>
    
    
    
      <category term="NOTE" scheme="https://augists.top/tags/NOTE/"/>
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>Unix Network Programming Review</title>
    <link href="https://augists.top/NOTES/COURSES/Advanced_C/Unix-Network-Programming-Review/"/>
    <id>https://augists.top/NOTES/COURSES/Advanced_C/Unix-Network-Programming-Review/</id>
    <published>2021-12-16T07:52:12.000Z</published>
    <updated>2021-12-26T16:07:58.299Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>å¤§å°ç«¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">union</span> un</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">short</span> a;</span><br><span class="line">    <span class="keyword">char</span> b[<span class="keyword">sizeof</span>(<span class="keyword">short</span>)];</span><br><span class="line">  &#125;u;</span><br><span class="line"></span><br><span class="line">  u.a = <span class="number">0x0102</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(u.b[<span class="number">0</span>] == <span class="number">1</span> &amp;&amp; u.b[<span class="number">1</span>] == <span class="number">2</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;big endian&quot;</span>);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(u.b[<span class="number">0</span>] == <span class="number">2</span> &amp;&amp; u.b[<span class="number">1</span>] == <span class="number">1</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;small endian&quot;</span>);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;unknown&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><code>intro/daytimetcpcli.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;unp.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sockfd, n;</span><br><span class="line">  <span class="keyword">char</span> recvline[MAXLINE + <span class="number">1</span>];</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">servaddr</span>;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    err_quit(<span class="string">&quot;usage: a.out &lt;IPaddress&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ( (sockfd = socket(AF_INET, SOCK_STREAM, <span class="number">0</span>)) &lt; <span class="number">0</span>)</span><br><span class="line">    err_sys(<span class="string">&quot;socket error&quot;</span>);</span><br><span class="line"></span><br><span class="line">  bzero(&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">  servaddr.sin_family = AF_INET;</span><br><span class="line">  servaddr.sin_port = htons(<span class="number">13</span>);</span><br><span class="line">  <span class="keyword">if</span> (inet_pton(AF_INET, argv[<span class="number">1</span>], &amp;servaddr.sin_addr) &lt;= <span class="number">0</span>)</span><br><span class="line">    err_quit(<span class="string">&quot;inet_pton error for %s&quot;</span>, argv[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (connect(sockfd, (SA *) &amp;servaddr, <span class="keyword">sizeof</span>(servaddr)) &lt; <span class="number">0</span>)</span><br><span class="line">    err_sys(<span class="string">&quot;connect error&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> ( (n = read(sockfd, recvline, MAXLINE)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    recvline[n] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fputs</span>(recvline, <span class="built_in">stdout</span>) == EOF)</span><br><span class="line">      err_sys(<span class="string">&quot;fputs error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">0</span>)</span><br><span class="line">    err_sys(<span class="string">&quot;read error&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>intro/daytimetcpsrv.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;unp.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> listenfd, connfd;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">servaddr</span>;</span></span><br><span class="line">  <span class="keyword">char</span> buff[MAXLINE];</span><br><span class="line">  <span class="keyword">time_t</span> ticks;</span><br><span class="line"></span><br><span class="line">  listenfd = Socket(AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  bzeros(&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">  servaddr.sin_family = AF_INET;</span><br><span class="line">  servaddr.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line">  servaddr.sin_port = htons(<span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">  Bind(listenfd, (SA *) &amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line"></span><br><span class="line">  Listen(listenfd, LISTENQ);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> ( ; ; ) &#123;</span><br><span class="line">    connfd = Accept(listenfd, (SA *) <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    ticks = time(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">snprintf</span>(buff, <span class="keyword">sizeof</span>(buff), <span class="string">&quot;%.24s\r\n&quot;</span>, ctime(&amp;ticks));</span><br><span class="line">    Write(connfd, buff, <span class="built_in">strlen</span>(buff));</span><br><span class="line"></span><br><span class="line">    Close(connfd);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>Concurrent Server</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pid_t</span> pid;</span><br><span class="line"><span class="keyword">int</span> listenfd, connfd;</span><br><span class="line"></span><br><span class="line">listenfd = Socket ( ... );</span><br><span class="line"></span><br><span class="line">Bind(listenfd, ... );</span><br><span class="line">Listen(listenfd, LISTENQ);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ( ; ; ) &#123;</span><br><span class="line">  connfd = Accept(listenfd, ... );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ( (pid = Fork()) == <span class="number">0</span>) &#123;</span><br><span class="line">    Close(listenfd);  <span class="comment">/* child closes listening socket */</span></span><br><span class="line">    doit(connfd);     <span class="comment">/* process the request */</span></span><br><span class="line">    Close(connfd);    <span class="comment">/* done with this client */</span></span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);          <span class="comment">/* child terminates */</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   Close(connfd);     <span class="comment">/* parent close connected socket */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>TCP echo server<br><code>tcpdiserv/tcpserv01.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;unp.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">str_echo</span><span class="params">(<span class="keyword">int</span> sockfd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">ssize_t</span> n;</span><br><span class="line">  <span class="keyword">char</span> buf[MAXLINE];</span><br><span class="line"></span><br><span class="line">again:</span><br><span class="line">  <span class="keyword">while</span> ( (n = read(sockfd, buf, MAXLINE)) &gt; <span class="number">0</span>)</span><br><span class="line">    Writen(sockfd, buf, n);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">0</span> &amp;&amp; errno == EINTR)</span><br><span class="line">    <span class="keyword">goto</span> again;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n &lt; <span class="number">0</span>)</span><br><span class="line">    err_sys(<span class="string">&quot;str_echo: read error&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> listenfd, connfd;</span><br><span class="line">  <span class="keyword">pid_t</span> childpid;</span><br><span class="line">  <span class="keyword">socklen_t</span> clilen;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">cliaddr</span>, <span class="title">servaddr</span>;</span></span><br><span class="line"></span><br><span class="line">  listenfd = Socket (AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  bzero(&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line"></span><br><span class="line">  servaddr.sin_family = AF_INET;</span><br><span class="line">  servaddr.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line">  servaddr.sin_port(SERV_PORT);</span><br><span class="line"></span><br><span class="line">  Bind(listenfd, (SA *)&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">  Listen(listenfd, LISTENQ);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> ( ; ; )</span><br><span class="line">  &#123;</span><br><span class="line">    clilen = <span class="keyword">sizeof</span>(cliaddr);</span><br><span class="line">    connfd = Accept(listenfd, (SA *) &amp;cliaddr, &amp;clilen);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( (childpid = fork()) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      Close(listenfd);</span><br><span class="line">      str_echo(connfd);</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Close(connfd);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>tcpcliserv/tcpcli01.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;unp.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">str_cli</span><span class="params">(FILE *fp, <span class="keyword">int</span> sockfd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">char</span> sendline[MAXLINE], recvline[MAXLINE];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (Fgets(sendline, MAXLINE, fp) != <span class="literal">NULL</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    Writen(sockfd, sendline, <span class="built_in">strlen</span>(sendline));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Readline(sockfd, recvline, MAXLINE) == <span class="number">0</span>)</span><br><span class="line">      err_quit(<span class="string">&quot;str_cli: server terminated prematurely&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Fputs(recvline, <span class="built_in">stdout</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sockfd;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">servaddr</span>;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    err_sys(<span class="string">&quot;usage: tcpcli &lt;IPaddress&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  sockfd = Socket(AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  bzero(&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">  servaddr.sin_family = AF_INET;</span><br><span class="line">  servaddr.sin_port = htons(SERV_PORT);</span><br><span class="line">  Inet_pton(AF_INET, argv[<span class="number">1</span>], &amp;servaddr.sin_addr);</span><br><span class="line"></span><br><span class="line">  Connect(sockfd, (SA *)&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line"></span><br><span class="line">  str_cli(<span class="built_in">stdin</span>, sockfd);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>UDP echo server<br><code>udpcliserv/udpserv01.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;unp.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dg_echo</span><span class="params">(<span class="keyword">int</span> sockfd, SA *pcliaddr, <span class="keyword">socklen_t</span> clilen)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> n;</span><br><span class="line">  <span class="keyword">socklen_t</span> len;</span><br><span class="line">  <span class="keyword">char</span> mesg[MAXLINE];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> ( ; ; )</span><br><span class="line">  &#123;</span><br><span class="line">    len = clilen;</span><br><span class="line">    n = Recvfrom(sockfd, mesg, MAXLINE, <span class="number">0</span>, pcliaddr, &amp;len);</span><br><span class="line">    Sendto(sockfd, mesg, n, <span class="number">0</span>, pcliaddr, len);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sockfd;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">servaddr</span>, <span class="title">cliaddr</span>;</span></span><br><span class="line"></span><br><span class="line">  sockfd = Socket(AF_INET, SOCK_DGRAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  bzero(&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">  servaddr.sin_family = AF_INET;</span><br><span class="line">  servaddr.sin_addr.s_addr = htonl(INADDR_ANY);</span><br><span class="line">  servaddr.sin_port = htons(SERV_PORT);</span><br><span class="line"></span><br><span class="line">  Bind(sockfd, (SA *)&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line"></span><br><span class="line">  dg_echo(sockfd, (SA *)&amp;cliaddr, <span class="keyword">sizeof</span>(cliaddr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UDP echo client<br><code>udpcliserv/udpcli01.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">include <span class="string">&quot;unp.h&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dg_cli</span><span class="params">(FILE *fp, <span class="keyword">int</span> sockfd, <span class="keyword">const</span> SA *pservaddr, <span class="keyword">socklen_t</span> servlen)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> n;</span><br><span class="line">  <span class="keyword">char</span> sendline[MAXLINE], recvline[MAXLINE + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (Fgets(sendline, MAXLINE, fp) != <span class="literal">NULL</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    Sendto(sockfd, sendline, <span class="built_in">strlen</span>(sendline), <span class="number">0</span>, pservaddr, servlen);</span><br><span class="line"></span><br><span class="line">    n = Recvfrom(sockfd, recvline, MAXLINE, <span class="number">0</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    recvline[n] = <span class="number">0</span>;</span><br><span class="line">    Fputs(recvline, <span class="built_in">stdout</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sockfd;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">servaddr</span>;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argc != <span class="number">2</span>)</span><br><span class="line">    err_quit(<span class="string">&quot;usage: udpcli &lt;IPaddress&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  bzero(&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">  servaddr.sin_family = AF_INET;</span><br><span class="line">  servadr.sin_port = htons(SERV_PORT);</span><br><span class="line">  Inet_pton(AF_INET, argv[<span class="number">1</span>], &amp;servaddr.sin_addr);</span><br><span class="line"></span><br><span class="line">  sockfd = Socket(AF_INET, SOCK_DGRAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  dg_cli(<span class="built_in">stdin</span>, sockfd, (SA *)&amp;servaddr, <span class="keyword">sizeof</span>(servaddr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>ä¿¡å·å¤„ç†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è°ƒç”¨:Signal(SIGCHID,sig_chld);</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sig_chld</span><span class="params">(<span class="keyword">int</span> signo)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span> stat;   <span class="comment">//value-result para</span></span><br><span class="line">    <span class="keyword">while</span> ((pid = waitpid(<span class="number">-1</span>, &amp;stat, WNOHANG)) &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child %d terminated\n&quot;</span>, pid);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>waitpid å¯ä»¥é€šè¿‡æŒ‡å®š pidï¼ŒæŒ‡å®šç»ˆæ­¢æŸä¸ªå­è¿›ç¨‹ï¼Œwait ä¸èƒ½</li><li>åœ¨æ²¡æœ‰å·²ç»ç»ˆæ­¢çš„å­è¿›ç¨‹æ—¶ï¼Œwaitpid å¯ä»¥ä¸é˜»å¡ï¼Œä½† wait ä¼šé˜»å¡ï¼Œç›´åˆ°æ­£åœ¨æ‰§è¡Œçš„å­è¿›ç¨‹ç»ˆæ­¢ã€‚</li></ul><hr><ul><li>è§£é‡Šdatalink accessï¼Œå†™å‡ºä¸€ä¸ªdatalink accessçš„å®ç°<ul><li>æ“ä½œç³»ç»Ÿä¸ºåº”ç”¨ç¨‹åºæä¾›è®¿é—®æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½ï¼Œè¿™ç§åŠŸèƒ½å¯æä¾›å¦‚ä¸‹èƒ½åŠ›:<ul><li>èƒ½å¤Ÿç›‘è§†ç”±æ•°æ®é“¾è·¯å±‚æ¥æ”¶çš„åˆ†ç»„</li><li>èƒ½å¤Ÿä½œä¸ºæ™®é€šåº”ç”¨è¿›ç¨‹è€Œä¸æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†è¿è¡ŒæŸäº›ç¨‹åºï¼Œä¾‹å¦‚: RARP<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fd=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL));</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><hr><ul><li>å†™å‡ºé‡å¯è¢«ä¸­æ–­çš„acceptå‡½æ•°ç¨‹åºç‰‡æ®µ<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( ; ; ) &#123;</span><br><span class="line">  clilen = <span class="keyword">sizeof</span>(cliaddr);</span><br><span class="line">  <span class="keyword">if</span> (connfd = accept(listenfd, (SA *)&amp;cliaddr, &amp;clilen) &lt; <span class="number">0</span> )</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (errno == EINTR)</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      err_sys(<span class="string">&quot;accept error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li>TCP echo ç¨‹åºå¦‚ä½•åŒºåˆ†æœåŠ¡å™¨è¿›ç¨‹ç»ˆæ­¢å’ŒæœåŠ¡å™¨å´©æºƒ<ul><li>è¿›ç¨‹ç»ˆæ­¢: å®¢æˆ·ç«¯æ”¶åˆ°ä¸€ä¸ª FIN å¹¶è¿”å›ä¸€ä¸ª ACKï¼Œä½†å®¢æˆ·è¿›ç¨‹æ­¤æ—¶å¤„äº fgets è°ƒç”¨çš„é˜»å¡ä¸­ï¼Œç­‰å¾…ä»å®¢æˆ·ç«¯æ¥æ”¶åˆ°ä¸€è¡Œæ–‡æœ¬ã€‚(æ­¤æ—¶å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“æœåŠ¡å™¨å­è¿›ç¨‹å·²ç»ç»ˆæ­¢ï¼Œåªæ˜¯å•çº¯çš„æ¥æ”¶åˆ°äº†ä¸€ä¸ª FIN) è€Œåï¼Œæˆ‘ä»¬åœ¨å®¢æˆ·ä¸Šå†é”®å…¥ä¸€è¡Œæ–‡æœ¬ã€‚<code>str_cli</code> è°ƒç”¨ writen å‘é€æ•°æ®ç»™æœåŠ¡å­è¿›ç¨‹ï¼Œä½†ç”±äºæœåŠ¡å­è¿›ç¨‹å·²ç»å…³é—­ï¼Œäºæ˜¯å‘é€ä¸€ä¸ªRSTã€‚æˆ‘ä»¬å®¢æˆ·ç«¯ readline æ—¶è‹¥å…ˆæ”¶åˆ°ç¬¬äºŒæ­¥ä¸­çš„ FINï¼Œåˆ™ç«‹å³è¿”å› 0ï¼Œå¦‚æœå…ˆæ¥æ”¶åˆ° RSTï¼Œåˆ™è¿”å›ä¸€ä¸ª <code>ECONNRESET</code> (å¯¹æ–¹å¤ä½è¿æ¥é”™è¯¯)</li><li>æœåŠ¡å™¨å´©æºƒ: åœ¨å®¢æˆ·ç«¯ä¸Šé”®å…¥ä¸€è¡Œæ–‡æœ¬ï¼Œç”± writen å†™å…¥å†…æ ¸ã€‚writen æˆåŠŸè¿”å›åï¼Œå®¢æˆ·éšåé˜»å¡äº readline è°ƒç”¨ï¼Œå®¢æˆ·ç«¯æŒç»­é‡ä¼ æ•°æ®åˆ†èŠ‚ï¼Œè¯•å›¾ä»æœåŠ¡å™¨ä¸Šæ¥æ”¶ä¸€ä¸ª ACKã€‚ç„¶è€ŒæœåŠ¡å™¨å·²å´©åï¼Œæ²¡æœ‰ä»»ä½•å“åº”ï¼Œæœ€ç»ˆ readline è°ƒç”¨ä¸Šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚å¦‚æœæ˜¯ä¸»æœºå´©æºƒï¼Œåˆ™è¿”å›è¶…æ—¶ <code>ETIMEOUT</code></li><li>è¿›ç¨‹ç»ˆæ­¢: æœåŠ¡å™¨å‘é€ FIN</li><li>å´©æºƒ: æœåŠ¡å™¨ä¸ä¼šåœ¨å·²æœ‰ç½‘ç»œä¸Šå‘é€ä»»ä½•ä¿¡å·</li></ul></li></ul><hr><ul><li><code>fork()</code> å’Œ <code>exec()</code><ul><li>fork<ul><li>å­è¿›ç¨‹å¤åˆ¶çˆ¶è¿›ç¨‹çš„æ‰€æœ‰è¿›ç¨‹å†…å­˜åˆ°å…¶å†…å­˜åœ°å€ç©ºé—´ã€‚çˆ¶ï¼Œå­è¿›ç¨‹çš„æ•°æ®æ®µï¼Œå †æ ˆæ®µå’Œä»£ç æ®µå®Œå…¨ç›¸åŒ</li><li>å­è¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„è¿›ç¨‹ID</li></ul></li><li>exec<ul><li>è¿›ç¨‹è°ƒç”¨ <code>exec()</code> åï¼Œå°†åœ¨åŒä¸€å—è¿›ç¨‹å†…å­˜é‡Œç”¨ä¸€ä¸ªæ–°ç¨‹åºæ¥ä»£æ›¿è°ƒç”¨ <code>exec()</code> çš„é‚£ä¸ªè¿›ç¨‹ï¼Œå½“å‰è¿›ç¨‹çš„â€œæ•°æ®æ®µâ€ï¼Œâ€œå †æ ˆæ®µâ€å’Œâ€œä»£ç æ®µâ€è¢«æ–°ç¨‹åºæ”¹å†™</li><li>æ–°ç¨‹åºä¼šä¿æŒè°ƒç”¨ <code>exec()</code> è¿›ç¨‹çš„ ID ä¸å˜</li></ul></li></ul></li></ul><hr><ul><li>åŸå§‹å¥—æ¥å­—æä¾›çš„ä¸‰ç§UDP/TCPä¸å…·å¤‡çš„ç‰¹ç‚¹<ul><li>è¯»å†™ICMPv4ï¼ŒICMPv6ï¼ŒIGMPv4åˆ†ç»„</li><li>è¯»å†™å†…æ ¸ä¸å¤„ç†å…¶åè®®å­—æ®µçš„IPv4æ•°æ®æŠ¥</li><li>ä½¿ç”¨ <code>IP_HDRINCL</code> å¥—æ¥å­—é€‰é¡¹è‡ªè¡Œæ„é€ IPv4é¦–éƒ¨</li></ul></li></ul><hr><ul><li>defunct<ul><li>è¿›ç¨‹æ‰€è°“çš„â€œåƒµæ­»â€çŠ¶æ€ã€‚ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸäº†ï¼Œä½†æ˜¯å®ƒçš„çˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰ wait/waitpid å®ƒï¼Œåˆ™å®ƒçš„çŠ¶æ€æ˜¯ defunctï¼Œè¿›ç¨‹æ—©å·²æ­»äº¡ï¼Œä½†ä»å æœ‰ä¸€ä¸ª pid</li></ul></li></ul><hr><ul><li>traceroute<ul><li>åŸç†æ˜¯åˆ©ç”¨äº†IPv4çš„TTLå­—æ®µæˆ–IPv6çš„è·³é™å­—æ®µï¼Œä¸€å¼€å§‹è®¾ç½®ä¸º1ï¼Œç„¶åä¸­é—´èŠ‚ç‚¹ä¼šè¿” å›ä¸€ä¸ªICMPâ€time exceeded in transmitâ€(ä¼ è¾“ä¸­è¶…æ—¶)é”™è¯¯ï¼Œæ¥ç€é€æ¸å¢å¤§TTLï¼Œä»è€Œé€ æ­¥ç¡®å®šä¸‹ä¸€è·³è·¯ç”±åœ°å€ã€‚ç›´è‡³ç›®çš„èŠ‚ç‚¹è¿”å›ä¸€ä¸ªICMPâ€port unreachableâ€(ç«¯å£ä¸å¯è¾¾)é”™ è¯¯ï¼Œåˆ™è¡¨ç¤ºåˆ°è¾¾ç›®çš„èŠ‚ç‚¹(è¿™è¦æ±‚ç›®çš„èŠ‚ç‚¹æ²¡æœ‰åœ¨è¯¥ç«¯å£ä¸Šå¼€å¯æœåŠ¡ï¼Œå³å‘é€ICMPåŒ…æ—¶ï¼Œç›® çš„ç«¯å£å·åº”è¯¥é€‰æ‹©ä¸€ä¸ªæœªè¢«ç›®çš„ä¸»æœºä½¿ç”¨çš„ç«¯å£å· ==&gt; tracerouteé€‰æ‹©äº†ä¸€ä¸ªå¤§äº30000å€¼ ä½œä¸ºç›®çš„ç«¯å£å·ï¼Œå› ä¸ºUDPåè®®è¦æ±‚ç«¯å£å·å¿…é¡»å°äº30000ï¼Œæ‰€ä»¥ç›®çš„ä¸»æœºå¦‚æœæ¥æ”¶åˆ°å¿…ç„¶ ä¼šä¼šä¸€ä¸ªICMPç«¯å£ä¸å¯è¾¾é”™è¯¯)ã€‚</li><li>tracert æœ‰ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ç­‰å¾…å“åº”(ICMP TTLåˆ°æœŸæ¶ˆæ¯)ã€‚å¦‚æœè¿™ä¸ªæ—¶é—´è¿‡äº†ï¼Œå®ƒå°†æ‰“å°å‡ºä¸€ç³»åˆ—çš„<code>*</code>å·è¡¨æ˜ï¼šåœ¨è¿™ä¸ªè·¯å¾„ä¸Šï¼Œè¿™ä¸ªè®¾å¤‡ä¸èƒ½åœ¨ç»™å®šçš„æ—¶é—´å†…å‘å‡ºICMP TTLåˆ°æœŸæ¶ˆæ¯çš„å“åº”ã€‚ç„¶åï¼ŒTracertç»™TTLè®°æ•°å™¨åŠ 1ï¼Œç»§ç»­è¿›è¡Œ</li></ul></li></ul><hr><p>setsockopt å’Œ getsockopt</p><table><thead><tr><th>level</th><th>optname</th><th>description</th></tr></thead><tbody><tr><td>SO_SOCKET</td><td>SO_KEEPALIVE</td><td>å‘¨æœŸæ€§æµ‹è¯•è¿æ¥æ˜¯å¦è¿˜å­˜åœ¨</td></tr><tr><td>SO_SOCKET</td><td>SO_LINGER</td><td>è‹¥æœ‰æ•°æ®å¾…å‘é€åˆ™å»¶è¿Ÿå…³é—­</td></tr><tr><td>IPPROTO_IP</td><td>IP_HDRINCL</td><td>éšæ•°æ®åŒ…å«çš„IPé¦–éƒ¨</td></tr><tr><td>IPPROTO_IP</td><td>IP_TTL</td><td>Time to Live</td></tr><tr><td>IPPROTO_TCP</td><td>TCP_MAXSEG</td><td>TCPæœ€å¤§æŠ¥æ–‡å¤§å°</td></tr><tr><td>IPPROTO_TCP</td><td>TCP_NODELAY</td><td>ç¦æ­¢nagleç®—æ³•</td></tr></tbody></table><hr><h2 id="Chapter-1"><a href="#Chapter-1" class="headerlink" title="Chapter 1"></a>Chapter 1</h2><p>è€ƒè‘—åçš„äººç‰©ï¼š</p><ul><li>K&amp;R: Kernighan å’Œ Ritchie</li><li>cè¯­è¨€ä½œè€…ï¼Œunix ä½œè€…: Ken Thompson å’Œ Dennis M. Ritchie</li><li>GNU åˆ›å»ºè€…/Emacs ä½œè€…: Richard Matthew Stallman </li><li>linux ä½œè€…: Linus Benedict Torvalds</li><li>vim ä½œè€…: Bram Moolenaar</li><li>Tex ä½œè€…: Donald Knuth é«˜å¾·çº³</li></ul><h2 id="Chapter-2"><a href="#Chapter-2" class="headerlink" title="Chapter 2"></a>Chapter 2</h2><p>TCP çŠ¶æ€è½¬æ¢å›¾ ï¼Œ 2.9 å¸¸ç”¨çš„Port Number ï¼Œ2.10 Concurrent Server ï¼Œ 2.12 services</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">21ç«¯å£ï¼šFTP æ–‡ä»¶ä¼ è¾“æœåŠ¡</span><br><span class="line">22ç«¯å£ï¼šSSH ç«¯å£</span><br><span class="line">23ç«¯å£ï¼šTELNET ç»ˆç«¯ä»¿çœŸæœåŠ¡</span><br><span class="line">25ç«¯å£ï¼šSMTP ç®€å•é‚®ä»¶ä¼ è¾“æœåŠ¡</span><br><span class="line">53ç«¯å£ï¼šDNS åŸŸåè§£ææœåŠ¡</span><br><span class="line">80ç«¯å£ï¼šHTTP è¶…æ–‡æœ¬ä¼ è¾“æœåŠ¡</span><br><span class="line">110ç«¯å£ï¼šPOP3 â€œé‚®å±€åè®®ç‰ˆæœ¬3â€ä½¿ç”¨çš„ç«¯å£</span><br><span class="line">443ç«¯å£ï¼šHTTPS åŠ å¯†çš„è¶…æ–‡æœ¬ä¼ è¾“æœåŠ¡</span><br><span class="line">**********************************</span><br><span class="line">1433ç«¯å£ï¼šMS SQL*SERVERæ•°æ®åº“ é»˜è®¤ç«¯å£å·</span><br><span class="line">1521ç«¯å£ï¼šOracleæ•°æ®åº“æœåŠ¡</span><br><span class="line">1863ç«¯å£ï¼šMSN Messengerçš„æ–‡ä»¶ä¼ è¾“åŠŸèƒ½æ‰€ä½¿ç”¨çš„ç«¯å£</span><br><span class="line">3306ç«¯å£ï¼šMYSQL é»˜è®¤ç«¯å£å·</span><br><span class="line">3389ç«¯å£ï¼šMicrosoft RDP å¾®è½¯è¿œç¨‹æ¡Œé¢ä½¿ç”¨çš„ç«¯å£</span><br><span class="line">5631ç«¯å£ï¼šSymantec pcAnywhere è¿œç¨‹æ§åˆ¶æ•°æ®ä¼ è¾“æ—¶ä½¿ç”¨çš„ç«¯å£</span><br><span class="line">5632ç«¯å£ï¼šSymantec pcAnywhere ä¸»æ§ç«¯æ‰«æè¢«æ§ç«¯æ—¶ä½¿ç”¨çš„ç«¯å£</span><br><span class="line">5000ç«¯å£ï¼šMS SQL Serverä½¿ç”¨çš„ç«¯å£</span><br><span class="line">8000ç«¯å£ï¼šè…¾è®¯QQ</span><br></pre></td></tr></table></figure><h2 id="Chapter-3ï¼Œ4ï¼Œ5ï¼Œ6"><a href="#Chapter-3ï¼Œ4ï¼Œ5ï¼Œ6" class="headerlink" title="Chapter 3ï¼Œ4ï¼Œ5ï¼Œ6"></a>Chapter 3ï¼Œ4ï¼Œ5ï¼Œ6</h2><h3 id="Socket-Address-Structures"><a href="#Socket-Address-Structures" class="headerlink" title="Socket Address Structures"></a>Socket Address Structures</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> &#123;</span></span><br><span class="line">    <span class="keyword">in_addr_t</span>         s_addr;           <span class="comment">/* 32-bit IPv4 address */</span></span><br><span class="line">                                <span class="comment">/* network byte ordered */</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> &#123;</span></span><br><span class="line">    <span class="keyword">uint8_t</span>         sin_len;         <span class="comment">/* length of structure (16) */</span></span><br><span class="line">    <span class="keyword">sa_family_t</span>       sin_family;   <span class="comment">/* AF_INET */</span></span><br><span class="line">    <span class="keyword">in_port_t</span>            sin_port;       <span class="comment">/* 16-bit TCP or UDP port number */</span></span><br><span class="line">                                                <span class="comment">/* network byte ordered */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span>  <span class="title">sin_addr</span>;</span>        <span class="comment">/* 32-bit IPv4 address */</span></span><br><span class="line">                                                <span class="comment">/* network byte ordered */</span></span><br><span class="line">    <span class="keyword">char</span>                   sin_zero[<span class="number">8</span>];  <span class="comment">/* unused */</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IPV4</span></span><br><span class="line">inet_addr inet_ntoa</span><br><span class="line"><span class="comment">// IPV4/6</span></span><br><span class="line">inet_pton inet_ntop</span><br></pre></td></tr></table></figure><ul><li>in_addr æ˜¯ç»“æ„çš„åŸå› æ˜¯æ—©æœŸå°†å…¶å®šä¹‰ä¸º union æ–¹ä¾¿Aï¼ŒBï¼ŒCç±»åœ°å€çš„è®¿é—®</li><li>sin_zero ç½®0</li></ul><h3 id="Generic-socket-address-structure"><a href="#Generic-socket-address-structure" class="headerlink" title="Generic socket address structure"></a>Generic socket address structure</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr</span> &#123;</span></span><br><span class="line">    <span class="keyword">uint8_t</span>       sa_len;</span><br><span class="line">    <span class="keyword">sa_family_t</span> sa_family;      <span class="comment">/* address family: AF_xxx value */</span></span><br><span class="line">    <span class="keyword">char</span>             sa_data[<span class="number">14</span>]; <span class="comment">/* protocol-specific address */</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span><span class="params">(<span class="keyword">int</span>, struct sockaddr *, <span class="keyword">socklen_t</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">serv</span>;</span>    <span class="comment">/* IPv4 socket address structure */</span></span><br><span class="line"><span class="comment">/* fill in serv&#123;&#125; */</span></span><br><span class="line">bind(sockfd, (struct sockaddr *) &amp;serv, <span class="keyword">sizeof</span>(serv));</span><br></pre></td></tr></table></figure><p>ç”¨äºå®šä¹‰å‡½æ•°æ—¶é€‚é…å„ç§ä¸åŒç±»å‹çš„åœ°å€ç»“æ„ï¼Œ</p><p>è‹¥ä¸è½¬æ¢ï¼Œç¼–è¯‘å™¨æŠ¥ <code>warning: passing arg 2 of &#39;bind&#39; from incompatible pointer type</code></p><h3 id="Sockaddr-in6"><a href="#Sockaddr-in6" class="headerlink" title="Sockaddr_in6"></a>Sockaddr_in6</h3><p>128-bits ipv6 åœ°å€</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">in6_addr</span> &#123;</span></span><br><span class="line">    <span class="keyword">uint8_t</span>     s6_addr[<span class="number">16</span>];  <span class="comment">/* 128-bit IPv6 address */</span></span><br><span class="line">                                        <span class="comment">/* network byte ordered */</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIN6_LEN                 <span class="comment">/* required for compile-time tests */</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in6</span> &#123;</span></span><br><span class="line">    <span class="keyword">uint8_t</span>             sin6_len;           <span class="comment">/* length of this struct (28) */</span></span><br><span class="line">    <span class="keyword">sa_family_t</span>       sin6_family;       <span class="comment">/* AF_INET6 */</span></span><br><span class="line">    <span class="keyword">in_port_t</span>           sin6_port;           <span class="comment">/* transport layer port# */</span></span><br><span class="line">                                                    <span class="comment">/* network byte ordered */</span></span><br><span class="line">    <span class="keyword">uint32_t</span>             sin6_flowinfo;  <span class="comment">/* flow information, undefined */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">in6_addr</span> <span class="title">sin6_addr</span>;</span>           <span class="comment">/* IPv6 address */</span></span><br><span class="line">                                                    <span class="comment">/* network byte ordered */</span></span><br><span class="line">    <span class="keyword">uint32_t</span>             sin6_scope_id;  <span class="comment">/* set of interfaces for a scope */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>The <code>sin6_flowinfo</code> member is divided into two fields:<ul><li>The low-order 20 bits are the flow label</li><li>The high-order 12 bits are reserved</li></ul></li></ul><h3 id="Value-Result"><a href="#Value-Result" class="headerlink" title="Value-Result"></a>Value-Result</h3><p>å½“æˆ‘ä»¬æŠŠ <code>SA*</code> ä»ç”¨æˆ·è¿›ç¨‹ä¼ å…¥å†…æ ¸æ—¶é•¿åº¦ä½œä¸ºå€¼ value ï¼Œå†…æ ¸å¤„ç†å®Œè¿”å›æ—¶ç»“æ„çš„å¤§å°å¯èƒ½ä¼šæ”¹å˜ï¼Œå› æ­¤é•¿åº¦ä½œä¸ºä¸€ä¸ªç»“æœ result ä¼ å› , å¼•ç”¨æ˜¯å› ä¸ºéœ€è¦å‡½æ•°å†…éƒ¨å»èµ‹å€¼</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æˆ·è¿›ç¨‹ =&gt; å†…æ ¸</span></span><br><span class="line"><span class="comment">// bind connect sendto </span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">serv</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* fill in serv&#123;&#125; */</span></span><br><span class="line">connect(sockfd, (SA *) &amp;serv, <span class="keyword">sizeof</span>(serv));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…æ ¸ =&gt; ç”¨æˆ·è¿›ç¨‹</span></span><br><span class="line"><span class="comment">// accept recvfrom getsockname getpeername </span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_un</span> <span class="title">cli</span>;</span> <span class="comment">/* Unix domain */</span></span><br><span class="line"><span class="keyword">socklen_t</span> len;</span><br><span class="line"></span><br><span class="line">len = <span class="keyword">sizeof</span>(cli);           <span class="comment">/* len is a value */</span></span><br><span class="line">getpeername(unixfd, (SA *) &amp;cli, &amp;len);</span><br><span class="line"><span class="comment">/* len may have changed */</span></span><br></pre></td></tr></table></figure><h3 id="å­—èŠ‚åº-Byte-Ordering"><a href="#å­—èŠ‚åº-Byte-Ordering" class="headerlink" title="å­—èŠ‚åº Byte Ordering"></a>å­—èŠ‚åº Byte Ordering</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—èŠ‚åºè½¬æ¢å‡½æ•°</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">uint16_t</span> <span class="title">htons</span><span class="params">(<span class="keyword">uint16_t</span> host16bitvalue)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">htonl</span><span class="params">(<span class="keyword">uint32_t</span> host32bitvalue)</span></span>;</span><br><span class="line">                                     Both <span class="keyword">return</span>: value in network byte order</span><br><span class="line"><span class="keyword">uint16_t</span> ntohs(<span class="keyword">uint16_t</span> net16bitvalue);</span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">ntohl</span><span class="params">(<span class="keyword">uint32_t</span> net32bitvalue)</span></span>;</span><br><span class="line">                                    Both <span class="keyword">return</span>: value in host byte order</span><br></pre></td></tr></table></figure><p>n - network , h - host , s - short 16 ä½, l - long 32 ä½</p><h3 id="Byte-Manipulation"><a href="#Byte-Manipulation" class="headerlink" title="Byte Manipulation"></a>Byte Manipulation</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;strings.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bzero</span><span class="params">(<span class="keyword">void</span> *dest, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bcopy</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *src, <span class="keyword">void</span> *dest, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">bcmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *ptr1, <span class="keyword">const</span> <span class="keyword">void</span> *ptr2, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line">                                    Returns: <span class="number">0</span> <span class="keyword">if</span> equal, nonzero <span class="keyword">if</span> unequal</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">memset</span><span class="params">(<span class="keyword">void</span> *dest, <span class="keyword">int</span> c, <span class="keyword">size_t</span> len)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">memcpy</span><span class="params">(<span class="keyword">void</span> *dest, <span class="keyword">const</span> <span class="keyword">void</span> *src, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>   <span class="title">memcmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *ptr1, <span class="keyword">const</span> <span class="keyword">void</span> *ptr2, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line">                        Returns: <span class="number">0</span> <span class="keyword">if</span> equal, &lt;<span class="number">0</span> <span class="keyword">or</span> &gt;<span class="number">0</span> <span class="function"><span class="keyword">if</span> <span class="title">unequal</span> <span class="params">(see text)</span></span></span><br></pre></td></tr></table></figure><h3 id="åœ°å€è½¬æ¢å‡½æ•°"><a href="#åœ°å€è½¬æ¢å‡½æ•°" class="headerlink" title="åœ°å€è½¬æ¢å‡½æ•°"></a>åœ°å€è½¬æ¢å‡½æ•°</h3><h4 id="IPV4"><a href="#IPV4" class="headerlink" title="IPV4"></a>IPV4</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="comment">// converts the C character string pointed to by strptr into</span></span><br><span class="line"><span class="comment">// its 32-bit binary network byte ordered value, </span></span><br><span class="line"><span class="comment">// which is stored through the pointer addrptr </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">inet_aton</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *strptr, struct in_addr *addrptr)</span></span>;</span><br><span class="line">                    Returns: <span class="number">1</span> <span class="keyword">if</span> <span class="built_in">string</span> was valid, <span class="number">0</span> on error</span><br><span class="line"><span class="function"><span class="keyword">in_addr_t</span> <span class="title">inet_addr</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *strptr)</span></span>;</span><br><span class="line">                    Returns: <span class="number">32</span>-bit binary network byte ordered IPv4 address; INADDR_NONE <span class="keyword">if</span> error</span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">inet_ntoa</span><span class="params">(struct in_addr inaddr)</span></span>;</span><br><span class="line">                    Returns: pointer to dotted-decimal <span class="built_in">string</span></span><br></pre></td></tr></table></figure><ul><li><p><code>inet_aton</code> å°†å­—ç¬¦ä¸² <code>strptr</code> è½¬æ¢ä¸º 32 æ¯”ç‰¹äºŒè¿›åˆ¶ç½‘ç»œå­—èŠ‚åºåœ°å€ <code>addrptr</code></p></li><li><p><code>inet_addr</code> ä½œç”¨åŒä¸Šï¼Œå‡ºé”™è¿”å› <code>INADDR_NONE</code> 255.255.255.255, æ‰€ä»¥ä¸èƒ½å¤„ç†è¯¥åœ°å€ï¼ˆè¢«åºŸå¼ƒï¼‰</p></li><li><p><code>inet_ntoa</code> 32bit ç½‘ç»œå­—èŠ‚åºåˆ°ç‚¹åˆ†åè¿›åˆ¶ IPV4 å­—ç¬¦ä¸²ï¼Œå‚¨å­˜åœ¨é™æ€å†…å­˜ï¼Œä¸å¯é‡å…¥</p></li></ul><h4 id="IPV4-6"><a href="#IPV4-6" class="headerlink" title="IPV4/6"></a>IPV4/6</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">inet_pton</span><span class="params">(<span class="keyword">int</span> family, <span class="keyword">const</span> <span class="keyword">char</span> *strptr, <span class="keyword">void</span> *addrptr)</span></span>;</span><br><span class="line">                                Returns: <span class="number">1</span> <span class="keyword">if</span> OK, <span class="number">0</span> <span class="keyword">if</span> input <span class="keyword">not</span> a valid presentation format, âˆ’<span class="number">1</span> on error</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">const</span> <span class="keyword">char</span> *<span class="title">inet_ntop</span><span class="params">(<span class="keyword">int</span> family, <span class="keyword">const</span> <span class="keyword">void</span> *addrptr, <span class="keyword">char</span> *strptr, <span class="keyword">size_t</span> len)</span></span>;</span><br><span class="line">                                Returns: pointer to result <span class="keyword">if</span> OK, <span class="literal">NULL</span> on error</span><br></pre></td></tr></table></figure><p>p - presentation , n - numeric</p><ul><li><code>family</code>: <code>AF_INET</code> / <code>AF_INET6</code> ä¸æ”¯æŒ errno= <code>EAFNOSUPPORT</code></li><li><code>inet_pton</code>: å­—ç¬¦ä¸² strptr è½¬æ¢ä¸º addrptr äºŒè¿›åˆ¶åœ°å€ç»“æœ</li><li><code>inet_ntop</code>: ç›¸åï¼Œlen ä½ strptr å¤§å°ï¼Œé˜²æ­¢æº¢å‡º - lenå¤ªå°ï¼Œè¿”å›ç©ºæŒ‡é’ˆ errno= <code>ENOSPC</code></li></ul><h3 id="è¯»å†™å‡½æ•°"><a href="#è¯»å†™å‡½æ•°" class="headerlink" title="è¯»å†™å‡½æ•°"></a>è¯»å†™å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;unp.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">readn</span><span class="params">(<span class="keyword">int</span> filedes, <span class="keyword">void</span> *buff, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">writen</span><span class="params">(<span class="keyword">int</span> filedes, <span class="keyword">const</span> <span class="keyword">void</span> *buff, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">readline</span><span class="params">(<span class="keyword">int</span> filedes, <span class="keyword">void</span> *buff, <span class="keyword">size_t</span> maxlen)</span></span>;</span><br><span class="line">                    All <span class="keyword">return</span>: number of bytes read <span class="keyword">or</span> written, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p>readline æ¯æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦ï¼Œæç«¯åœ°æ…¢</p><h2 id="Chapter-4"><a href="#Chapter-4" class="headerlink" title="Chapter 4"></a>Chapter 4</h2><p>åŸºæœ¬ TCP å¥—æ¥å­—ç¼–ç¨‹</p><h3 id="Socket-å‡½æ•°"><a href="#Socket-å‡½æ•°" class="headerlink" title="Socket å‡½æ•°"></a>Socket å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">socket</span><span class="params">(<span class="keyword">int</span> family, <span class="keyword">int</span> type, <span class="keyword">int</span> protocol)</span></span>;</span><br><span class="line">                Returns: non-negative descriptor <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><table><thead><tr><th></th><th>AF_INET</th><th>AF_INET6</th><th>AF_LOCAL</th><th>AF_ROUTE</th><th>AF_KEY</th></tr></thead><tbody><tr><td>SOCK_STREAM</td><td>TCP SCTP</td><td>TCP SCTP</td><td>YES</td><td></td><td></td></tr><tr><td>SOCK_DGRAM</td><td>UDP</td><td>UDP</td><td>YES</td><td></td><td></td></tr><tr><td>SOCK_SEQPACKET</td><td>SCTP</td><td>SCTP</td><td>YES</td><td></td><td></td></tr><tr><td>SOCK_RAW</td><td>IPV4</td><td>IPV6</td><td></td><td>YES</td><td>YES</td></tr></tbody></table><h3 id="Connect-å‡½æ•°"><a href="#Connect-å‡½æ•°" class="headerlink" title="Connect å‡½æ•°"></a>Connect å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> struct sockaddr *servaddr, <span class="keyword">socklen_t</span> addrlen)</span></span>;</span><br><span class="line">                                    Returns: <span class="number">0</span> <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p>client ç”¨äºä¸ server è¿æ¥ï¼Œå†…æ ¸ä¼šè‡ªå·±é€‰æ‹©ä¸´æ—¶ç«¯å£</p><ul><li>75 s æ— å“åº”åè¿”å› <code>ETIMEDOUT</code></li><li>è‹¥ç›¸åº” RST åˆ™é©¬ä¸Šè¿”å› <code>ECONNREFUSED</code> - æŒ‡å®šç«¯å£æ²¡æœ‰ç­‰å¾…è¿æ¥</li><li>ç›®çš„ä¸å¯è¾¾ï¼Œè¿”å› <code>EHOSTUNREACH</code>, <code>ENETUNREACH</code></li></ul><p>é”™è¯¯</p><ul><li>å¦‚æœç»™ä¸å­˜åœ¨çš„æœºå™¨å‘é€ï¼Œå› ä¸ºæ²¡æœ‰ ARP reply , <code>ETIMEOUT</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect error: Connection timed out</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœç»™æœªè¿è¡Œ server çš„æœºå™¨å‘é€ï¼Œæ”¶åˆ° RST ï¼Œ<code>ECONNREFUSED</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect error: Connection refused</span><br></pre></td></tr></table></figure><ul><li>ç»™ä¸å¯è¾¾å‘é€ï¼Œ æ”¶åˆ° ICMP ä¸å¯è¾¾é”™è¯¯ï¼Œ<code>EHOSTUNREACH</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect error: No route to host</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡ connect å¤±è´¥åï¼Œéƒ½éœ€è¦å…³é—­ sockfd é‡æ–°è°ƒç”¨ socket å‡½æ•°</p><h3 id="bind-å‡½æ•°"><a href="#bind-å‡½æ•°" class="headerlink" title="bind å‡½æ•°"></a>bind å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> struct sockaddr *myaddr, <span class="keyword">socklen_t</span> addrlen)</span></span>;</span><br><span class="line">                                    Returns: <span class="number">0</span> <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p>32b ipv4 / 128b ipv6 + 16b TCP/UDP port number</p><p>Servers ä¼šåœ¨å¯åŠ¨æ—¶è°ƒç”¨ bind ç«¯å£ï¼ˆç¨‹åºå®šä¹‰ï¼‰ ï¼Œè‹¥æ²¡æœ‰åˆ™å½“è°ƒç”¨ connect æˆ– listen æ—¶ï¼Œå†…æ ¸ä¼šé€‰æ‹©ä¸€ä¸ªä¸´æ—¶ç«¯å£ æˆ– æ ¹æ® SYN çš„ç›®çš„åœ°å€</p><p>Client é€šå¸¸ä¸ä¼š bind è€Œæ˜¯ connect æ—¶ç”±å†…æ ¸æ ¹æ®è·¯å¾„é€‰æ‹©</p><h4 id="IPåœ°å€"><a href="#IPåœ°å€" class="headerlink" title="IPåœ°å€"></a>IPåœ°å€</h4><p>wildcard é€šé…ç¬¦</p><p>ipv4 : <code>INADDR_ANY</code> 0.0.0.0ï¼Œå†…æ ¸ç­‰åˆ°TCPè¿æ¥ï¼ŒUDPæŠ¥æ–‡å‘é€åé€‰æ‹©ipåœ°å€</p><p>ipv6 : <code>in6addr_any</code> ç”±ç³»ç»Ÿé¢„å…ˆåˆ†é…å¹¶ç½®ä¸º <code>IN6ADDR_ANY_INIT</code></p><p>RPC ä¾‹å¤–ï¼Œä¼šé€šè¿‡ ç«¯å£æ˜ å°„å™¨æ³¨å†Œ</p><h4 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h4><p><code>EADDRINUSE</code> : <code>Address already in use</code> åœ°å€å·²ä½¿ç”¨</p><h3 id="listen-å‡½æ•°"><a href="#listen-å‡½æ•°" class="headerlink" title="listen å‡½æ•°"></a>listen å‡½æ•°</h3><p>Server : convert unconnected socket into a passive socket</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">listen</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> backlog)</span></span>;</span><br><span class="line">                    Returns: <span class="number">0</span> <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p><code>backlog</code> : å†…æ ¸é˜Ÿåˆ—ä¸­æ’é˜Ÿçš„æœ€å¤§è¿æ¥æ•°</p><p>è°ƒç”¨æ—¶é—´ï¼š socket bind åï¼Œ accept å‰</p><p>ä¸º listening socket ä¿æŒä¸¤ä¸ªé˜Ÿåˆ—</p><ul><li><code>incomplete connection queue</code> æœªå®Œæˆè¿æ¥é˜Ÿåˆ—ï¼Œæœªå®Œæˆæ¡æ‰‹ï¼Œ<code>SYN_RCVD</code> æ€</li><li><code>completed connection queue</code> å·²å®Œæˆè¿æ¥é˜Ÿåˆ—ï¼Œå®Œæˆæ¡æ‰‹ï¼Œ<code>ESTABLISHED</code> æ€</li></ul><p>ä¸¤é˜Ÿä¹‹å’Œä¸è¶…è¿‡ backlog</p><h3 id="accept-å‡½æ•°"><a href="#accept-å‡½æ•°" class="headerlink" title="accept å‡½æ•°"></a>accept å‡½æ•°</h3><p>è¿”å›å·²å®Œæˆè¿æ¥é˜Ÿåˆ—é˜Ÿå¤´ï¼Œå¦‚æœä¸ºç©ºï¼Œè¿›ç¨‹ç¡çœ </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">accept</span><span class="params">(<span class="keyword">int</span> sockfd, struct sockaddr *cliaddr, <span class="keyword">socklen_t</span> *addrlen)</span></span>;</span><br><span class="line">                        Returns: non-negative descriptor <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><ul><li><code>sockfd</code> : listening socket ç›‘å¬</li><li><code>return</code> : connected socket å·²è¿æ¥</li><li><code>cliaddr</code> &amp; <code>addrlen</code> ï¼šå¯¹ç«¯çš„åœ°å€å’Œé•¿åº¦</li><li>ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œç›‘å¬socket ä¿æŒæ‰“å¼€ï¼Œè¿æ¥socketå®Œæˆå¯¹ä¸€ä¸ªå®¢æˆ·çš„æœåŠ¡å°±å…³é—­</li></ul><h4 id="bind-é”™è¯¯"><a href="#bind-é”™è¯¯" class="headerlink" title="bind é”™è¯¯"></a>bind é”™è¯¯</h4><ul><li>éè¶…çº§ç”¨æˆ·ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bind</span> error: Permission denied</span><br></pre></td></tr></table></figure><h3 id="fork-å’Œ-exec-å‡½æ•°"><a href="#fork-å’Œ-exec-å‡½æ•°" class="headerlink" title="fork å’Œ exec å‡½æ•°"></a>fork å’Œ exec å‡½æ•°</h3><p>fork æ˜¯å”¯ä¸€ç”Ÿæˆæ–°è¿›ç¨‹çš„å‡½æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">pid_t</span> <span class="title">fork</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">            Returns: <span class="number">0</span> in child, process ID of child in parent, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><h3 id="å¹¶å‘æœåŠ¡å™¨"><a href="#å¹¶å‘æœåŠ¡å™¨" class="headerlink" title="å¹¶å‘æœåŠ¡å™¨"></a>å¹¶å‘æœåŠ¡å™¨</h3><p>çˆ¶è¿›ç¨‹ listenfd ç›‘å¬ï¼Œå­è¿›ç¨‹ connfd è´Ÿè´£æ¥æ”¶æ•°æ®å’Œå®é™…æ“ä½œ</p><h3 id="close-å‡½æ•°"><a href="#close-å‡½æ•°" class="headerlink" title="close å‡½æ•°"></a>close å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">close</span><span class="params">(<span class="keyword">int</span> sockfd)</span></span>;</span><br><span class="line">                        Returns: <span class="number">0</span> <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿å¤šä¸ªè¿›ç¨‹ä½¿ç”¨å¥—æ¥å­—ï¼Œå®ƒæ˜¯å¼•ç”¨è®¡æ•°çš„ã€‚</p><p>å†…æ ¸ä¼šå‘å®Œæ‰€æœ‰ç­‰å¾…å‘é€çš„æ•°æ®ï¼Œç„¶å TCP è¿æ¥ç»ˆæ­¢è¿‡ç¨‹</p><p>å¦‚æœåªæƒ³å‘é€FINï¼Œæ”¹ç”¨ <code>shutdown</code> å‡½æ•°</p><h3 id="åœ°å€å‡½æ•°"><a href="#åœ°å€å‡½æ•°" class="headerlink" title="åœ°å€å‡½æ•°"></a>åœ°å€å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getsockname</span><span class="params">(<span class="keyword">int</span> sockfd, struct sockaddr *localaddr, <span class="keyword">socklen_t</span> *addrlen)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getpeername</span><span class="params">(<span class="keyword">int</span> sockfd, struct sockaddr *peeraddr, <span class="keyword">socklen_t</span> *addrlen)</span></span>;</span><br><span class="line">                            Both <span class="keyword">return</span>: <span class="number">0</span> <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p>sock æœ¬åœ°ï¼Œpeer è¿æ¥å¯¹ç«¯</p><p>é‡ç‚¹åŸºæœ¬éƒ½è¦æ±‚æŒæ¡ã€5.13ä¸è¦æ±‚æŒæ¡</p><p>6.9ï¼Œ6.20 ä¸è¦æ±‚æŒæ¡</p><h2 id="Chapter-5"><a href="#Chapter-5" class="headerlink" title="Chapter 5"></a>Chapter 5</h2><h3 id="TCP-Echo-Server"><a href="#TCP-Echo-Server" class="headerlink" title="TCP Echo Server"></a>TCP Echo Server</h3><p>Port : 5000 - 49152</p><h3 id="Normal-Startup"><a href="#Normal-Startup" class="headerlink" title="Normal Startup"></a>Normal Startup</h3><p>server é˜»å¡åœ¨ accept ï¼ˆè¿˜æœªå¯åŠ¨ç”¨æˆ·ï¼‰</p><p>client é˜»å¡åœ¨ fgets è°ƒç”¨</p><p>è¿æ¥</p><p>æœåŠ¡å™¨é˜»å¡åœ¨ read ï¼Œçˆ¶è¿›ç¨‹é˜»å¡åœ¨ accept</p><p>æ­¤æ—¶ ä¸‰ä¸ªè¿›ç¨‹ STAT éƒ½æ˜¯ S- sleeping - ï¼ˆå·²é˜»å¡ï¼‰</p><p>WCHAN çˆ¶è¿›ç¨‹ wait_for_connect , server tcp_data_wait , client - read_chan</p><h3 id="Normal-Termination"><a href="#Normal-Termination" class="headerlink" title="Normal Termination"></a>Normal Termination</h3><p>Client ï¼š EOF å­—ç¬¦ï¼ˆControl+D) ç»ˆæ­¢æœåŠ¡å™¨</p><p>å®¢æˆ·ç«¯è¿›å…¥ <code>TIME_WAIT</code> çŠ¶æ€</p><h3 id="ä¿¡å·å¤„ç†"><a href="#ä¿¡å·å¤„ç†" class="headerlink" title="ä¿¡å·å¤„ç†"></a>ä¿¡å·å¤„ç†</h3><p><code>SIGKILL</code> &amp; <code>SIGSTOP</code> ä¸èƒ½è¢«æ•è·</p><p>ä¿¡å·å¤„ç†å‡½æ•°æ˜¯ä¸€ä¸ªä»…æœ‰ä¸€ä¸ªæ•´æ•°å‚æ•°ä¸”ä¸è¿”å›å€¼çš„å‡½æ•°</p><h4 id="wait-amp-waitpid"><a href="#wait-amp-waitpid" class="headerlink" title="wait &amp; waitpid"></a>wait &amp; waitpid</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">pid_t</span> <span class="title">wait</span><span class="params">(<span class="keyword">int</span> *statloc)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">pid_t</span> <span class="title">waitpid</span><span class="params">(<span class="keyword">pid_t</span> pid, <span class="keyword">int</span> *statloc, <span class="keyword">int</span> options)</span></span>;</span><br><span class="line">                        Both <span class="keyword">return</span>: process ID <span class="keyword">if</span> OK, <span class="number">0</span> <span class="keyword">or</span> âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p>å¤„ç†å·²ç»ˆæ­¢çš„å­è¿›ç¨‹</p><ul><li>è¿”å›å€¼ï¼š å·²ç»ˆæ­¢å­è¿›ç¨‹çš„è¿›ç¨‹ ID å·ï¼Œé€šè¿‡ statloc æŒ‡é’ˆè¿”å›çš„å­è¿›ç¨‹ç»ˆæ­¢çŠ¶æ€ï¼ˆä¸€ä¸ªæ•´æ•°ï¼‰</li><li>å¯¹äºåŒç§ç±»å‹çš„ä¿¡å·ï¼Œä¸»æœºåªä¼šæ‰§è¡Œä¸€æ¬¡ä¿¡å·å¤„ç†å‡½æ•°</li></ul><h4 id="accept-è¿”å›å‰è¿æ¥ä¸­æ­¢"><a href="#accept-è¿”å›å‰è¿æ¥ä¸­æ­¢" class="headerlink" title="accept è¿”å›å‰è¿æ¥ä¸­æ­¢"></a>accept è¿”å›å‰è¿æ¥ä¸­æ­¢</h4><p>connect åï¼Œaccept å‰ï¼Œå®¢æˆ·ç«¯å‘é€ RST æŠ¥æ–‡</p><p>POSIX : <code>ECONNABORTED</code> - <code>software caused connection abort</code></p><h4 id="æœåŠ¡å™¨è¿›ç¨‹ç»ˆæ­¢"><a href="#æœåŠ¡å™¨è¿›ç¨‹ç»ˆæ­¢" class="headerlink" title="æœåŠ¡å™¨è¿›ç¨‹ç»ˆæ­¢"></a>æœåŠ¡å™¨è¿›ç¨‹ç»ˆæ­¢</h4><p>æœåŠ¡å™¨è¿›ç¨‹å´©æºƒåï¼Œå¦‚æœ client ä¸æ“ä½œï¼Œä¼šé˜»å¡åœ¨ fgetsï¼Œè¾“å…¥å­—ç¬¦åï¼Œreadline å› æ¥æ”¶åˆ° FIN è¿”å› 0ï¼ˆEOFï¼‰ï¼Œclient è¿”å› : <code>str_cli: server terminated prematurely</code> - ç¨‹åºå®šä¹‰çš„å¹¶ç»“æŸ</p><p>å¦‚æœå…ˆæ”¶åˆ°äº† RSTï¼Œä¼šè¿”å› <code>ECONNRESET</code> - <code>connection reset by peer</code></p><p>RST ä¼šå› ä¸ºå¹¶æ²¡æœ‰ä¸è¯¥å®¢æˆ·ç«¯è¿æ¥ä½†æ˜¯æ¥æ”¶åˆ°è¯¥å®¢æˆ·ç«¯å‘é€çš„å†…å®¹è€Œè¢«æœåŠ¡å™¨å‘é€</p><h4 id="æœåŠ¡å™¨ä¸»æœºå´©æºƒ"><a href="#æœåŠ¡å™¨ä¸»æœºå´©æºƒ" class="headerlink" title="æœåŠ¡å™¨ä¸»æœºå´©æºƒ"></a>æœåŠ¡å™¨ä¸»æœºå´©æºƒ</h4><p>åŒä¸Šé¢ä¸åŒçš„æ˜¯ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼Œä¼šæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li>ä¸€ç›´æ²¡æœ‰å“åº” <code>ETIMEOUT</code></li><li>ä¸­é—´è·¯ç”±å™¨åˆ¤æ–­ä¸å¯è¾¾ï¼Œå“åº”ä¸€ä¸ª <code>destination unreachable</code> çš„ ICMPï¼Œè¿”å›çš„é”™è¯¯æ˜¯ <code>EHOSTUNREACH</code> æˆ– <code>ENETUNREACH</code></li></ul><h4 id="æœåŠ¡å™¨ä¸»æœºå´©æºƒåé‡å¯"><a href="#æœåŠ¡å™¨ä¸»æœºå´©æºƒåé‡å¯" class="headerlink" title="æœåŠ¡å™¨ä¸»æœºå´©æºƒåé‡å¯"></a>æœåŠ¡å™¨ä¸»æœºå´©æºƒåé‡å¯</h4><p>å½“æœåŠ¡å™¨ä¸»æœºå´©æºƒåé‡å¯æ—¶ï¼Œå®ƒçš„ TCP ä¸¢å¤±äº†å´©æºƒå‰çš„æ‰€æœ‰è¿æ¥ä¿¡æ¯ï¼Œå› æ­¤æœåŠ¡å™¨ TCP å¯¹äºæ‰€æ”¶åˆ°çš„æ¥è‡ªå®¢æˆ·çš„æ•°æ®åˆ†èŠ‚å“åº”ä»¥ä¸€ä¸ªRST</p><h4 id="æ•°æ®æ ¼å¼"><a href="#æ•°æ®æ ¼å¼" class="headerlink" title="æ•°æ®æ ¼å¼"></a>æ•°æ®æ ¼å¼</h4><p>æœåŠ¡å™¨è¯»å…¥æ¢è¡Œç¬¦ï¼Œæ‰€æœç´¢çš„åªæ˜¯æ¢è¡Œç¬¦</p><p>äºŒè¿›åˆ¶ : <code>sscanf</code> è½¬æ¢åˆ°ç»“æ„ä½“ binary ï¼Œå‘é€åï¼Œå¯¹æ–¹ä¹Ÿç”¨åŒæ ·çš„ç»“æ„ä½“æ¥æ”¶ã€‚</p><p>å¤§å°ç«¯ä¸åŒ ï¼Œ åŒæ · int å‹é•¿åº¦ä¸åŒï¼Œç»“æ„ä½“çš„æ‰“åŒ…æ–¹å¼ä¸åŒ éƒ½ä¼šå¯¼è‡´è´Ÿæ•°ä¸è¡Œï¼Œ</p><p>è§£å†³æ–¹æ³•ï¼š å‘é€ string ï¼Œ ç”¨ XDRï¼ˆexternal data representation) å‘é€</p><h2 id="Chapter-6"><a href="#Chapter-6" class="headerlink" title="Chapter 6"></a>Chapter 6</h2><h3 id="I-O-Model"><a href="#I-O-Model" class="headerlink" title="I/O Model"></a>I/O Model</h3><p>åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šç­‰å¾…å¯¹ç«¯å‘é€æ•°æ® ï¼Œå°†æ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·</p><ul><li>blocking: è°ƒç”¨æ¥æ”¶å‡½æ•°åå°±ä¸€ç›´ç­‰åˆ°ä¸¤æ­¥éƒ½å®Œæˆå†è¿”å›</li></ul><p><img src="https://s2.loli.net/2021/12/24/k7NsibMYlA4BnCG.jpg" alt=""></p><ul><li>Nonblocking: ç¬¬ä¸€é˜¶æ®µä¸æ–­å¾ªç¯ callï¼ŒçŸ¥é“æ”¶åˆ°å®Œæ•´åŒ…</li></ul><p><img src="https://s2.loli.net/2021/12/24/1Qs5ucmSPpXRVaD.jpg" alt=""></p><ul><li>Multiplexing: ç¬¬ä¸€æ­¥è°ƒç”¨ selectï¼Œç›´åˆ°è¿”å› readableï¼Œç„¶åè°ƒç”¨ recvfrom å®Œæˆç¬¬äºŒæ­¥<ul><li>å¥½å¤„: å¯ä»¥ç­‰å¾…å¤šä¸ªæè¿°ç¬¦</li></ul></li></ul><p><img src="https://s2.loli.net/2021/12/24/gFw2hGWOmPx1Mas.jpg" alt=""></p><ul><li>Signal-Driven: è°ƒç”¨åç«‹å³è¿”å›ï¼Œsignal handler ä¼šåœ¨ data å‡†å¤‡å¥½åå‘å‡ºä¿¡å·ï¼Œè°ƒç”¨ recvfrom å®Œæˆç¬¬äºŒæ­¥</li></ul><p><img src="https://s2.loli.net/2021/12/24/xACoPEYT3g4prwD.jpg" alt=""></p><ul><li>Asynchronous: å‘ŠçŸ¥å†…æ ¸å¯åŠ¨æŸä¸ªæ“ä½œï¼Œå¹¶è®©å†…æ ¸åœ¨ä¸¤æ­¥æ“ä½œå®Œæˆåé€šçŸ¥æˆ‘ä»¬</li></ul><p><img src="https://s2.loli.net/2021/12/24/NBrtk7uoz5AKxlc.jpg" alt=""></p><h3 id="select-å‡½æ•°"><a href="#select-å‡½æ•°" class="headerlink" title="select å‡½æ•°"></a>select å‡½æ•°</h3><p>å‘Šè¯‰å†…æ ¸ç­‰å¾…å¤šä¸ªäº‹ä»¶ï¼Œæœ‰äº‹ä»¶å‘ç”Ÿæˆ– Timeout åå”¤é†’ä»–</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/select.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">select</span><span class="params">(<span class="keyword">int</span> maxfdp1, fd_set *readset, fd_set *writeset, fd_set *exceptset,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">const</span> struct timeval *timeout)</span></span>;</span><br><span class="line">    Returns: positive count of ready descriptors, <span class="number">0</span> on timeout, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><ul><li><code>maxfdp1</code>: å¾…æµ‹è¯•çš„æœ€å¤§æè¿°ç¬¦å€¼ +1</li><li><code>set</code>: å‘Šè¯‰å†…æ ¸ what descriptors we are interested in ï¼Œä¸å…³å¿ƒè®¾ä¸ºç©ºï¼Œä¸‰ä¸ªå‚æ•°éƒ½æ˜¯ value-result ç±»å‹çš„ï¼Œè°ƒç”¨æ—¶ä¸ºå…³å¿ƒçš„æè¿°ç¬¦çš„å€¼ï¼Œè¿”å›æ—¶æŒ‡ç¤ºå“ªäº›æè¿°ç¬¦å·²å°±ç»ª<ul><li><code>readset</code>: Any of the descriptors in the readset are ready for reading</li><li><code>writeset</code>: Any of the descriptors in the writeset are ready for reading</li><li><code>exceptset</code>: Any of the descriptors in the exceptset have an exception condition pending</li></ul></li><li><code>timeout</code>: how long to wait - ä¿¡å·ä¸­æ–­ - ä¸å‡†<ul><li>è®¾ç½®ä¸ºç©º: æ°¸è¿œç­‰å¾…</li><li>å€¼: å›ºå®šæ—¶é—´</li><li>0: æ ¹æœ¬ä¸ç­‰å¾…- è½®è¯¢ï¼ˆpollingï¼‰</li></ul></li><li><code>Returns</code>: å°±ç»ªçš„æ•°ç›®ï¼Œtimeout=0ï¼Œerror=-1</li><li>è¿™æ˜¯ç³»ç»Ÿå‡½æ•°ï¼Œdescriptor å’Œ socket æ— å…³ï¼Œsocket å¯ä»¥ select ä»»æ„ descriptor</li><li>é”™è¯¯å¤„ç† - ä¸è€ƒ</li></ul><h4 id="fd-set-æ•°æ®ç»“æ„"><a href="#fd-set-æ•°æ®ç»“æ„" class="headerlink" title="fd_set æ•°æ®ç»“æ„"></a>fd_set æ•°æ®ç»“æ„</h4><p>æ¯ä¸€ä½ä»£è¡¨ä¸€ä¸ªæè¿°ç¬¦ï¼Œæ¯ä¸€bitä¸º</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FD_ZERO</span><span class="params">(fd_set *fdset)</span></span>;          <span class="comment">/* clear all bits in fdset */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FD_SET</span><span class="params">(<span class="keyword">int</span> fd, fd_set *fdset)</span></span>;   <span class="comment">/* turn on the bit for fd in fdset */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FD_CLR</span><span class="params">(<span class="keyword">int</span> fd, fd_set *fdset)</span></span>;   <span class="comment">/* turn off the bit for fd in fdset */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">FD_ISSET</span><span class="params">(<span class="keyword">int</span> fd, fd_set *fdset)</span></span>;  <span class="comment">/* is the bit for fd on in fdset ? */</span></span><br></pre></td></tr></table></figure><ul><li>åˆ©ç”¨ <code>FD_ZERO</code> è¿›è¡Œåˆå§‹åŒ–ååˆ†é‡è¦ï¼Œå› ä¸ºæ˜¯ value-result å€¼ä¼šå˜åŒ–</li><li><code>FD_SETSIZE</code>: 1024</li></ul><h4 id="è¯»-ready-çš„æ¡ä»¶"><a href="#è¯»-ready-çš„æ¡ä»¶" class="headerlink" title="è¯» ready çš„æ¡ä»¶"></a>è¯» ready çš„æ¡ä»¶</h4><ul><li>æ”¶åˆ°çš„æ•°æ®é«˜äº low-water ä½æ°´ä½äº†</li><li>è¿æ¥å…³é—­äº†ï¼Œread è¿”å› 0 ï¼ˆEOFï¼‰</li><li>æ˜¯ç›‘å¬å¥—æ¥å­—ï¼Œä¸”æœ‰å·²å®Œæˆçš„è¿æ¥ ï¼Ÿ</li><li>å¥—æ¥å­—æœ‰é”™è¯¯å¾…å¤„ç†ï¼Œè¿”å› -1 ï¼Œ errno è®¾ç½®æˆç¡®åˆ‡çš„é”™è¯¯æ¡ä»¶</li></ul><h4 id="å†™-ready-çš„æ¡ä»¶"><a href="#å†™-ready-çš„æ¡ä»¶" class="headerlink" title="å†™ ready çš„æ¡ä»¶"></a>å†™ ready çš„æ¡ä»¶</h4><ul><li>å·²è¿æ¥ï¼ˆudpä¸éœ€è¦ï¼‰ï¼Œå¯å†™ç©ºé—´è¶…è¿‡ low-water</li><li>å†™åŠè¾¹å…³é—­äº† ï¼ˆæœ‰æœªå®Œæˆå‘é€çš„æ•°æ®ï¼Œè¦å‘é€å‡ºå»ï¼‰</li><li>non-blocking connect å»ºç«‹äº†è¿æ¥æˆ–å¤±è´¥äº†</li><li>å¥—æ¥å­—æœ‰é”™è¯¯å¾…å¤„ç†ï¼Œè¿”å› -1 ï¼Œ errno è®¾ç½®æˆç¡®åˆ‡çš„é”™è¯¯æ¡ä»¶</li></ul><h4 id="exceptiong-ready"><a href="#exceptiong-ready" class="headerlink" title="exceptiong ready"></a>exceptiong ready</h4><p>å¦‚æœä¸€ä¸ªå¥—æ¥å­—å­˜åœ¨å¸¦å¤–æ•°æ®æˆ–è€…ä»å¤„äºå¸¦å¤–æ ‡è®°ï¼Œé‚£ä¹ˆå®ƒæœ‰å¼‚å¸¸æ¡ä»¶å¾…å¤„ç†</p><h3 id="str-cli"><a href="#str-cli" class="headerlink" title="str_cli"></a>str_cli</h3><p>é˜»å¡åœ¨ selectï¼Œå°†åŸæœ¬çš„å¾…å‰åé¡ºåºçš„é˜»å¡ï¼Œå˜æˆåŒæ—¶çš„é˜»å¡</p><h3 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h3><p>ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªFINï¼Œå‘Šè¯‰å®ƒæˆ‘ä»¬å·²ç»å®Œæˆäº†æ•°æ®å‘é€ï¼Œä½†æ˜¯ ä»ç„¶ä¿æŒå¥—æ¥å­—æè¿°ç¬¦æ‰“å¼€ä»¥ä¾¿è¯»å–</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">shutdown</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> howto)</span></span>;</span><br><span class="line">                    Returns: <span class="number">0</span> <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><ul><li>ä¸åŠ¨å¼•ç”¨è®¡æ•°å°±æ¿€å‘ TCP çš„æ­£å¸¸è¿æ¥ç»ˆæ­¢åºåˆ—</li><li>close ç»ˆæ­¢è¯»å’Œå†™ä¸¤ä¸ªæ–¹å‘çš„æ•°æ®ä¼ é€ï¼Œshutdown è¿˜å¯ä»¥ç»§ç»­è¯»</li><li>ä¸‰ç§å¯é€‰é¡¹<ul><li><code>SHUT_RD</code>: å…³é—­è¿æ¥çš„è¯»è¿™ä¸€åŠ</li><li><code>SHUT_WR</code>: å…³é—­è¿æ¥çš„å†™è¿™ä¸€åŠ</li><li><code>SHUT_RDWR</code>: è¿æ¥çš„è¯»åŠéƒ¨å’Œå†™åŠéƒ¨éƒ½å…³é—­</li></ul></li></ul><h3 id="str-cli-pipelineç‰ˆ"><a href="#str-cli-pipelineç‰ˆ" class="headerlink" title="str_cli pipelineç‰ˆ"></a>str_cli pipelineç‰ˆ</h3><p>åŠ å…¥ shutdownï¼Œæ¨¡æ‹Ÿå…ˆè¿ç»­å‘é€æ•°æ®ï¼Œå…³é—­å†™åŠéƒ¨ï¼Œç„¶åå†è¿ç»­æ¥æ”¶è¿”å›æ•°æ®çš„ pipeline æ“ä½œ</p><h3 id="TCP-echo-ç¨‹åº-select-ç‰ˆ"><a href="#TCP-echo-ç¨‹åº-select-ç‰ˆ" class="headerlink" title="TCP echo ç¨‹åº- select ç‰ˆ"></a>TCP echo ç¨‹åº- select ç‰ˆ</h3><p>client æ•°ç»„å­˜å‚¨å·²è¿æ¥ accept æè¿°ç¬¦çš„å€¼</p><p>çœå»äº† fork æ–°è¿›ç¨‹çš„å¼€é”€</p><p>rset æ•°ç»„ä¿å­˜ 0-stdinï¼Œ1-stdoutï¼Œ2-stderr ï¼Œ3â€“éƒ½æ˜¯å·²è¿æ¥æè¿°ç¬¦</p><ul><li>å®¢æˆ·å‘é€ FINï¼Œ4 å˜ä¸ºå¯è¯» read å°†è¿”å› 0ã€‚å…³é—­è¯¥å¥—æ¥å­—å¹¶æŠŠ <code>client[0]</code> çš„å€¼ç½®ä¸º -1ï¼ŒæŠŠæè¿°ç¬¦é›†ä¸­æè¿°ç¬¦ 4 çš„ä½è®¾ç½®ä¸º 0ã€‚æ³¨æ„ï¼Œ<strong>maxfd çš„å€¼æ²¡æœ‰æ”¹å˜</strong></li></ul><h2 id="Chapter-7"><a href="#Chapter-7" class="headerlink" title="Chapter 7"></a>Chapter 7</h2><h3 id="sockopt-å‡½æ•°"><a href="#sockopt-å‡½æ•°" class="headerlink" title="_sockopt å‡½æ•°"></a>_sockopt å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getsockopt</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> level, <span class="keyword">int</span> optname, <span class="keyword">void</span> *optval, <span class="keyword">socklen_t</span> *optlen)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">setsockopt</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">int</span> level, <span class="keyword">int</span> optname, <span class="keyword">const</span> <span class="keyword">void</span> *optval, <span class="keyword">socklen_t</span> optlen)</span></span>;</span><br><span class="line">                                    Both <span class="keyword">return</span>: <span class="number">0</span> <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><ul><li>sockfd ï¼š æ‰“å¼€çš„å¥—æ¥å­—æè¿°ç¬¦</li><li>level ï¼šæŒ‡ä»£ç³»ç»Ÿä¸­è§£é‡Šè¯¥é€‰é¡¹çš„ä»£ç </li><li>optval ï¼šå­˜å‚¨ option çš„æ•°æ®ç»“æ„ - æ˜¯æ ‡å¿— 0 ä¸ºä¸å¯ç”¨ï¼Œå€¼ä¸ºå¯ç”¨</li><li>optlen ï¼šé•¿åº¦ - value-result</li></ul><p>sockopt :æŒæ¡ 7.2 åŸç† - SO_LINGER / SO_KEEPALIVE / SO_DONTROUTE</p><h3 id="SO-KEEPALIVE"><a href="#SO-KEEPALIVE" class="headerlink" title="SO_KEEPALIVE"></a>SO_KEEPALIVE</h3><p>ä¿æ´»</p><h3 id="SO-LINGER-ï¼Ÿ"><a href="#SO-LINGER-ï¼Ÿ" class="headerlink" title="SO_LINGER ï¼Ÿ"></a>SO_LINGER ï¼Ÿ</h3><p>å…³é—­ close æ—¶æ˜¯å¦ä¸¢å¼ƒä¿ç•™åœ¨å¥—æ¥å­—å‘é€ç¼“å†²åŒºä¸­çš„ä»»ä½•æ•°æ®ï¼Œ</p><p>è®¾ç½®æ­£çš„å»¶æ»æ—¶é—´</p><h3 id="SO-DONTROUTE"><a href="#SO-DONTROUTE" class="headerlink" title="SO_DONTROUTE"></a>SO_DONTROUTE</h3><p>æ˜¯å¦ç»•è¿‡ä¸‹å±‚åè®®çš„è·¯ç”±æœºåˆ¶</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP : IP_HDRINCL / IP_TTL </span><br></pre></td></tr></table></figure><h3 id="IP-HDRINCL"><a href="#IP-HDRINCL" class="headerlink" title="IP_HDRINCL"></a>IP_HDRINCL</h3><p>è®¾ç½®äº†å°±éœ€è¦è‡ªå·±æ„å»ºIPå¤´</p><h3 id="IP-TTL"><a href="#IP-TTL" class="headerlink" title="IP_TTL"></a>IP_TTL</h3><p>è®¾ç½®å’Œè·å–ç³»ç»Ÿç”¨åœ¨ä»æŸä¸ªç»™å®šå¥—æ¥å­—çš„é»˜è®¤ TTL å€¼</p><h3 id="TCP-TCP-MAXSEG"><a href="#TCP-TCP-MAXSEG" class="headerlink" title="TCP : TCP_MAXSEG"></a>TCP : TCP_MAXSEG</h3><p>å…è®¸æˆ‘ä»¬è·å–æˆ–è®¾ç½®TCPè¿æ¥çš„æœ€å¤§åˆ†èŠ‚å¤§å°</p><p>SYNä¸­é€šå‘Šçš„MSS</p><h2 id="Chapter-8"><a href="#Chapter-8" class="headerlink" title="Chapter 8"></a>Chapter 8</h2><p>8.1 å›¾ï¼Œå¹¶å‘ç¨‹åºè®¾è®¡ - é‡ç‚¹æ³¨æ„åŒºåˆ«</p><p><code>sendto()</code> <code>recvfrom()</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">recvfrom</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">void</span> *buff, <span class="keyword">size_t</span> nbytes, <span class="keyword">int</span> flags,</span></span></span><br><span class="line"><span class="function"><span class="params">                    struct sockaddr *from, <span class="keyword">socklen_t</span> *addrlen)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">sendto</span><span class="params">(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">void</span> *buff, <span class="keyword">size_t</span> nbytes, <span class="keyword">int</span> flags,</span></span></span><br><span class="line"><span class="function"><span class="params">                    <span class="keyword">const</span> struct sockaddr *to, <span class="keyword">socklen_t</span> addrlen)</span></span>;</span><br><span class="line">            Both <span class="keyword">return</span>: number of bytes read <span class="keyword">or</span> written <span class="keyword">if</span> OK, âˆ’<span class="number">1</span> on error</span><br></pre></td></tr></table></figure><p>echo ç¨‹åº</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Socket(AF_INET, SOCK_DGRAM, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><h3 id="æœåŠ¡å™¨è¿›ç¨‹æœªè¿è¡Œ"><a href="#æœåŠ¡å™¨è¿›ç¨‹æœªè¿è¡Œ" class="headerlink" title="æœåŠ¡å™¨è¿›ç¨‹æœªè¿è¡Œ"></a>æœåŠ¡å™¨è¿›ç¨‹æœªè¿è¡Œ</h3><p>è¿”å› ICMP å¼‚æ­¥é”™è¯¯</p><p>sendto æˆåŠŸè¿”å›ä»…è¡¨ç¤ºæ¥å£è¾“å‡ºé˜Ÿåˆ—ä¸­æœ‰å­˜æ”¾æ•°æ®æŠ¥çš„ç©ºé—´</p><p>ä»…åœ¨è¿›ç¨‹å·²å°†å…¶ UDP å¥—æ¥å­—è¿æ¥åˆ°ä¸€ä¸ªå¯¹ç«¯åï¼Œè¿™äº›å¼‚æ­¥é”™è¯¯æ‰è¿”å›ç»™è¿›ç¨‹</p><h3 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h3><ul><li>ä¸éœ€è¦å†æŒ‡å®šç›®çš„ IP å’Œç«¯å£å·</li><li>ä¸ç”¨ recvfrom ç”¨ read å°±è¡Œ</li><li>è¿”å›å¼‚æ­¥é”™è¯¯</li></ul><h2 id="Chapter-11"><a href="#Chapter-11" class="headerlink" title="Chapter 11"></a>Chapter 11</h2><p>ç®€å•å‰é¢éƒ¨åˆ† DNS æ“ä½œ 11.3ã€11.4ã€11.5</p><p>ä½¿ç”¨ UDP æŸ¥è¯¢ï¼Œå¦‚æœç­”æ¡ˆå¤ªé•¿ï¼Œè¶…å‡ºäº† UDP æ‰¿è½½èƒ½åŠ›ï¼Œæ¢æˆ TCP</p><h3 id="gethostbyname"><a href="#gethostbyname" class="headerlink" title="gethostbyname"></a>gethostbyname</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="function">struct hostent *<span class="title">gethostbyname</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *hostname)</span></span>;</span><br><span class="line">            Returns: non-null pointer <span class="keyword">if</span> OK, <span class="literal">NULL</span> on error with h_errno <span class="built_in">set</span></span><br></pre></td></tr></table></figure><p>åªèƒ½è¿”å› ipv4ï¼Œgetaddrinfo èƒ½å¤Ÿå¤„ç† 4 å’Œ 6</p><h3 id="gethostbyaddr"><a href="#gethostbyaddr" class="headerlink" title="gethostbyaddr"></a>gethostbyaddr</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="function">struct hostent *<span class="title">gethostbyaddr</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *addr, <span class="keyword">socklen_t</span> len, <span class="keyword">int</span> family)</span></span>;</span><br><span class="line">            Returns: non-null pointer <span class="keyword">if</span> OK, <span class="literal">NULL</span> on error with h_errno <span class="built_in">set</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="function">struct servent *<span class="title">getservbyname</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *servname, <span class="keyword">const</span> <span class="keyword">char</span> *protoname)</span></span>;</span><br><span class="line">Returns: non-null pointer <span class="keyword">if</span> OK, <span class="literal">NULL</span> on erro</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="function">struct servent *<span class="title">getservbyport</span><span class="params">(<span class="keyword">int</span> port, <span class="keyword">const</span> <span class="keyword">char</span> *protoname)</span></span>;</span><br><span class="line">Returns: non-null pointer <span class="keyword">if</span> OK, <span class="literal">NULL</span> on error</span><br></pre></td></tr></table></figure><h2 id="Part-3-Advanced-Sockets"><a href="#Part-3-Advanced-Sockets" class="headerlink" title="Part 3 Advanced Sockets"></a>Part 3 Advanced Sockets</h2><p>12ï¼Œ13ï¼Œ14ï¼Œ15 ï¼Œ17ï¼Œ18.5,20,21,22,23,24ï¼Œ30ï¼Œ31ä¸è€ƒ Daemon Process äº†è§£ä¸€ä¸‹</p><p>19 Introduction</p><p>ç‰¹æƒ SA ï¼Œ SADB</p><p>25 æŒæ¡ï¼Œç»“åˆç¬¬ 5 ç« çœ‹</p><p>26 æŒæ¡ åŸºæœ¬æ¦‚å¿µï¼Œçº¿ç¨‹å’Œè¿›ç¨‹åŒºåˆ«</p><p>27 ç»“åˆå‰é¢çš„ Options ä¸€èµ·çœ‹ï¼Œç®€å•çœ‹çœ‹ã€‚</p><p>28 é‡ç‚¹æŒæ¡</p><p>è¯»å†™ICMPï¼Œè¯»å†™éå†…æ ¸å¤„ç†çš„åè®®æ®µçš„æ•°æ®æŠ¥ï¼Œæ„å»ºipé¦–éƒ¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sockfd = socket(AF_INET, SOCK_RAW, protocol)</span><br><span class="line"><span class="comment">// ä¾‹ ï¼š protocol IPPROTO_ICMP</span></span><br><span class="line"><span class="comment">// å¼€å¯ IP_HDRINCL</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> on = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (setsockopt(sockfd, IPPROTO_IP, IP_HDRINCL, &amp;on, <span class="keyword">sizeof</span>(on)) &lt; <span class="number">0</span>)</span><br><span class="line"><span class="comment">// å‡ºé”™å¤„ç†</span></span><br></pre></td></tr></table></figure><p>29 æŒæ¡ åŸºæœ¬æ¦‚å¿µï¼Œå¦‚ä½•æŠ“åŒ…</p><p>libpcap å…¬å¼€åˆ†ç»„æ•è·å‡½æ•°åº“</p><p>A.3 C.1 netstat tcpdump</p><p>ç®€ç­”é¢˜ï¼ˆè§£é‡Šåè¯ï¼‰ ï¼Œ ç¼–ç¨‹é¢˜ï¼ˆè¡¥å……å°çš„ç‰‡æ®µï¼‰ä¸Šæœº+ä¸Šè¯¾ ï¼Œ å®éªŒåˆ†æé¢˜ï¼ˆåˆ†æå®éªŒçš„ç»“æœï¼‰ä¾‹å¦‚ï¼š æœåŠ¡ç«¯æ²¡èµ·æ¥ æŠ¥ä»€ä¹ˆé”™è¯¯</p><p>æœ€å¼€å§‹ é‚£ä¸ª å¸¦å‡½æ•°çš„å‡½æ•°</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>P180ï¼ŒP165ï¼ŒLINGER çš„æ„æ€æ˜¯ä»€ä¹ˆ</p><p>ioctl å®ç° sockopt è¿›è¡Œè¯»å†™æ“ä½œ - äº†è§£åŠŸèƒ½</p><p>å‡½æ•°åŸå‹ ï¼š åå­— + å‚æ•°</p><p>ping ï¼Œ recvmsg å¦‚æœè¢«ä¸­æ–­ <code>EINTR</code>ï¼Œcontinue é‡æ–°æ‰§è¡Œï¼Œå‡½æ•°é‡å¯</p><p>5.10 wait / waitpid è¦æ±‚</p><p>server ï¼Œ server host æƒ…å†µ</p><p>raw socket é€‚ç”¨äºä»€ä¹ˆæƒ…å†µ routing ã€key</p><p>29 introduction</p><p>ä¿¡å·å¤„ç†å‡½æ•° 5 ç«  signal handler</p><p>signal driven ä¸è¦æ±‚</p><p>tcpå‡½æ•°çš„é¡ºåºå›¾</p>          </div>]]></content>
    
    <summary type="html">
    
      Base on Copyright (c) Dingsoul&lt;br&gt;Link: https://dingiso.github.io/2021/03/13/UNIX%20%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%A4%8D%E4%B9%A0/
    
    </summary>
    
    
    
      <category term="NOTE" scheme="https://augists.top/tags/NOTE/"/>
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>Slice Growth in Golang</title>
    <link href="https://augists.top/NOTES/CODE_LANGUAGE/GOLANG/Slice-Growth-in-Golang/"/>
    <id>https://augists.top/NOTES/CODE_LANGUAGE/GOLANG/Slice-Growth-in-Golang/</id>
    <published>2021-11-21T15:45:42.000Z</published>
    <updated>2021-11-21T16:09:23.543Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>å‰ä¸¤å¤©åœ¨çœ‹ã€ŠGOç¨‹åºè®¾è®¡è¯­è¨€ã€‹çš„å…³äº Slice çš„ä»£ç çš„æ—¶å€™äº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼Œä¹¦é‡Œçš„ä»£ç å¦‚ä¸‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// gopl.io/ch4/append</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">appendInt</span><span class="params">(x []<span class="keyword">int</span>, y <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> z []<span class="keyword">int</span></span><br><span class="line">  zlen := <span class="built_in">len</span>(x) + <span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> zlen &lt;= <span class="built_in">cap</span>(x) &#123;</span><br><span class="line">    z = x[:zlen]</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    zcap := zlen</span><br><span class="line">    <span class="keyword">if</span> zcap &lt; <span class="number">2</span>*<span class="built_in">len</span>(x) &#123;</span><br><span class="line">      zcap = <span class="number">2</span> * <span class="built_in">len</span>(x)</span><br><span class="line">    &#125;</span><br><span class="line">    z = <span class="built_in">make</span>([]<span class="keyword">int</span>, zlen, zcap)</span><br><span class="line">    <span class="built_in">copy</span>(z, x)</span><br><span class="line">  &#125;</span><br><span class="line">  z[<span class="built_in">len</span>(x)] = y</span><br><span class="line">  <span class="keyword">return</span> z</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªå½“å¯¹åˆ‡ç‰‡ä½¿ç”¨ append æ·»åŠ æ—¶è¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹çš„æ“ä½œï¼Œå°½ç®¡è¿™æ˜¯ä¹¦ä¸­çš„ä»£ç ï¼Œä½†æ˜¯å®ƒå¯èƒ½å’Œæºç ç¨æœ‰å·®åˆ«<br>æˆ‘ä»ç½‘ä¸ŠæŸ¥è¯¢åˆ°çš„æºç å¦‚ä¸‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">growslice</span><span class="params">(et *_type, old slice, <span class="built_in">cap</span> <span class="keyword">int</span>)</span> <span class="title">slice</span></span> &#123;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">    newcap := old.<span class="built_in">cap</span></span><br><span class="line">    doublecap := newcap + newcap</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">cap</span> &gt; doublecap &#123;</span><br><span class="line">        newcap = <span class="built_in">cap</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> old.<span class="built_in">len</span> &lt; <span class="number">1024</span> &#123;</span><br><span class="line">            newcap = doublecap</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> newcap &lt; <span class="built_in">cap</span> &#123;</span><br><span class="line">                newcap += newcap / <span class="number">4</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">    <span class="comment">//å†…å­˜å¯¹é½æ“ä½œ</span></span><br><span class="line">    capmem = roundupsize(<span class="keyword">uintptr</span>(newcap) * ptrSize)</span><br><span class="line">    newcap = <span class="keyword">int</span>(capmem / ptrSize)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æˆ‘åœ¨æƒ³ï¼Œä¸ºä»€ä¹ˆå®ƒéœ€è¦å»åˆ¤æ–­ä¸€ä¸‹ <code>zcap &lt; 2*len(x)</code>ï¼Œè€Œä¸æ˜¯ç›´æ¥èµ‹å€¼å‘¢<br>å…¶å®å½“æ—¶æƒ³çš„æ—¶å€™æ¼æ‰äº† <code>len(x) == 0</code> çš„æƒ…å†µ<br>å¦‚æœ <code>len(x)</code> ä¸ºå¤§äºç­‰äº 1 çš„æ­£æ•´æ•°æ—¶ï¼Œæ— è®ºå¦‚ä½• <code>zcap &lt;= 2*len(x)</code><br>å¦‚æœ <code>len(x)</code> ä¸º 0 æ—¶ï¼Œå°±éœ€è¦è®©æ–°çš„å®¹é‡ç­‰äº <code>zcap == zlen == len(x) + 1 == 1</code></p><p>é‚£ä¹ˆæ­¤æ—¶å°±ä¼šäº§ç”Ÿä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>ä¸ºä»€ä¹ˆä¸ç›´æ¥é‡‡ç”¨ <code>zcap = 2*len(x) + 1</code>ï¼Œå¦‚æ­¤çœå»åˆ¤æ–­æ­¥éª¤</li><li>ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ¤æ–­æ˜¯å¦ <code>len(x) == 0</code>ï¼Œè€Œæ˜¯åˆ¤æ–­ <code>zcap &lt; 2*len(x)</code></li></ol><p>å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œè¿™æ¶‰åŠåˆ°å†…å­˜å¯¹é½æ“ä½œã€‚å°½ç®¡åœ¨ä»¥å‰çš„ C Family è¯­è¨€å­¦ä¹ å’Œè®¡ç®—æœºç»„æˆåŸç†è¯¾ç¨‹ä¸­å­¦ä¹ è¿‡ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è¿ç§»åˆ° Go è¿™é‡Œæ¥æ€è€ƒé—®é¢˜<br>è¿™é‡Œæ¨èæˆ‘çœ‹åˆ°çš„ä¸€ç¯‡<a href="https://www.jianshu.com/p/f035a22e094d">æ–‡ç« </a>ï¼Œæˆ‘é€šè¿‡è¿™ç¯‡é‡æ–°å­¦ä¹ äº† Go è¯­è¨€ä¸­çš„å†…å­˜å¯¹é½</p><p>å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘åˆ°ç°åœ¨ä¹Ÿæ²¡æœ‰ get åˆ°åŸå› ã€‚æŒ‰ç†è¯´è¿™æœ¬ä¹¦æ˜¯ç”±åˆ›å§‹äººç¼–å†™çš„ï¼Œä¾ç…§åœ¨ã€ŠCç¨‹åºè®¾è®¡è¯­è¨€ã€‹ä¸­çš„ä¸¥è°¨ç¨‹åº¦ï¼Œè¿™é‡Œåº”è¯¥ä¼šæœ‰ä»€ä¹ˆç‰¹åˆ«çš„ç”¨æ„ã€‚ä½†æ˜¯æˆ‘æƒ³å¦‚æœåªåˆ¤æ–­ <code>len(x) == 0</code> åœ¨æ“ä½œåŠæ—¶é—´ä¸Šéƒ½è¦å¥½äºä¹¦ä¸­çš„ç¤ºä¾‹ä»£ç ã€‚æ­¤å¤„ä»ç„¶ç•™æœ‰ç–‘é—®</p>          </div>]]></content>
    
    <summary type="html">
    
      A Question while reading the book *Go Programming Language*
    
    </summary>
    
    
    
      <category term="NOTE" scheme="https://augists.top/tags/NOTE/"/>
    
      <category term="GOLANG" scheme="https://augists.top/tags/GOLANG/"/>
    
  </entry>
  
  <entry>
    <title>Get Root Privilege in Linux by Docker or Dirty COW</title>
    <link href="https://augists.top/SELF/SHARING/STUDY/Get-Root-Privilege-in-Linux-by-Docker-or-Dirty-COW/"/>
    <id>https://augists.top/SELF/SHARING/STUDY/Get-Root-Privilege-in-Linux-by-Docker-or-Dirty-COW/</id>
    <published>2021-11-15T08:41:59.000Z</published>
    <updated>2021-11-15T08:44:30.944Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <div class="note info">            <p>è®¡ç®—æœºç—…æ¯’å…¥ä¾µä¸æ£€æµ‹è¯¾ç¨‹å¤§ä½œä¸š</p>          </div><h1 id="Docker-å’Œ-DirtyCow-ä¸¤ç§æ–¹å¼çš„-Linux-ææƒ"><a href="#Docker-å’Œ-DirtyCow-ä¸¤ç§æ–¹å¼çš„-Linux-ææƒ" class="headerlink" title="Docker å’Œ DirtyCow ä¸¤ç§æ–¹å¼çš„ Linux ææƒ"></a>Docker å’Œ DirtyCow ä¸¤ç§æ–¹å¼çš„ Linux ææƒ</h1><h2 id="Docker-ç”¨æˆ·ç»„åŠæœ¬åœ°æ˜ å°„"><a href="#Docker-ç”¨æˆ·ç»„åŠæœ¬åœ°æ˜ å°„" class="headerlink" title="Docker ç”¨æˆ·ç»„åŠæœ¬åœ°æ˜ å°„"></a>Docker ç”¨æˆ·ç»„åŠæœ¬åœ°æ˜ å°„</h2><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>Docker ä½œä¸ºè¿‘å¹´æ¥å…´èµ·çš„æŠ€æœ¯ç»å¸¸è¢«æå®¢ä»¬çƒ­è®®ã€‚ä½œä¸ºå®¹å™¨åŒ–æ€æƒ³çš„å…¸å‹ä»£è¡¨ï¼Œå®ƒä¸è™šæ‹Ÿæœºç±»ä¼¼ï¼Œä½†åœ¨åŸç†ä¸Šä¸å°½ç›¸åŒã€‚Docker æ˜¯å°†æ“ä½œç³»ç»Ÿåº•å±‚è¿›è¡Œè™šæ‹ŸåŒ–ï¼Œè€Œè™šæ‹Ÿæœºæ˜¯å¯¹è®¡ç®—æœºç¡¬ä»¶è¿›è¡Œè™šæ‹Ÿï¼Œå¦‚é€šè¿‡è½¯ä»¶è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶è®¾å¤‡æä¾›ç»™è™šæ‹Ÿæœºç¨‹åºè¿›è¡Œä½¿ç”¨ã€‚å¯ä»¥è¯´ï¼Œåœ¨å®ç°æ€è·¯ä¸Šï¼Œä¸¤è€…å°±æœ‰å¤©ç„¶çš„å·®å¼‚æ€§ã€‚ç”±äº Docker å¯ä»¥åªæ„é€ å•ä¸€è½¯ä»¶æ‰€éœ€è¦çš„ç¯å¢ƒï¼Œæˆ–æ˜¯ç›´æ¥ä½¿ç”¨æ“ä½œç³»ç»Ÿæœ¬åœ°è¿›è¡Œæ–‡ä»¶æ˜ å°„ï¼Œæ‰€ä»¥ç›¸æ¯”äºè™šæ‹Ÿæœºæ¥è¯´ï¼ŒDocker æ›´ä¾¿æºã€é«˜æ•ˆã€‚å®ƒå…è®¸ç”¨æˆ·å°†åŸºç¡€è®¾æ–½ä¸­çš„åº”ç”¨å•ç‹¬åˆ†å‰²å‡ºæ¥ï¼Œå½¢æˆæ›´å°çš„é¢—ç²’ï¼ˆå®¹å™¨ï¼‰ï¼Œä»è€Œæé«˜äº¤ä»˜è½¯ä»¶çš„é€Ÿåº¦ã€‚</p><p>Docker åˆ©ç”¨ Linux æ ¸å¿ƒä¸­çš„èµ„æºåˆ†ç¦»æœºåˆ¶ï¼Œä¾‹å¦‚ cgroupsï¼Œä»¥åŠ Linux æ ¸å¿ƒ namespaceï¼Œæ¥åˆ›å»ºç‹¬ç«‹çš„å®¹å™¨ã€‚è¿™å¯ä»¥åœ¨å•ä¸€ Linux å®ä½“ä¸‹è¿ä½œï¼Œé¿å…å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœºé€ æˆçš„é¢å¤–è´Ÿæ‹…ã€‚Linux æ ¸å¿ƒå¯¹åå­—ç©ºé—´çš„æ”¯æŒå®Œå…¨éš”ç¦»äº†å·¥ä½œç¯å¢ƒä¸­åº”ç”¨ç¨‹åºçš„è§†é‡ï¼ŒåŒ…æ‹¬è¡Œç¨‹æ ‘ã€ç½‘ç»œã€ç”¨æˆ· ID ä¸æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ ¸å¿ƒçš„ cgroup æä¾›èµ„æºéš”ç¦»ï¼ŒåŒ…æ‹¬ CPUã€å­˜å‚¨å™¨ã€block I/O ä¸ç½‘ç»œã€‚ä» 0.9 ç‰ˆæœ¬èµ·ï¼ŒDocker åœ¨ä½¿ç”¨æŠ½è±¡è™šæ‹Ÿæ˜¯ç»ç”± <code>libvirt</code> çš„ <code>LXC</code> ä¸ <code>systemd - nspawn</code> æä¾›ç•Œé¢çš„åŸºç¡€ä¸Šï¼Œå¼€å§‹åŒ…æ‹¬ <code>libcontainer</code> åº“åšä¸ºä»¥è‡ªå·±çš„æ–¹å¼å¼€å§‹ç›´æ¥ä½¿ç”¨ç”± Linux æ ¸å¿ƒæä¾›çš„è™šæ‹ŸåŒ–çš„è®¾æ–½ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä½¿ç”¨ Docker ä¸ä½¿ç”¨å®‰è£…åŒ…ã€‚å½“æƒ³è¦å‘å¸ƒä¸€æ¬¾è½¯ä»¶æ—¶ï¼Œæˆ‘ä»¬å‡è®¾è½¯ä»¶æ˜¯åœ¨ python 3.7 ç‰ˆæœ¬è¿›è¡Œäº†æµ‹è¯•ï¼Œè€Œå¼€å‘è€…å¹¶ä¸ç¡®å®šå®ƒæ˜¯å¦åœ¨å…¶ä»–è¯¸å¦‚æœ€æ–°çš„ 3.10 æˆ–æ˜¯è¾ƒè€çš„ç‰ˆæœ¬ä¸­æ˜¯å¦ä¹Ÿå¯ä»¥åƒè‡ªå·±åœ¨ python 3.7 ç‰ˆæœ¬ä¸­è¿è¡Œä¸€æ ·ç¨³å®šã€‚å¦‚æœæ˜¯ä¸€ä¸ªè¾ƒä¸ºæ¿€è¿›çš„å¼€å‘è€…ï¼Œå¯èƒ½ä¼šé€‰æ‹©ä¼˜å…ˆæ£€æµ‹ç”¨æˆ·ç”µè„‘ä¸­çš„ç¯å¢ƒå˜é‡é‡Œæ˜¯å¦å·²ç»å®‰è£…äº† python 3ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥å®‰è£…æ‰“åŒ…åçš„è½¯ä»¶éƒ¨åˆ†ã€‚å¦‚æœæ˜¯ä¸€ä¸ªç¨³å¦¥çš„å¼€å‘è€…ï¼Œæ›´å¯èƒ½é€‰æ‹©å°† python 3.7 ä¸è½¯ä»¶ä¸€åŒæ‰“åŒ…ç»™ç”¨æˆ·è¿›è¡Œä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥ä¿è¯è½¯ä»¶åŸºæœ¬èƒ½å¤Ÿæ­£å¸¸ç¨³å®šçš„ä¸å¼€å‘è€…ç›¸åŒç¯å¢ƒä¸‹è¿è¡Œï¼Œä½†ä¸æ˜¯ç»å¯¹ï¼Œæ¯ä¸ªäººçš„æ“ä½œç³»ç»Ÿä¹Ÿå¤§ä¸ç›¸åŒï¼Œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œæ‰“çš„è¡¥ä¸éƒ½å¯èƒ½ä¸ä¸€æ ·ï¼Œè¿™æ ·å¤šå¤æ‚çš„å› ç´ éƒ½å¯èƒ½å¯¼è‡´è½¯ä»¶åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å´©æºƒï¼Œä¸å¼€å‘è€…çš„æµ‹è¯•ç¯å¢ƒä¸ä¸€è‡´ï¼Œè¿™å°±ä¼šå¯¼è‡´å„ç§ç¯å¢ƒé—®é¢˜ã€‚åˆæˆ–è€…ï¼Œå½“å›¢é˜Ÿåœ¨å¼€å‘è‡ªå·±çš„è½¯ä»¶æ—¶ï¼Œæ¯ä¸ªäººçš„ç¼–å†™ç¯å¢ƒä¸åŒï¼Œå®‰è£…çš„ä¾èµ–ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚ä¸ºäº†æ–¹ä¾¿è½¯ä»¶åœ¨å¼€å‘è€…ä¸ç”¨æˆ·ä¹‹é—´èƒ½æœ‰ç›¸åŒæˆ–ç›¸ä¼¼çš„è¿è¡Œç¯å¢ƒï¼Œè§£å†³å›¢é˜Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„ä¾èµ–é—®é¢˜ï¼ŒDocker å°†ä»–ä»¬èå…¥ Dockerfile è¿›è¡Œç®¡ç†ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿç¡®ä¿ç”¨æˆ·ä½¿ç”¨æ—¶ <code>pull</code> äº†å¼€å‘è€…é€‰æ‹©æˆ–è€…ç›¸åŒçš„ <code>image</code>ï¼Œä»è€Œä¿è¯æˆ–é¿å…ä¸€äº›å› ä¸ºç¯å¢ƒå’Œä¾èµ–å¯¼è‡´çš„é—®é¢˜ã€‚</p><p>åœ¨ Docker çš„å®˜ç½‘ä¸Šï¼ŒDocker å›¢é˜Ÿæå‡ºäº†è‡ªå·±çš„ slogan: Accelerate how you build, share, and run modern applicationsã€‚Docker å¯ä»¥è®©å¼€å‘å˜å¾—æ›´åŠ é«˜æ•ˆï¼Œå¹¶èƒ½å¯¹ä¸€äº›é—®é¢˜æå‰é¢„çŸ¥ã€‚é€šè¿‡å°†å¼€å‘å·¥ä½œè½¬ç§»åˆ° Docker ä¸Šï¼Œå¼€å‘è€…å¯ä»¥æ›´ä¸ºæ–¹ä¾¿çš„æ­å»ºç¯å¢ƒã€åœ¨ä¸åŒè®¾å¤‡ä¹‹é—´è¿›è¡Œåˆ†äº«ã€æ›´å°‘çš„æ€§èƒ½æŸå¤±æ¥è¿è¡ŒæœåŠ¡ã€‚ä¹Ÿæ­£æ˜¯è¿™ä¸€ç‚¹è®©æˆ‘éå¸¸ç€è¿·ã€‚</p><blockquote><p>Docker takes away repetitive, mundane configuration tasks and is used throughout the development lifecycle for fast, easy and portable application development - desktop and cloud. Dockerâ€™s comprehensive end to end platform includes UIs, CLIs, APIs and security that are engineered to work together across the entire application delivery lifecycle.</p></blockquote><h3 id="Docker-éš”ç¦»æ€§ä¸å®‰å…¨æ€§"><a href="#Docker-éš”ç¦»æ€§ä¸å®‰å…¨æ€§" class="headerlink" title="Docker éš”ç¦»æ€§ä¸å®‰å…¨æ€§"></a>Docker éš”ç¦»æ€§ä¸å®‰å…¨æ€§</h3><p>å°± Docker æ¥è¯´ï¼Œå®‰å…¨æ€§ä¸»è¦ä¸ºä¸¤ç‚¹ï¼š</p><ol><li>ä¸ä¼šå¯¹ä¸»æœºé€ æˆå½±å“</li><li>ä¸ä¼šå¯¹å…¶ä»–å®¹å™¨é€ æˆå½±å“</li></ol><p>ä»è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå®‰å…¨æ€§æ›´å¤§ç¨‹åº¦ä¸Šä¾èµ–çš„æ˜¯ Docker çš„éš”ç¦»æ€§ã€‚åœ¨è¿™é‡Œåˆä¼šæƒ³åˆ°ä¸è™šæ‹Ÿæœºè¿›è¡Œå¯¹æ¯”ã€‚</p><p>ä¼ ç»Ÿçš„è™šæ‹Ÿæœºå…¶å®å¹¶é 100% å®‰å…¨ï¼Œåªéœ€æ”»ç ´ Hypervisor ä¾¿è¶³ä»¥ä»¤æ•´ä¸ªè™šæ‹Ÿæœºæ¯äºä¸€æ—¦ï¼Œé—®é¢˜æ˜¯æœ‰è°èƒ½éšéšä¾¿ä¾¿å°±æ”»ç ´å—ï¼ŸDocker çš„éš”ç¦»æ€§ä¸»è¦è¿ç”¨ Namespace æŠ€æœ¯ã€‚ä¼ ç»Ÿä¸Š Linux ä¸­çš„ <code>PID</code> æ˜¯å”¯ä¸€ä¸”ç‹¬ç«‹çš„ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¸ä¼šçœ‹è§é‡å¤çš„ <code>PID</code>ã€‚ç„¶è€Œåœ¨ Docker é‡‡ç”¨äº† Namespaceï¼Œä»è€Œä»¤ç›¸åŒçš„ <code>PID</code> å¯äºä¸åŒçš„ Namespace ä¸­ç‹¬ç«‹å­˜åœ¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒA Container ä¹‹ä¸­ PID=1 æ˜¯ A ç¨‹åºï¼Œè€Œ B Container ä¹‹ä¸­çš„ PID=1 åŒæ ·å¯ä»¥æ˜¯ A ç¨‹åºã€‚è™½ç„¶ Docker å¯é€è¿‡ Namespace çš„æ–¹å¼åˆ†éš”å‡ºçœ‹ä¼¼æ˜¯ç‹¬ç«‹çš„ç©ºé—´ï¼Œç„¶è€Œ Linux å†…æ ¸å´ä¸èƒ½ Namespaceï¼Œæ‰€ä»¥å³ä½¿æœ‰å¤šä¸ª Containerï¼Œæ‰€æœ‰çš„ system call å…¶å®éƒ½æ˜¯é€šè¿‡ä¸»æœºçš„å†…æ ¸å¤„ç†ï¼Œè¿™ä¾¿ä¸º Docker ç•™ä¸‹äº†ä¸å¯å¦è®¤çš„å®‰å…¨é—®é¢˜ã€‚ä¼ ç»Ÿçš„è™šæ‹ŸæœºåŒæ ·åœ°å¾ˆå¤šæ“ä½œéƒ½éœ€è¦é€šè¿‡å†…æ ¸å¤„ç†ï¼Œä½†è¿™åªæ˜¯è™šæ‹Ÿæœºçš„å†…æ ¸ï¼Œå¹¶éå®¿ä¸»ä¸»æœºå†…æ ¸ã€‚å› æ­¤ä¸‡ä¸€å‡ºç°é—®é¢˜æ—¶ï¼Œæœ€å¤šåªå½±å“åˆ°è™šæ‹Ÿç³»ç»Ÿæœ¬èº«ã€‚</p><p>æœ‰ä¸€ç‚¹æ˜¯ Docker éå¸¸æœ‰æ„æ€çš„ç‰¹ç‚¹ï¼Œä¹Ÿæ˜¯æœ¬æ¬¡å®éªŒå¯¹ Docker æ¼æ´çš„åˆ©ç”¨ä¹‹å¤„ã€‚Docker åœ¨ä¸»æœºä¸å®¹å™¨çš„æ˜ å°„ä¸Šï¼Œæœ‰éå¸¸å¤šçš„æ–‡ä»¶æ²¡æœ‰è¿›è¡Œéš”ç¦»ï¼š</p><ul><li><p><code>/proc</code>ã€<code>/sys</code> ç­‰</p></li><li><p><code>top</code>, <code>free</code>, <code>iostat</code> ç­‰å‘½ä»¤å±•ç¤ºçš„ä¿¡æ¯</p></li><li><p><code>root</code> ç”¨æˆ·</p></li><li><p><code>/dev</code> è®¾å¤‡</p></li><li><p>å†…æ ¸æ¨¡å—</p></li><li><p>SELinuxã€timeã€syslog ç­‰æ‰€æœ‰ç°æœ‰ Namespace ä¹‹å¤–çš„ä¿¡æ¯</p></li></ul><p>è¿™ä¹Ÿä½¿å¾— Docker çš„å®‰å…¨æ€§ä¸€ç›´å¤‡å—çƒ­è®®ã€‚å³ä¾¿æœ¬æ¬¡å®éªŒä¸­çš„ Docker ææƒæ¼æ´å·²ç»è¢« Docker å®˜æ–¹æ‰€äº†è§£ï¼Œä½†æ˜¯ä»–ä»¬ä¼¼ä¹å¹¶ä¸æ‰“ç®—å¯¹è¿™ä¸ªæ¼æ´è¿›è¡Œä¿®å¤ï¼Œå› ä¸ºè¿™ä¹Ÿå±äºä»–ä»¬å¯¹ä¸»æœºä¸å®¹å™¨å»ºç«‹æœ¬åœ°æ˜ å°„çš„ä¸€éƒ¨åˆ†ã€‚</p><p>Docker çš„å¦ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œå®ƒæ˜¯ç”± Docker å›¢é˜Ÿæ‰“é€ å¹¶ä¸”ç§¯ææ‹¥æŠ±å¼€æºã€‚å¼€æºç¤¾åŒºç”šè‡³æ˜¯ Red Hat éƒ½åœ¨ç»™ Docker è´¡çŒ®ä»£ç ï¼Œè¿åŒ Docker ä¸€èµ·æ”¹è¿›å®‰å…¨æ€§ï¼Œæ”¹è¿›é¡¹ä¸»è¦åŒ…æ‹¬ä¿æŠ¤å®¿ä¸»ä¸å—å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹çš„å…¥ä¾µã€é˜²æ­¢å®¹å™¨ä¹‹é—´ç›¸äº’ç ´åã€‚å¼€æºç¤¾åŒºåœ¨è§£å†³ Docker å®‰å…¨æ€§é—®é¢˜ä¸Šçš„åŠªåŠ›åŒ…æ‹¬ï¼š</p><ul><li><p>Audit namespace</p><ul><li>ä½œç”¨ï¼šéš”ç¦»å®¡è®¡åŠŸèƒ½</li><li>æœªåˆå…¥åŸå› ï¼šæ„ä¹‰ä¸å¤§ï¼Œè€Œä¸”ä¼šå¢åŠ  audit çš„å¤æ‚åº¦ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</li></ul></li><li><p>Syslog namespace</p><ul><li>ä½œç”¨ï¼šéš”ç¦»ç³»ç»Ÿæ—¥å¿—</li><li>æœªåˆå…¥åŸå› ï¼šå¾ˆéš¾å®Œç¾çš„åŒºåˆ†å“ªäº› log åº”è¯¥å±äºæŸä¸ª containerã€‚</li></ul></li><li><p>Device namespace</p><ul><li>ä½œç”¨ï¼šéš”ç¦»è®¾å¤‡ï¼ˆæ”¯æŒè®¾å¤‡åŒæ—¶åœ¨å¤šä¸ªå®¹å™¨ä¸­ä½¿ç”¨ï¼‰</li><li>æœªåˆå…¥åŸå› ï¼šå‡ ä¹è¦ä¿®æ”¹æ‰€æœ‰é©±åŠ¨ï¼Œæ”¹åŠ¨å¤ªå¤§ã€‚</li></ul></li><li><p>Time namespace</p><ul><li>ä½œç”¨ï¼šä½¿æ¯ä¸ªå®¹å™¨æœ‰è‡ªå·±çš„ç³»ç»Ÿæ—¶é—´</li><li>æœªåˆå…¥åŸå› ï¼šä¸€äº›è®¾è®¡ç»†èŠ‚ä¸Šæœªè¾¾æˆä¸€è‡´ï¼Œè€Œä¸”æ„Ÿè§‰åº”ç”¨åœºæ™¯ä¸å¤šã€‚</li></ul></li><li><p>Task count cgroup</p><ul><li>ä½œç”¨ï¼šé™åˆ¶ cgroup ä¸­çš„è¿›ç¨‹æ•°ï¼Œå¯ä»¥è§£å†³ fork bomb çš„é—®é¢˜</li><li>æœªåˆå…¥åŸå› ï¼šä¸å¤ªå¿…è¦ï¼Œå¢åŠ äº†å¤æ‚æ€§ï¼Œ<code>kmemlimit</code> å¯ä»¥å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚(æœ€è¿‘å¯èƒ½ä¼šè¢«åˆå…¥)</li></ul></li><li><p>éš”ç¦» <code>/proc/meminfo</code> çš„ä¿¡æ¯æ˜¾ç¤º</p><ul><li>ä½œç”¨ï¼šåœ¨å®¹å™¨ä¸­çœ‹åˆ°å±äºè‡ªå·±çš„ <code>meminfo</code> ä¿¡æ¯</li><li>æœªåˆå…¥åŸå› ï¼šcgroupfs å·²ç»å¯¼å‡ºäº†æ‰€æœ‰ä¿¡æ¯ï¼Œ<code>/proc</code> å±•ç°çš„å·¥ä½œå¯ä»¥ç”±ç”¨æˆ·æ€å®ç°ï¼Œæ¯”å¦‚ fuseã€‚</li></ul></li></ul><p>ä¸è¿‡ï¼Œä» 08 å¹´ cgroup/ns åŸºæœ¬æˆå‹åï¼Œè‡³ä»Šè¿˜æ²¡æœ‰æ–°çš„ namespace åŠ å…¥å†…æ ¸ï¼Œcgroup åœ¨å­ç³»ç»Ÿä¸Šåšäº†ç®€å•çš„è¡¥å……ï¼Œå¤šæ•°å·¥ä½œéƒ½æ˜¯å¯¹åŸæœ‰ subsystem çš„å®Œå–„ã€‚å†…æ ¸ç¤¾åŒºå¯¹å®¹å™¨æŠ€æœ¯è¦æ±‚çš„éš”ç¦»æ€§ï¼Œæœ¬çš„åŸåˆ™æ˜¯å¤Ÿç”¨å°±å¥½ï¼Œä¸èƒ½æŠŠå†…æ ¸æçš„å¤ªå¤æ‚ã€‚</p><p>ä¸€äº›ä¼ä¸šä¹Ÿåšäº†å¾ˆå¤šå·¥ä½œï¼Œæ¯”å¦‚ä¸€äº›é¡¹ç›®å›¢é˜Ÿé‡‡ç”¨äº†å±‚å å¼çš„å®‰å…¨æœºåˆ¶ï¼Œè¿™äº›å¯é€‰çš„å®‰å…¨æœºåˆ¶å…·ä½“å¦‚ä¸‹ï¼š</p><ol><li><p>æ–‡ä»¶ç³»ç»Ÿçº§é˜²æŠ¤</p><p>æ–‡ä»¶ç³»ç»Ÿåªè¯»ï¼šæœ‰äº› Linux ç³»ç»Ÿçš„å†…æ ¸æ–‡ä»¶ç³»ç»Ÿå¿…é¡»è¦ <code>mount</code> åˆ°å®¹å™¨ç¯å¢ƒé‡Œï¼Œå¦åˆ™å®¹å™¨é‡Œçš„è¿›ç¨‹å°±ä¼šç½¢å·¥ã€‚è¿™ç»™æ¶æ„è¿›ç¨‹éå¸¸å¤§çš„ä¾¿åˆ©ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†è¿è¡Œåœ¨å®¹å™¨é‡Œçš„ App å…¶å®å¹¶ä¸éœ€è¦å‘æ–‡ä»¶ç³»ç»Ÿå†™å…¥æ•°æ®ã€‚åŸºäºè¿™ç§æƒ…å†µï¼Œå¼€å‘è€…å¯ä»¥åœ¨ <code>mount</code> æ—¶ä½¿ç”¨åªè¯»æ¨¡å¼ã€‚æ¯”å¦‚ä¸‹é¢å‡ ä¸ªï¼š <code>/sys</code> ã€<code>/proc/sys</code> ã€<code>/proc/sysrq-trigger</code> ã€<code>/proc/irq</code>ã€<code>/proc/bus</code></p><p>å†™å…¥æ—¶å¤åˆ¶ï¼ˆCopy-On-Writeï¼‰ï¼šDocker é‡‡ç”¨çš„å°±æ˜¯è¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ‰€æœ‰è¿è¡Œçš„å®¹å™¨å¯ä»¥å…ˆå…±äº«ä¸€ä¸ªåŸºæœ¬æ–‡ä»¶ç³»ç»Ÿé•œåƒï¼Œä¸€æ—¦éœ€è¦å‘æ–‡ä»¶ç³»ç»Ÿå†™æ•°æ®ï¼Œå°±å¼•å¯¼å®ƒå†™åˆ°ä¸è¯¥å®¹å™¨ç›¸å…³çš„å¦ä¸€ä¸ªç‰¹å®šæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚è¿™æ ·çš„æœºåˆ¶é¿å…äº†ä¸€ä¸ªå®¹å™¨çœ‹åˆ°å¦ä¸€ä¸ªå®¹å™¨çš„æ•°æ®ï¼Œè€Œä¸”å®¹å™¨ä¹Ÿæ— æ³•é€šè¿‡ä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹æ¥å½±å“å…¶ä»–å®¹å™¨ã€‚åœ¨ç¬¬äºŒä¸ª DirtyCow å®éªŒä¸­ï¼Œå°±æ˜¯åˆ©ç”¨çš„ Copy-On-Writeã€‚</p></li><li><p>Capability æœºåˆ¶</p><p>Linux å¯¹ Capability æœºåˆ¶é˜è¿°çš„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ï¼Œå³ä¸ºäº†è¿›è¡Œæƒé™æ£€æŸ¥ï¼Œä¼ ç»Ÿçš„ UNIX å¯¹è¿›ç¨‹å®ç°äº†ä¸¤ç§ä¸åŒçš„å½’ç±»ï¼Œé«˜æƒé™è¿›ç¨‹ï¼ˆç”¨æˆ· ID ä¸º 0ï¼Œè¶…çº§ç”¨æˆ·æˆ–è€… <code>root</code>ï¼‰ï¼Œä»¥åŠä½æƒé™è¿›ç¨‹ï¼ˆ<code>UID</code> ä¸ä¸º 0 çš„ï¼‰ã€‚é«˜æƒé™è¿›ç¨‹å®Œå…¨é¿å…äº†å„ç§æƒé™æ£€æŸ¥ï¼Œè€Œä½æƒé™è¿›ç¨‹åˆ™è¦æ¥å—æ‰€æœ‰æƒé™æ£€æŸ¥ï¼Œä¼šè¢«æ£€æŸ¥å¦‚ <code>UID</code>ã€<code>GID</code> å’Œç»„æ¸…å•æ˜¯å¦æœ‰æ•ˆã€‚ä» 2.2 å†…æ ¸å¼€å§‹ï¼ŒLinux æŠŠåŸæ¥å’Œè¶…çº§ç”¨æˆ·ç›¸å…³çš„é«˜çº§æƒé™åˆ’åˆ†æˆä¸ºä¸åŒçš„å•å…ƒï¼Œç§°ä¸º Capabilityï¼Œè¿™æ ·å°±å¯ä»¥ç‹¬ç«‹å¯¹ç‰¹å®šçš„ Capability è¿›è¡Œä½¿èƒ½æˆ–ç¦æ­¢ã€‚é€šå¸¸æ¥è®²ï¼Œä¸åˆç†çš„ç¦æ­¢ Capabilityï¼Œä¼šå¯¼è‡´åº”ç”¨å´©æºƒï¼Œå› æ­¤å¯¹äº Docker è¿™æ ·çš„å®¹å™¨ï¼Œæ—¢è¦å®‰å…¨ï¼Œåˆè¦ä¿è¯å…¶å¯ç”¨æ€§ã€‚å¼€å‘è€…éœ€è¦ä»åŠŸèƒ½æ€§ã€å¯ç”¨æ€§ä»¥åŠå®‰å…¨æ€§å¤šæ–¹é¢ç»¼åˆæƒè¡¡ Capability çš„è®¾ç½®ã€‚ç›®å‰ Docker å®‰è£…æ—¶é»˜è®¤å¼€å¯çš„ Capability åˆ—è¡¨ä¸€ç›´æ˜¯å¼€å‘ç¤¾åŒºäº‰è®®çš„ç„¦ç‚¹ï¼Œä½œä¸ºæ™®é€šå¼€å‘è€…ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥æ”¹å˜å…¶é»˜è®¤è®¾ç½®ã€‚</p></li><li><p>NameSpace æœºåˆ¶</p><p>Docker æä¾›çš„ä¸€äº›å‘½åç©ºé—´ä¹Ÿä»æŸç§ç¨‹åº¦ä¸Šæä¾›äº†å®‰å…¨ä¿æŠ¤ï¼Œæ¯”å¦‚ <code>PID</code> å‘½åç©ºé—´ï¼Œå®ƒä¼šå°†å…¨éƒ¨æœªè¿è¡Œåœ¨å¼€å‘è€…å½“å‰å®¹å™¨é‡Œçš„è¿›ç¨‹éšè—ã€‚å¦‚æœæ¶æ„ç¨‹åºçœ‹éƒ½çœ‹ä¸è§è¿™äº›è¿›ç¨‹ï¼Œæ”»å‡»èµ·æ¥åº”è¯¥ä¹Ÿä¼šéº»çƒ¦ä¸€äº›ã€‚å¦å¤–ï¼Œå¦‚æœå¼€å‘è€…ç»ˆæ­¢ <code>pid</code> æ˜¯ 1 çš„è¿›ç¨‹å‘½åç©ºé—´ï¼Œå®¹å™¨é‡Œé¢æ‰€æœ‰çš„è¿›ç¨‹å°±ä¼šè¢«å…¨éƒ¨è‡ªåŠ¨ç»ˆæ­¢ï¼Œè¿™æ„å‘³ç€ç®¡ç†å‘˜å¯ä»¥éå¸¸å®¹æ˜“åœ°å…³æ‰å®¹å™¨ã€‚æ­¤å¤–è¿˜æœ‰ç½‘ç»œå‘½åç©ºé—´ï¼Œæ–¹ä¾¿ç®¡ç†å‘˜é€šè¿‡è·¯ç”±è§„åˆ™å’Œ iptable æ¥æ„å»ºå®¹å™¨çš„ç½‘ç»œç¯å¢ƒï¼Œè¿™æ ·å®¹å™¨å†…éƒ¨çš„è¿›ç¨‹å°±åªèƒ½ä½¿ç”¨ç®¡ç†å‘˜è®¸å¯çš„ç‰¹å®šç½‘ç»œã€‚å¦‚åªèƒ½è®¿é—®å…¬ç½‘çš„ã€åªèƒ½è®¿é—®æœ¬åœ°çš„å’Œä¸¤ä¸ªå®¹å™¨ä¹‹é—´ç”¨äºè¿‡æ»¤å†…å®¹çš„å®¹å™¨ã€‚</p></li><li><p>Cgroups æœºåˆ¶</p><p>ä¸»è¦æ˜¯é’ˆå¯¹æ‹’ç»æœåŠ¡æ”»å‡»ã€‚æ¶æ„è¿›ç¨‹ä¼šé€šè¿‡å æœ‰ç³»ç»Ÿå…¨éƒ¨èµ„æºæ¥è¿›è¡Œç³»ç»Ÿæ”»å‡»ã€‚Cgroups æœºåˆ¶å¯ä»¥é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå¦‚ CPU çš„ cgroups å¯ä»¥åœ¨ä¸€ä¸ª Docker å®¹å™¨è¯•å›¾ç ´å CPU çš„æ—¶å€™ç™»å½•å¹¶åˆ¶æ­¢æ¶æ„è¿›ç¨‹ã€‚ç®¡ç†å‘˜éœ€è¦è®¾è®¡æ›´å¤šçš„ cgroupsï¼Œç”¨äºæ§åˆ¶é‚£äº›æ‰“å¼€è¿‡å¤šæ–‡ä»¶æˆ–è€…è¿‡å¤šå­è¿›ç¨‹ç­‰èµ„æºçš„è¿›ç¨‹ã€‚</p></li><li><p>SELinux</p><p>SELinux æ˜¯ä¸€ä¸ªæ ‡ç­¾ç³»ç»Ÿï¼Œè¿›ç¨‹æœ‰æ ‡ç­¾ï¼Œæ¯ä¸ªæ–‡ä»¶ã€ç›®å½•ã€ç³»ç»Ÿå¯¹è±¡éƒ½æœ‰æ ‡ç­¾ã€‚SELinux é€šè¿‡æ’°å†™æ ‡ç­¾è¿›ç¨‹å’Œæ ‡ç­¾å¯¹è±¡ä¹‹é—´è®¿é—®è§„åˆ™æ¥è¿›è¡Œå®‰å…¨ä¿æŠ¤ã€‚å®ƒå®ç°çš„æ˜¯ä¸€ç§å«åš MACï¼ˆMandatory Access Controlï¼‰çš„ç³»ç»Ÿï¼Œå³å¯¹è±¡çš„æ‰€æœ‰è€…ä¸èƒ½æ§åˆ¶åˆ«äººè®¿é—®å¯¹è±¡ã€‚</p></li></ol><h3 id="Docker-ç”¨æˆ·ç»„"><a href="#Docker-ç”¨æˆ·ç»„" class="headerlink" title="Docker ç”¨æˆ·ç»„"></a>Docker ç”¨æˆ·ç»„</h3><p>æœ¬æ¬¡å®éªŒä¸­ä½¿ç”¨ Docker æœ¬åœ°æ˜ å°„è¿›è¡Œææƒçš„ä¸€ä¸ªå¿…è¦çš„å‰ææ¡ä»¶å°±æ˜¯ Docker ç”¨æˆ·ç»„ä¼šåœ¨ Docker å†…è·å¾— root æƒé™ã€‚</p><blockquote><p>The Docker daemon binds to a Unix socket instead of a TCP port. By default that Unix socket is owned by the user <code>root</code> and other users can only access it using <code>sudo</code>. The Docker daemon always runs as the <code>root</code> user.</p><p>If you donâ€™t want to preface the <code>docker</code> command with <code>sudo</code>, create a Unix group called <code>docker</code> and add users to it. When the Docker daemon starts, it creates a Unix socket accessible by members of the <code>docker</code> group.</p><blockquote><p>Warning</p><p>The <code>docker</code> group grants privileges equivalent to the <code>root</code> user. For details on how this impacts security in your system, see <a href="https://docs.docker.com/engine/security/#docker-daemon-attack-surface"><em>Docker Daemon Attack Surface</em></a>.</p></blockquote></blockquote><p>å¤§æ¦‚è§£é‡Šä¸€ä¸‹ï¼Œå°±æ˜¯æœ¬èº« Docker ç”±äºè¦å’Œç«¯å£è¿›è¡Œç»‘å®šï¼Œä¼šé»˜è®¤ä½¿ç”¨ <code>root</code> ç”¨æˆ·å¯¹ Docker è¿›è¡Œç®¡ç†ã€‚æ‰€ä»¥ Docker å…è®¸å®¿ä¸»æœº <code>root</code> å°†éœ€è¦ä½¿ç”¨ Docker æœåŠ¡çš„ç”¨æˆ·æ·»åŠ è¿› Docker ç”¨æˆ·ç»„ï¼Œä»¥ä¾¿äºè¯¥ç”¨æˆ·å¯ä»¥åœ¨ Docker ä¸­è·å¾— <code>root</code> æƒé™ï¼Œä½¿ç”¨æ‰€æœ‰éœ€è¦åœ¨ Docker ä¸­ä½¿ç”¨çš„è¯¸å¦‚æ˜ å°„æœ¬åœ°æ–‡ä»¶ã€å¼€æ”¾ç«¯å£ç­‰æœåŠ¡ã€‚</p><p>å¯ä»¥è¯´ï¼ŒDocker ä¸ºäº†é¿å¼€è®©ç”¨æˆ·å¿…é¡»ä½¿ç”¨ <code>root</code> ç”¨æˆ·æƒé™æ‰èƒ½ä½¿ç”¨ï¼Œå¢åŠ äº†å¯¹ Docker ç”¨æˆ·ç»„çš„æƒé™è®¤è¯ã€‚è§£å†³äº† <code>sudo</code> çš„éº»çƒ¦ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—æœ¬æ¬¡å®éªŒä¸­åˆ©ç”¨çš„æ¼æ´æš´éœ²å‡ºæ¥ã€‚</p><h3 id="ææƒæ–¹å¼ï¼šDocker-æœ¬åœ°æ˜ å°„"><a href="#ææƒæ–¹å¼ï¼šDocker-æœ¬åœ°æ˜ å°„" class="headerlink" title="ææƒæ–¹å¼ï¼šDocker æœ¬åœ°æ˜ å°„"></a>ææƒæ–¹å¼ï¼šDocker æœ¬åœ°æ˜ å°„</h3><h4 id="ææƒè¿‡ç¨‹æ¼”ç¤º"><a href="#ææƒè¿‡ç¨‹æ¼”ç¤º" class="headerlink" title="ææƒè¿‡ç¨‹æ¼”ç¤º"></a>ææƒè¿‡ç¨‹æ¼”ç¤º</h4><p>åœ¨ä¸Šæ–‡ä¸­æåˆ°ï¼ŒDocker ä¸€æ–¹é¢ä½¿ç”¨ Docker ç”¨æˆ·ç»„æ¥è®©æ™®é€šç”¨æˆ·ä¸é€šè¿‡ <code>sudo</code> ä¹Ÿå¯ä»¥åœ¨ Docker ä¸­è·å¾—æœ€é«˜æƒé™ï¼Œä»è€Œæ–¹ä¾¿æ™®é€šç”¨æˆ·çš„ä½¿ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼Œå®ƒä½¿ç”¨çš„å†…æ ¸è¿›è¡Œäº†æœ¬åœ°ä¸å®¹å™¨å†…æ–‡ä»¶çš„æ˜ å°„ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ç”¨æˆ·è‡ªå·±æ·»åŠ æœ¬åœ°æ–‡ä»¶æ˜ å°„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªåœ¨ Docker ç”¨æˆ·ç»„çš„æ™®é€šç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥æ˜ å°„æœ¬åœ° <code>root</code> æƒé™çš„æ–‡ä»¶è¿›å…¥å®¹å™¨å†…ï¼Œå¹¶ä½œä¸ºå®¹å™¨å†…çš„ <code>root</code> ç”¨æˆ·å¯¹å®¿ä¸»æœºçš„é«˜æƒé™æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚</p><p>è‡ªç„¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æƒ³åˆ°ï¼Œä½œä¸ºè¢«æ·»åŠ è¿› Docker ç”¨æˆ·ç»„çš„æ™®é€šç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ Dockerï¼Œå°†æœ¬åœ°å¯¹ç”¨æˆ·æƒé™è¿›è¡Œç®¡ç†çš„ <code>/etc/sudoers</code> æ–‡ä»¶æ˜ å°„è¿›å®¹å™¨å†…ï¼Œç„¶åä½œä¸º <code>root</code> ç”¨æˆ·å¯¹å…¶è¿›è¡Œä¸€å®šçš„ä¿®æ”¹ã€‚åœ¨å®é™…æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†æ•´ä¸ª <code>/etc</code> æ˜ å°„å…¥å®¹å™¨å†…ã€‚</p><p>ä¸‹é¢å°†æ¼”ç¤ºä½¿ç”¨ Docker ç”¨æˆ·ç»„åŠæœ¬åœ°æ˜ å°„ä¸ºæ™®é€šç”¨æˆ·ææƒã€‚æœ¬æ¬¡å®éªŒè¿è¡Œäº Azure Hong Kong äº‘æœåŠ¡å™¨ä¸Šï¼Œé…ç½®ä¸ºå•æ ¸ CPUï¼Œ1G å†…å­˜ï¼ŒUbuntu 20.04ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>root</code> æ·»åŠ  Docker ç”¨æˆ·ç»„ã€‚é€šå¸¸åœ¨å®‰è£… Docker æ—¶ï¼ŒDocker ç”¨æˆ·ç»„å·²ç»è¢«åˆ›å»ºå¥½å¹¶ä¸”åˆ†é…å¥½æƒé™ã€‚</p><p><img src="https://i.loli.net/2021/11/15/VHlTxg3WkXYhyOq.png" alt="Screen Shot 2021-10-28 at 10.23.53 PM"></p><p>æŸ¥çœ‹åˆ° <code>/etc/sudoers</code> æ–‡ä»¶çš„æƒé™ä¸ºåªè¯»ï¼Œå³ä¾¿æ˜¯ä½œä¸º <code>root</code> ç”¨æˆ·ä¹Ÿæ²¡æœ‰å¯å†™æƒé™ï¼Œå¹¶ä¸”å¹¶æ²¡æœ‰ä¸ºä»»ä½•ç”¨æˆ·æ·»åŠ ç”³è¯· <code>root</code> çš„æƒé™ã€‚</p><p><img src="https://i.loli.net/2021/11/15/yEe4LBV5QGJOrut.png" alt="Screen Shot 2021-10-28 at 10.27.05 PM"></p><p><img src="https://i.loli.net/2021/11/15/Hdlgn1UA7GtFExs.png" alt="Screen Shot 2021-10-28 at 10.30.24 PM"></p><p>æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç”¨äºæœ¬æ¬¡å®éªŒçš„ test ç”¨æˆ·ï¼Œå¯ä»¥çœ‹åˆ°å…¶æƒé™ä¸ºæœ€ä½ã€‚å°†å®ƒåŠ å…¥åˆ° docker ç”¨æˆ·ç»„ã€‚</p><p><img src="https://i.loli.net/2021/11/15/ecmDuHbwfM5OlBv.png" alt="Screen Shot 2021-10-28 at 10.54.38 PM"></p><p>é‡å¯ Docker åï¼Œtest ç”¨æˆ·ç”Ÿæ•ˆï¼Œè¢« Docker èµ‹äºˆå®¹å™¨å†…çš„ <code>root</code> æƒé™ã€‚</p><p><img src="https://i.loli.net/2021/11/15/WZ3TQHdE4iDKlNr.png" alt="Screen Shot 2021-10-28 at 11.57.39 PM"></p><p>é¦–å…ˆå¯ä»¥é€šè¿‡ <code>usermod -aG root test</code> å‘½ä»¤å°† test ç”¨æˆ·æ·»åŠ è¿› <code>root</code> ç”¨æˆ·ç»„ã€‚æ­¤æ—¶å¦‚æœé€€å‡º Docker å°±ä¼šçœ‹åˆ° test ç”¨æˆ·å·²ç»è¢«æ·»åŠ äº†ç®¡ç†å‘˜æƒé™ã€‚</p><p><img src="https://i.loli.net/2021/11/15/UlbS4nGZj2em6ip.png" alt="Screen Shot 2021-10-29 at 12.00.41 AM"></p><p>ä½†æ˜¯æ­¤æ—¶ test ç”¨æˆ·å¹¶ä¸èƒ½ç™»é™† <code>root</code> ç”¨æˆ·ã€‚å…¶å®ä¹Ÿå°±æ˜¯ <code>/etc/sudoers</code> æ–‡ä»¶å†…å¹¶æ²¡æœ‰æ·»åŠ å¯¹ test ç”¨æˆ·çš„è®¸å¯ï¼Œè€Œåªæ˜¯èµ‹äºˆäº†æƒé™çš„å¯èƒ½ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨å†…å¯¹ <code>/etc/sudoers</code> æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œå°† test ç”¨æˆ·éƒ¨åˆ† <code>test ALL=(ALL) ALL</code> å†™å…¥æ–‡ä»¶æœ«å°¾ã€‚æ™®é€š Docker ç”¨æˆ·ç»„ç”¨æˆ·åˆ°è¿™é‡Œå·²ç»ææƒæˆåŠŸã€‚</p><p><img src="https://i.loli.net/2021/11/15/QaWXHxBbwI2Vvij.png" alt="Screen Shot 2021-10-29 at 12.06.19 AM"></p><p><img src="https://i.loli.net/2021/11/15/ef1PTvZCXWjp5Y8.png" alt="Screen Shot 2021-10-29 at 12.08.06 AM"></p><h4 id="rootplease"><a href="#rootplease" class="headerlink" title="rootplease"></a>rootplease</h4><p>åœ¨ Docker Hub ä¸Šå·²ç»æœ‰äººé€šè¿‡è¿™ä¸ªæ¼æ´åˆ¶ä½œå¥½äº†ä¸“é—¨ç”¨äºå°†æ™®é€šç”¨æˆ·ææƒä¸º <code>root</code> ç”¨æˆ·çš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œé•œåƒä¸€é”®ææƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v /:/hostOS -i -t chrisfosterelli/rootplease</span><br></pre></td></tr></table></figure><p>å®ƒæ˜¯é€šè¿‡å°†å®¿ä¸»æœºæ ¹ç›®å½•ç›´æ¥æ˜ å°„åˆ°å®¹å™¨å†…çš„ <code>/hostOS</code> ç›®å½•ï¼Œç„¶ååœ¨å®¹å™¨ä¸­ <code>chroot /hostOS /bin/sh</code> å°†æ ¹ç›®å½•æ”¹åˆ° <code>/chroot</code> ç›®å½•ã€‚è·å¾—å®¿ä¸»æœºçš„ <code>root</code> æƒé™å¹¶å¯åŠ¨ shellã€‚</p><h3 id="Docker-æ¶‰åŠåˆ°çš„å…¶ä»–å®‰å…¨é£é™©åŠè§£å†³æ–¹æ¡ˆä¸¾ä¾‹"><a href="#Docker-æ¶‰åŠåˆ°çš„å…¶ä»–å®‰å…¨é£é™©åŠè§£å†³æ–¹æ¡ˆä¸¾ä¾‹" class="headerlink" title="Docker æ¶‰åŠåˆ°çš„å…¶ä»–å®‰å…¨é£é™©åŠè§£å†³æ–¹æ¡ˆä¸¾ä¾‹"></a>Docker æ¶‰åŠåˆ°çš„å…¶ä»–å®‰å…¨é£é™©åŠè§£å†³æ–¹æ¡ˆä¸¾ä¾‹</h3><p><img src="https://s.secrss.com/anquanneican/8d894075fbc696d1402f5bb6b9eae223.png" alt=""></p><h4 id="é•œåƒå®‰å…¨é£é™©"><a href="#é•œåƒå®‰å…¨é£é™©" class="headerlink" title="é•œåƒå®‰å…¨é£é™©"></a>é•œåƒå®‰å…¨é£é™©</h4><h5 id="Dockerfile-å®‰å…¨é—®é¢˜"><a href="#Dockerfile-å®‰å…¨é—®é¢˜" class="headerlink" title="Dockerfile å®‰å…¨é—®é¢˜"></a>Dockerfile å®‰å…¨é—®é¢˜</h5><p>Docker å®¹å™¨ä½¿ç”¨çš„ Docker Hub ä¸­é•œåƒä¸ä»…ç”±å®˜æ–¹ä¸Šä¼ ï¼Œä¸ªäººå¼€å‘è€…ä¹Ÿå¯ä»¥è‡ªç”±ä¸Šä¼ ã€‚å…¶æ•°é‡ä¸°å¯Œã€ç‰ˆæœ¬å¤šæ ·ï¼Œä½†è´¨é‡å‚å·®ä¸é½ï¼Œç”šè‡³å­˜åœ¨åŒ…å«æ¶æ„æ¼æ´çš„æ¶æ„é•œåƒï¼Œå› è€Œå¯èƒ½å­˜åœ¨è¾ƒå¤§çš„å®‰å…¨é£é™©ã€‚å…·ä½“è€Œè¨€ï¼ŒDocker é•œåƒçš„å®‰å…¨é£é™©åˆ†å¸ƒåœ¨åˆ›å»ºè¿‡ç¨‹ã€è·å–æ¥æºã€è·å–é€”å¾„ç­‰æ–¹æ–¹é¢é¢ã€‚</p><p>Docker é•œåƒçš„ç”Ÿæˆä¸»è¦åŒ…æ‹¬ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å¯¹è¿è¡Œä¸­çš„åŠ¨æ€å®¹å™¨é€šè¿‡ <code>docker commit</code> å‘½ä»¤è¿›è¡Œæ‰“åŒ…ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡ <code>docker build</code> å‘½ä»¤æ‰§è¡Œ Dockerfile æ–‡ä»¶è¿›è¡Œåˆ›å»ºã€‚ä¸ºäº†ç¡®ä¿æœ€å°å®‰è£…åŸåˆ™ï¼ŒåŒæ—¶è€ƒè™‘å®¹å™¨çš„æ˜“ç»´æŠ¤æ€§ï¼Œä¸€èˆ¬æ¨èé‡‡ç”¨ Dockerfile æ–‡ä»¶æ„å»ºå®¹å™¨é•œåƒï¼Œå³åœ¨åŸºç¡€é•œåƒä¸Šè¿›è¡Œé€å±‚åº”ç”¨æ·»åŠ æ“ä½œã€‚</p><p>Dockerfile æ–‡ä»¶å†…å®¹åœ¨ä¸€å®šç¨‹åº¦ä¸Šå†³å®šäº†Dockeré•œåƒçš„å®‰å…¨æ€§ï¼Œå…¶å®‰å…¨é£é™©å…·ä½“åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>å¦‚æœ Dockerfile å­˜åœ¨æ¼æ´æˆ–è¢«æ’å…¥æ¶æ„è„šæœ¬ï¼Œé‚£ä¹ˆç”Ÿæˆçš„å®¹å™¨ä¹Ÿå¯èƒ½äº§ç”Ÿæ¼æ´æˆ–è¢«æ¶æ„åˆ©ç”¨ã€‚ä¾‹å¦‚ï¼Œæ”»å‡»è€…å¯æ„é€ ç‰¹æ®Šçš„ Dockerfile å‹ç¼©æ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘æ—¶è§¦å‘æ¼æ´è·å–æ‰§è¡Œä»»æ„ä»£ç çš„æƒé™ã€‚</li><li>å¦‚æœåœ¨ Dockerfile ä¸­æ²¡æœ‰æŒ‡å®š USERï¼ŒDocker å°†é»˜è®¤ä»¥ root ç”¨æˆ·çš„èº«ä»½è¿è¡Œè¯¥ Dockerfile åˆ›å»ºçš„å®¹å™¨ï¼Œå¦‚æœè¯¥å®¹å™¨é­åˆ°æ”»å‡»ï¼Œé‚£ä¹ˆå®¿ä¸»æœºçš„ root è®¿é—®æƒé™ä¹Ÿå¯èƒ½ä¼šè¢«è·å–ã€‚</li><li>å¦‚æœåœ¨ Dockerfile æ–‡ä»¶ä¸­å­˜å‚¨äº†å›ºå®šå¯†ç ç­‰æ•æ„Ÿä¿¡æ¯å¹¶å¯¹å¤–è¿›è¡Œå‘å¸ƒï¼Œåˆ™å¯èƒ½å¯¼è‡´æ•°æ®æ³„éœ²çš„é£é™©ã€‚</li><li>å¦‚æœåœ¨ Dockerfile çš„ç¼–å†™ä¸­æ·»åŠ äº†ä¸å¿…è¦çš„åº”ç”¨ï¼Œå¦‚ SSHã€Telnet ç­‰ï¼Œåˆ™ä¼šäº§ç”Ÿæ”»å‡»é¢æ‰©å¤§çš„é£é™©ã€‚</li></ul><h5 id="é•œåƒæ¼æ´"><a href="#é•œåƒæ¼æ´" class="headerlink" title="é•œåƒæ¼æ´"></a>é•œåƒæ¼æ´</h5><p>é•œåƒæ¼æ´å®‰å…¨é£é™©å…·ä½“åŒ…æ‹¬é•œåƒä¸­çš„è½¯ä»¶å«æœ‰ CVE(Common Vulnerabilities &amp; Exposures) æ¼æ´ã€æ”»å‡»è€…ä¸Šä¼ å«æœ‰æ¶æ„æ¼æ´çš„é•œåƒç­‰æƒ…å†µã€‚</p><ul><li><p>CVE æ¼æ´</p><ul><li>ç”±äºé•œåƒé€šå¸¸ç”±åŸºç¡€æ“ä½œç³»ç»Ÿä¸å„ç±»åº”ç”¨è½¯ä»¶æ„æˆï¼Œå› æ­¤ï¼Œå«æœ‰ CVE æ¼æ´çš„åº”ç”¨è½¯ä»¶åŒæ ·ä¹Ÿä¼šå‘ Docker é•œåƒä¸­å¼•å…¥ CVE æ¼æ´ã€‚</li></ul></li><li><p>æ¶æ„æ¼æ´</p><ul><li>æ¶æ„ç”¨æˆ·å¯èƒ½å°†å«æœ‰åé—¨ã€ç—…æ¯’ç­‰æ¶æ„æ¼æ´çš„é•œåƒä¸Šä¼ è‡³å®˜æ–¹é•œåƒåº“ã€‚</li><li>2018å¹´6æœˆï¼Œå®‰å…¨å‚å•† Fortinet å’Œ Kromtech åœ¨ Docker Hub ä¸Šå‘ç° 17 ä¸ªåŒ…å«ç”¨äºæ•°å­—è´§å¸æŒ–çŸ¿æ¶æ„ç¨‹åºçš„ Docker é•œåƒï¼Œè€Œè¿™äº›æ¶æ„é•œåƒå½“æ—¶å·²æœ‰ 500 ä¸‡æ¬¡çš„ä¸‹è½½é‡ã€‚</li></ul></li></ul><h5 id="é•œåƒä»“åº“å®‰å…¨"><a href="#é•œåƒä»“åº“å®‰å…¨" class="headerlink" title="é•œåƒä»“åº“å®‰å…¨"></a>é•œåƒä»“åº“å®‰å…¨</h5><p>ä½œä¸ºæ­å»ºç§æœ‰é•œåƒå­˜å‚¨ä»“åº“çš„å·¥å…·ï¼ŒDocker Registry çš„åº”ç”¨å®‰å…¨æ€§ä¹Ÿå¿…é¡»å¾—åˆ°ä¿è¯ã€‚é•œåƒä»“åº“çš„å®‰å…¨é£é™©ä¸»è¦åŒ…æ‹¬ä»“åº“æœ¬èº«çš„å®‰å…¨é£é™©å’Œé•œåƒæ‹‰å–è¿‡ç¨‹ä¸­çš„ä¼ è¾“å®‰å…¨é£é™©ã€‚</p><ul><li>ä»“åº“è‡ªèº«å®‰å…¨<ul><li>å¦‚æœé•œåƒä»“åº“ç‰¹åˆ«æ˜¯ç§æœ‰é•œåƒä»“åº“è¢«æ¶æ„æ”»å‡»è€…æ‰€æ§åˆ¶ï¼Œé‚£ä¹ˆå…¶ä¸­æ‰€æœ‰é•œåƒçš„å®‰å…¨æ€§å°†æ— æ³•å¾—åˆ°ä¿è¯ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœç§æœ‰é•œåƒä»“åº“ç”±äºé…ç½®ä¸å½“è€Œå¼€å¯äº† 2357 ç«¯å£ï¼Œå°†ä¼šå¯¼è‡´ç§æœ‰ä»“åº“æš´éœ²åœ¨å…¬ç½‘ä¸­ï¼Œæ”»å‡»è€…å¯ç›´æ¥è®¿é—®ç§æœ‰ä»“åº“å¹¶ç¯¡æ”¹é•œåƒå†…å®¹ï¼Œé€ æˆä»“åº“å†…é•œåƒçš„å®‰å…¨éšæ‚£ã€‚</li></ul></li><li>é•œåƒæ‹‰å–å®‰å…¨<ul><li>ç”±äº Docker ä»¥æ˜æ–‡å½¢å¼æ‹‰å–é•œåƒï¼Œå¦‚æœç”¨æˆ·åœ¨ä¸é•œåƒä»“åº“äº¤äº’çš„è¿‡ç¨‹ä¸­é­é‡äº†ä¸­é—´äººæ”»å‡»ï¼Œå¯¼è‡´æ‹‰å–çš„é•œåƒåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ç¯¡æ”¹æˆ–è¢«å†’åå‘å¸ƒæ¶æ„é•œåƒï¼Œä¼šé€ æˆé•œåƒä»“åº“å’Œç”¨æˆ·åŒæ–¹çš„å®‰å…¨é£é™©ã€‚</li><li>Docker å·²åœ¨å…¶ 1.8 ç‰ˆæœ¬åé‡‡ç”¨å†…å®¹æ ¡éªŒæœºåˆ¶è§£å†³ä¸­é—´äººæ”»å‡»çš„é—®é¢˜ã€‚</li></ul></li></ul><h4 id="å®¹å™¨è™šæ‹ŸåŒ–å®‰å…¨é£é™©"><a href="#å®¹å™¨è™šæ‹ŸåŒ–å®‰å…¨é£é™©" class="headerlink" title="å®¹å™¨è™šæ‹ŸåŒ–å®‰å…¨é£é™©"></a>å®¹å™¨è™šæ‹ŸåŒ–å®‰å…¨é£é™©</h4><p>ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºç›¸æ¯”ï¼ŒDockerå®¹å™¨ä¸æ‹¥æœ‰ç‹¬ç«‹çš„èµ„æºé…ç½®ï¼Œä¸”æ²¡æœ‰åšåˆ°æ“ä½œç³»ç»Ÿå†…æ ¸å±‚é¢çš„éš”ç¦»ï¼Œå› æ­¤å¯èƒ½å­˜åœ¨èµ„æºéš”ç¦»ä¸å½»åº•ä¸èµ„æºé™åˆ¶ä¸åˆ°ä½æ‰€å¯¼è‡´çš„å®‰å…¨é£é™©ã€‚</p><h5 id="å®¹å™¨éš”ç¦»é—®é¢˜"><a href="#å®¹å™¨éš”ç¦»é—®é¢˜" class="headerlink" title="å®¹å™¨éš”ç¦»é—®é¢˜"></a>å®¹å™¨éš”ç¦»é—®é¢˜</h5><p>å¯¹äº Docker å®¹å™¨è€Œè¨€ï¼Œç”±äºå®¹å™¨ä¸å®¿ä¸»æœºå…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå› æ­¤å­˜åœ¨å®¹å™¨ä¸å®¿ä¸»æœºä¹‹é—´ã€å®¹å™¨ä¸å®¹å™¨ä¹‹é—´éš”ç¦»æ–¹é¢çš„å®‰å…¨é£é™©ï¼Œå…·ä½“åŒ…æ‹¬è¿›ç¨‹éš”ç¦»ã€æ–‡ä»¶ç³»ç»Ÿéš”ç¦»ã€è¿›ç¨‹é—´é€šä¿¡éš”ç¦»ç­‰ã€‚éš”ç¦»é—®é¢˜å·²ç»åœ¨å®‰å…¨æ€§ä¸éš”ç¦»æ€§ä¸­è®¨è®ºï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚</p><p>é’ˆå¯¹å®¹å™¨éš”ç¦»å®‰å…¨é£é™©é—®é¢˜ï¼Œä¸»è¦å­˜åœ¨ä»¥ä¸‹ä¸¤ç§éš”ç¦»å¤±æ•ˆçš„æƒ…å†µï¼š</p><ul><li>æ”»å‡»è€…å¯èƒ½é€šè¿‡å¯¹å®¿ä¸»æœºå†…æ ¸è¿›è¡Œæ”»å‡»è¾¾åˆ°æ”»å‡»å…¶ä¸­æŸä¸ªå®¹å™¨çš„ç›®çš„ã€‚</li><li>ç”±äºå®¹å™¨æ‰€åœ¨ä¸»æœºæ–‡ä»¶ç³»ç»Ÿå­˜åœ¨è”åˆæŒ‚è½½çš„æƒ…å†µï¼Œæ¶æ„ç”¨æˆ·æ§åˆ¶çš„å®¹å™¨ä¹Ÿå¯èƒ½é€šè¿‡å…±åŒæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿè®¿é—®å…¶ä»–å®¹å™¨æˆ–å®¿ä¸»æœºï¼Œé€ æˆæ•°æ®å®‰å…¨é—®é¢˜ã€‚</li></ul><h5 id="å®¹å™¨é€ƒé€¸æ”»å‡»"><a href="#å®¹å™¨é€ƒé€¸æ”»å‡»" class="headerlink" title="å®¹å™¨é€ƒé€¸æ”»å‡»"></a>å®¹å™¨é€ƒé€¸æ”»å‡»</h5><p>å®¹å™¨é€ƒé€¸æ”»å‡»æŒ‡çš„æ˜¯å®¹å™¨åˆ©ç”¨ç³»ç»Ÿæ¼æ´ï¼Œâ€œé€ƒé€¸â€å‡ºäº†å…¶è‡ªèº«æ‰€æ‹¥æœ‰çš„æƒé™ï¼Œå®ç°äº†å¯¹å®¿ä¸»æœºå’Œå®¿ä¸»æœºä¸Šå…¶ä»–å®¹å™¨çš„è®¿é—®ã€‚ç”±äºå®¹å™¨ä¸å®¿ä¸»æœºå…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œä¸ºäº†é¿å…å®¹å™¨è·å–å®¿ä¸»æœºçš„ root æƒé™ï¼Œé€šå¸¸ä¸å…è®¸é‡‡ç”¨ç‰¹æƒæ¨¡å¼è¿è¡Œ Docker å®¹å™¨ã€‚å®¹å™¨é€ƒé€¸æ”»å‡»åœ¨æœ¬æ¬¡ç—…æ¯’å­¦å¤§ä½œä¸šå¼€é¢˜å‰æ›¾è¢«ä½œä¸ºç»„é˜Ÿçš„æœ€ä¸»è¦è¯¾é¢˜å†…å®¹ã€‚</p><p>åœ¨å®¹å™¨é€ƒé€¸æ¡ˆä¾‹ä¸­ï¼Œæœ€ä¸ºè‘—åçš„æ˜¯ <code>shocker.c</code> ç¨‹åºï¼Œå…¶é€šè¿‡è°ƒç”¨ <code>open_by_handle_at</code> å‡½æ•°å¯¹å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæš´åŠ›æ‰«æï¼Œä»¥è·å–å®¿ä¸»æœºçš„ç›®æ ‡æ–‡ä»¶å†…å®¹ã€‚ç”±äº Docker 1.0 ä¹‹å‰ç‰ˆæœ¬å¯¹å®¹å™¨èƒ½åŠ›ä½¿ç”¨é»‘åå•ç­–ç•¥è¿›è¡Œç®¡ç†ï¼Œå¹¶æ²¡æœ‰é™åˆ¶ <code>CAP_DAC_READ_SEARCH</code> èƒ½åŠ›ï¼Œæ‰€ä»¥ <code>shocker.c</code> å¯ä»¥è°ƒç”¨ <code>open_by_handle_at</code> å‡½æ•°ï¼Œå¯¼è‡´å®¹å™¨é€ƒé€¸çš„å‘ç”Ÿã€‚å› æ­¤ï¼Œå¯¹å®¹å™¨èƒ½åŠ›çš„é™åˆ¶ä¸å½“æ˜¯å¯èƒ½é€ æˆå®¹å™¨é€ƒé€¸ç­‰å®‰å…¨é—®é¢˜çš„é£é™©æˆå› ä¹‹ä¸€ã€‚æ‰€å¹¸çš„æ˜¯ï¼ŒDocker åœ¨åç»­ç‰ˆæœ¬ä¸­å¯¹å®¹å™¨èƒ½åŠ›é‡‡ç”¨ç™½åå•ç®¡ç†ï¼Œé¿å…äº†é»˜è®¤åˆ›å»ºçš„å®¹å™¨é€šè¿‡ <code>shocker.c</code> æ¡ˆä¾‹å®ç°å®¹å™¨é€ƒé€¸çš„æƒ…å†µã€‚</p><p>åæ¥åœ¨ Black Hat USA 2019 ä¼šè®®ä¸­ï¼Œæ¥è‡ª Capsule8 çš„ç ”ç©¶å‘˜ä¹Ÿç»™å‡ºäº†è‹¥å¹² Docker å®¹å™¨å¼•æ“æ¼æ´ä¸å®¹å™¨é€ƒé€¸æ”»å‡»æ–¹æ³•ï¼ŒåŒ…æ‹¬ <strong>CVE-2019-5736</strong>ã€<strong>CVE-2018-18955</strong>ã€<strong>CVE-2016-5195</strong> ç­‰å¯èƒ½é€ æˆå®¹å™¨é€ƒé€¸çš„æ¼æ´ã€‚</p><ul><li>CVE-2019-5736 æ˜¯ <code>runC</code> çš„ä¸€ä¸ªå®‰å…¨æ¼æ´ï¼Œå¯¼è‡´ 18.09.2 ç‰ˆæœ¬å‰çš„ Docker å…è®¸æ¶æ„å®¹å™¨è¦†ç›–å®¿ä¸»æœºä¸Šçš„ <code>runC</code> äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<code>runC</code> æ˜¯ç”¨äºåˆ›å»ºå’Œè¿è¡Œ Docker å®¹å™¨çš„ CLI å·¥å…·ï¼Œè¯¥æ¼æ´ä½¿æ”»å‡»è€…èƒ½å¤Ÿä»¥ <code>root</code> èº«ä»½åœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œä»»æ„å‘½ä»¤ã€‚</li><li>CVE-2018-18955 æ¼æ´æ¶‰åŠåˆ° User å‘½åç©ºé—´ä¸­çš„åµŒå¥—ç”¨æˆ·å‘½åç©ºé—´ï¼Œç”¨æˆ·å‘½åç©ºé—´ä¸­é’ˆå¯¹ <code>uid</code> å’Œ <code>gid</code> çš„ ID æ˜ å°„æœºåˆ¶ä¿è¯äº†è¿›ç¨‹æ‹¥æœ‰çš„æƒé™ä¸ä¼šé€¾è¶Šå…¶çˆ¶å‘½åç©ºé—´çš„èŒƒç•´ã€‚è¯¥æ¼æ´åˆ©ç”¨åˆ›å»ºç”¨æˆ·å‘½åç©ºé—´çš„å­å‘½åç©ºé—´æ—¶æŸåçš„IDæ˜ å°„å®ç°ææƒã€‚</li><li>CVE-2016-5195 è„ç‰›ï¼ˆDirty COWï¼‰Linuxå†…æ ¸ææƒæ¼æ´å¯ä»¥ä½¿ä½æƒé™ç”¨æˆ·åœ¨å¤šç‰ˆæœ¬ Linux ç³»ç»Ÿä¸Šå®ç°æœ¬åœ°ææƒï¼Œè¿›è€Œå¯èƒ½å¯¼è‡´å®¹å™¨é€ƒé€¸çš„å‘ç”Ÿã€‚æœ¬æ¬¡ç—…æ¯’å­¦å¤§ä½œä¸šä¹Ÿå°† Dirty COW ä½œä¸ºç¬¬äºŒä¸ªç ”ç©¶çš„å†…å®¹ã€‚</li></ul><h5 id="æ‹’ç»æœåŠ¡æ”»å‡»"><a href="#æ‹’ç»æœåŠ¡æ”»å‡»" class="headerlink" title="æ‹’ç»æœåŠ¡æ”»å‡»"></a>æ‹’ç»æœåŠ¡æ”»å‡»</h5><p>ç”±äºå®¹å™¨ä¸å®¿ä¸»æœºå…±äº« CPUã€å†…å­˜ã€ç£ç›˜ç©ºé—´ç­‰ç¡¬ä»¶èµ„æºï¼Œä¸” Docker æœ¬èº«å¯¹å®¹å™¨ä½¿ç”¨çš„èµ„æºå¹¶æ²¡æœ‰é»˜è®¤é™åˆ¶ï¼Œå¦‚æœå•ä¸ªå®¹å™¨è€—å°½å®¿ä¸»æœºçš„è®¡ç®—èµ„æºæˆ–å­˜å‚¨èµ„æºï¼ˆä¾‹å¦‚è¿›ç¨‹æ•°é‡ã€å­˜å‚¨ç©ºé—´ç­‰ï¼‰å¯èƒ½å¯¼è‡´å®¿ä¸»æœºæˆ–å…¶ä»–å®¹å™¨çš„æ‹’ç»æœåŠ¡ã€‚</p><p>é’ˆå¯¹ Docker çš„ Dos æ”»å‡»ä¸»è¦æœ‰ä¸¤ç§ï¼š</p><ol><li><p>è®¡ç®—å‹ DoS æ”»å‡»</p><p>Fork Bomb æ˜¯ä¸€ç±»å…¸å‹çš„é’ˆå¯¹è®¡ç®—èµ„æºçš„æ‹’ç»æœåŠ¡æ”»å‡»æ‰‹æ®µï¼Œå…¶å¯é€šè¿‡é€’å½’æ–¹å¼æ— é™å¾ªç¯è°ƒç”¨ <code>fork()</code> ç³»ç»Ÿå‡½æ•°å¿«é€Ÿåˆ›å»ºå¤§é‡è¿›ç¨‹ã€‚ç”±äºå®¿ä¸»æœºæ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„è¿›ç¨‹æ€»æ•°æœ‰é™ï¼Œå¦‚æœæŸä¸ªå®¹å™¨é­åˆ°äº† Fork Bomb æ”»å‡»ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å­˜åœ¨ç”±äºçŸ­æ—¶é—´å†…åœ¨è¯¥å®¹å™¨å†…åˆ›å»ºè¿‡å¤šè¿›ç¨‹è€Œè€—å°½å®¿ä¸»æœºè¿›ç¨‹èµ„æºçš„æƒ…å†µï¼Œå®¿ä¸»æœºåŠå…¶ä»–å®¹å™¨å°±æ— æ³•å†åˆ›å»ºæ–°çš„è¿›ç¨‹ã€‚</p></li><li><p>å­˜å‚¨å‹ DoS æ”»å‡»</p><p>é’ˆå¯¹å­˜å‚¨èµ„æºï¼Œè™½ç„¶ Docker é€šè¿‡ <code>Mount</code> å‘½åç©ºé—´å®ç°äº†æ–‡ä»¶ç³»ç»Ÿçš„éš”ç¦»ï¼Œä½† CGroups å¹¶æ²¡æœ‰é’ˆå¯¹ AUFS æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå•ä¸ªå®¹å™¨çš„å­˜å‚¨èµ„æºé™åˆ¶ï¼Œå› æ­¤é‡‡ç”¨ AUFS ä½œä¸ºå­˜å‚¨é©±åŠ¨å…·æœ‰ä¸€å®šçš„å®‰å…¨é£é™©ã€‚å¦‚æœå®¿ä¸»æœºä¸Šçš„æŸä¸ªå®¹å™¨å‘ AUFS æ–‡ä»¶ç³»ç»Ÿä¸­ä¸æ–­åœ°è¿›è¡Œå†™æ–‡ä»¶æ“ä½œï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´å®¿ä¸»æœºå­˜å‚¨è®¾å¤‡ç©ºé—´ä¸è¶³ï¼Œæ— æ³•å†æ»¡è¶³å…¶è‡ªèº«åŠå…¶ä»–å®¹å™¨çš„æ•°æ®å­˜å‚¨éœ€æ±‚ã€‚</p></li></ol><h4 id="ç½‘ç»œå®‰å…¨é£é™©"><a href="#ç½‘ç»œå®‰å…¨é£é™©" class="headerlink" title="ç½‘ç»œå®‰å…¨é£é™©"></a>ç½‘ç»œå®‰å…¨é£é™©</h4><p>ç½‘ç»œå®‰å…¨é£é™©æ˜¯äº’è”ç½‘ä¸­æ‰€æœ‰ä¿¡æ¯ç³»ç»Ÿæ‰€é¢ä¸´çš„é‡è¦é£é™©ï¼Œä¸è®ºæ˜¯ç‰©ç†è®¾å¤‡è¿˜æ˜¯è™šæ‹Ÿæœºï¼Œéƒ½å­˜åœ¨éš¾ä»¥å®Œå…¨è§„é¿çš„ç½‘ç»œå®‰å…¨é£é™©é—®é¢˜ã€‚è€Œåœ¨è½»é‡çº§è™šæ‹ŸåŒ–çš„å®¹å™¨ç½‘ç»œç¯å¢ƒä¸­ï¼Œå…¶ç½‘ç»œå®‰å…¨é£é™©è¾ƒä¼ ç»Ÿç½‘ç»œè€Œè¨€æ›´ä¸ºå¤æ‚ä¸¥å³»ã€‚</p><h5 id="å®¹å™¨ç½‘ç»œæ”»å‡»"><a href="#å®¹å™¨ç½‘ç»œæ”»å‡»" class="headerlink" title="å®¹å™¨ç½‘ç»œæ”»å‡»"></a>å®¹å™¨ç½‘ç»œæ”»å‡»</h5><p>Dockeræä¾›æ¡¥æ¥ç½‘ç»œã€MacVLANã€è¦†ç›–ç½‘ç»œï¼ˆOverlayï¼‰ç­‰å¤šç§ç»„ç½‘æ¨¡å¼ï¼Œå¯åˆ†åˆ«å®ç°åŒä¸€å®¿ä¸»æœºå†…å®¹å™¨äº’è”ã€è·¨å®¿ä¸»æœºå®¹å™¨äº’è”ã€å®¹å™¨é›†ç¾¤ç½‘ç»œç­‰åŠŸèƒ½ã€‚</p><ol><li><p>ç½‘æ¡¥æ¨¡å¼</p><p>Docker é»˜è®¤é‡‡ç”¨ç½‘æ¡¥æ¨¡å¼ï¼Œåˆ©ç”¨ iptables è¿›è¡Œ NAT è½¬æ¢å’Œç«¯å£æ˜ å°„ã€‚Docker å°†æ‰€æœ‰å®¹å™¨éƒ½é€šè¿‡è™šæ‹Ÿç½‘ç»œæ¥å£å¯¹è¿æ¥åœ¨ä¸€ä¸ªåä¸º <code>docker0</code> çš„è™šæ‹Ÿç½‘æ¡¥ä¸Šï¼Œä½œä¸ºå®¹å™¨çš„é»˜è®¤ç½‘å…³ï¼Œè€Œè¯¥ç½‘æ¡¥ä¸å®¿ä¸»æœºç›´æ¥ç›¸è¿ã€‚ç”±äºå®¹å™¨ç½‘ç»œç›´æ¥ä¸ <code>docker0</code> ç›¸è¿ï¼Œä¸åŒå®¹å™¨é—´å¯ä»¥é€šè¿‡ç½‘æ¡¥ç›´æ¥é€šä¿¡ï¼Œè€Œå®¿ä¸»æœºå¤–éƒ¨æ— æ³•è®¿é—®å®¹å™¨ã€‚</p><p>ç”±äºç¼ºä¹å®¹å™¨é—´çš„ç½‘ç»œå®‰å…¨ç®¡ç†æœºåˆ¶ï¼Œæ— æ³•å¯¹åŒä¸€å®¿ä¸»æœºå†…å„å®¹å™¨ä¹‹é—´çš„ç½‘ç»œè®¿é—®æƒé™è¿›è¡Œé™åˆ¶ã€‚å¦‚æœå®¹å™¨é—´æ²¡æœ‰é˜²ç«å¢™ç­‰ä¿æŠ¤æœºåˆ¶ï¼Œåˆ™æ”»å‡»è€…å¯é€šè¿‡æŸä¸ªå®¹å™¨å¯¹å®¿ä¸»æœºå†…çš„å…¶ä»–å®¹å™¨è¿›è¡Œ ARP æ¬ºéª—ã€å—…æ¢ã€å¹¿æ’­é£æš´ç­‰æ”»å‡»ï¼Œå¯¼è‡´ä¿¡æ¯æ³„éœ²ã€å½±å“ç½‘ç»œæ­£å¸¸è¿è¡Œç­‰å®‰å…¨åæœã€‚</p></li><li><p>MacVLAN</p><p>MacVLAN æ˜¯ä¸€ç§è½»é‡çº§ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œé€šè¿‡ä¸ä¸»æœºçš„ç½‘ç»œæ¥å£è¿æ¥å®ç°äº†ä¸å®ä½“ç½‘ç»œçš„éš”ç¦»æ€§ã€‚å®ƒå…è®¸ä¸ºåŒä¸€ä¸ªç‰©ç†ç½‘å¡é…ç½®å¤šä¸ªæ‹¥æœ‰ç‹¬ç«‹ MAC åœ°å€çš„ç½‘ç»œæ¥å£å¹¶å¯åˆ†åˆ«é…ç½® IP åœ°å€ï¼Œå®ç°äº†ç½‘å¡çš„è™šæ‹ŸåŒ–ã€‚ä½†æ˜¯å®ƒä»ç„¶æ²¡æœ‰è§£å†³åœ¨åŒä¸€ VLAN å†…éƒ¨çš„å®¹å™¨ä¹‹é—´è¿›è¡Œç½‘ç»œæ”»å‡»çš„é£é™©ã€‚</p></li><li><p>Overlay ç½‘ç»œ</p><p>Overlay ç½‘ç»œæ¶æ„ä¸»è¦ç”¨äºæ„å»ºåˆ†å¸ƒå¼å®¹å™¨é›†ç¾¤ï¼Œé€šè¿‡ VxLAN æŠ€æœ¯åœ¨ä¸åŒä¸»æœºä¹‹é—´çš„ Underlay ç½‘ç»œä¸Šå»ºç«‹è™šæ‹Ÿç½‘ç»œï¼Œä»¥æ­å»ºè·¨ä¸»æœºå®¹å™¨é›†ç¾¤ï¼Œå®ç°ä¸åŒç‰©ç†ä¸»æœºä¸­åŒä¸€ Overlay ç½‘ç»œä¸‹çš„å®¹å™¨é—´é€šä¿¡ã€‚ä¸å…¶ä»–ç»„ç½‘æ¨¡å¼ä¸€æ ·ï¼ŒOverlay ç½‘ç»œä¹Ÿæ²¡æœ‰å¯¹åŒä¸€ç½‘ç»œå†…å„å®¹å™¨é—´çš„è¿æ¥è¿›è¡Œè®¿é—®æ§åˆ¶ã€‚æ­¤å¤–ï¼Œç”±äº VxLAN ç½‘ç»œæµé‡æ²¡æœ‰åŠ å¯†ï¼Œéœ€è¦åœ¨è®¾å®š IPSec éš§é“å‚æ•°æ—¶é€‰æ‹©åŠ å¯†ä»¥ä¿è¯å®¹å™¨ç½‘ç»œä¼ è¾“å†…å®¹å®‰å…¨ã€‚</p></li></ol><h5 id="ç½‘ç»œ-DoS-æ”»å‡»"><a href="#ç½‘ç»œ-DoS-æ”»å‡»" class="headerlink" title="ç½‘ç»œ DoS æ”»å‡»"></a>ç½‘ç»œ DoS æ”»å‡»</h5><p>Docker å®¹å™¨ç½‘ç»œçš„ DoS æ”»å‡»åˆ†ä¸ºå†…éƒ¨å¨èƒå’Œå¤–éƒ¨å¨èƒä¸¤ç§ä¸»è¦å½¢å¼ã€‚</p><ul><li><p>å†…éƒ¨å¨èƒ</p><ul><li>åŸºäºå®¹å™¨ç½‘ç»œæ”»å‡»ï¼ŒDoS æ”»å‡»å¯ç›´æ¥åœ¨å®¹å™¨ä¹‹é—´è¿›è¡Œï¼Œæ”»å‡»è€…é€šè¿‡æŸä¸ªå®¹å™¨å‘å…¶ä»–å®¹å™¨å‘èµ· DoS æ”»å‡»å¯èƒ½é™ä½å…¶ä»–å®¹å™¨çš„ç½‘ç»œæ•°æ®å¤„ç†èƒ½åŠ›ã€‚</li></ul></li><li><p>å¤–éƒ¨å¨èƒ</p><ul><li>ç”±äºåŒä¸€å°å®¿ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å…±äº«å®¿ä¸»æœºçš„ç‰©ç†ç½‘å¡èµ„æºï¼Œè‹¥å¤–éƒ¨æ”»å‡»è€…ä½¿ç”¨åŒ…å«å¤§é‡å—æ§ä¸»æœºçš„åƒµå°¸ç½‘ç»œå‘æŸä¸€ä¸ªç›®æ ‡å®¹å™¨å‘é€å¤§é‡æ•°æ®åŒ…è¿›è¡Œ DDoS æ”»å‡»ï¼Œå°†å¯èƒ½å æ»¡å®¿ä¸»æœºçš„ç½‘ç»œå¸¦å®½èµ„æºï¼Œé€ æˆå®¿ä¸»æœºå’Œå…¶ä»–å®¹å™¨çš„æ‹’ç»æœåŠ¡ã€‚</li></ul></li></ul><h2 id="Dirty-COW-æ¼æ´"><a href="#Dirty-COW-æ¼æ´" class="headerlink" title="Dirty COW æ¼æ´"></a>Dirty COW æ¼æ´</h2><blockquote><p>The Dirty COW vulnerability (CVE-2016-5195) is a recent (and interesting) privilege escalation vulnerability in the Linux kernel.  By exploiting this vulnerability, an ordinary, non-privileged user already on a machine can take complete control. Dirty COW works by taking advantage of a flaw in how the Linux kernel manages memory â€“ more specifically, an optimization technique in how memory pages are utilized.</p></blockquote><p>ç›¸æ¯”äºä¸Šä¸€ä¸ª Docker è®¾è®¡çš„æ¼æ´ï¼ŒDirty COW æ˜¯åˆ©ç”¨çš„äº†å†…å­˜è¯»å†™çš„ç¼–ç¨‹æ¼æ´ï¼Œå¼ºè¡Œé€šè¿‡åˆ·å†™å†…å­˜è¾¾åˆ°å†™å…¥åªè¯»æ–‡ä»¶çš„ç›®çš„ã€‚</p><h3 id="Dirty-COW-æ¼æ´åˆ†æåŠä»£ç è§£é‡Š"><a href="#Dirty-COW-æ¼æ´åˆ†æåŠä»£ç è§£é‡Š" class="headerlink" title="Dirty COW æ¼æ´åˆ†æåŠä»£ç è§£é‡Š"></a>Dirty COW æ¼æ´åˆ†æåŠä»£ç è§£é‡Š</h3><h4 id="Copy-on-Write"><a href="#Copy-on-Write" class="headerlink" title="Copy on Write"></a>Copy on Write</h4><p>åœ¨å¾®è½¯çš„å®˜æ–¹æ–‡æ¡£é‡Œï¼Œè¯¦ç»†çš„è§£é‡Šäº† Copy on Write ä¼˜åŒ–ã€‚å®ƒå…è®¸å¤šä¸ªè¿›ç¨‹æ˜ å°„åˆ°åŒä¸€ä¸ªç‰©ç†é¡µé¢è¿›è¡Œå…±äº«ï¼Œç›´åˆ°æŸä¸€è¿›ç¨‹æƒ³è¦ä¿®æ”¹é¡µé¢ã€‚é€šè¿‡ Copy on Write æŠ€æœ¯ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å°†å†…å­˜åˆç†å®‰æ’ï¼Œåœ¨éå¿…è¦çš„æƒ…å†µä¸‹ä¸æ‰§è¡Œæ“ä½œï¼Œä»¥è¾¾åˆ°èŠ‚çœç‰©ç†å†…å­˜å’Œæ—¶é—´çš„ç›®çš„ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¿›ç¨‹è¢«æ˜ å°„åˆ°äº†åŒç‰©ç†é¡µé¢å†…ï¼ˆå¦‚å›¾ï¼‰</p><p><img src="https://docs.microsoft.com/en-us/windows/win32/memory/images/mem1.png" alt=""></p><p>å¦‚æœç¨‹åºä¸éœ€è¦å¯¹å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œåˆ™å¯ä»¥æœ€å¤§åŒ–åˆ©ç”¨ç‰©ç†å†…å­˜é¡µé¢ã€‚å¦‚æœ Process 1 æƒ³è¦å¯¹ Page 2 è¿›è¡Œä¿®æ”¹ï¼Œæ“ä½œç³»ç»Ÿä¼šå…ˆå°† Page B å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ç‰©ç†é¡µé¢ Page Dï¼Œå¹¶ä¸º Process 1 æ›´æ–°è™šæ‹Ÿå†…å­˜æ˜ å°„ã€‚æŒ‰ç…§æˆ‘çš„æƒ³æ³•ï¼Œæ­¤åæ“ä½œç³»ç»Ÿä¼šå¯»æ‰¾åˆé€‚çš„æ—¶æœºï¼Œå³ä¸¤è¿›ç¨‹å¯èƒ½é•¿æœŸä¸ä¼šå†è¿›è¡Œä¿®æ”¹æ—¶å†å°†å…¶è¿›è¡Œåˆå¹¶æ“ä½œã€‚ï¼ˆå¦‚å›¾ï¼‰</p><p><img src="https://docs.microsoft.com/en-us/windows/win32/memory/images/mem2.png" alt=""></p><p>åœ¨ Windows ç³»ç»Ÿä¸Šï¼Œæ–‡æ¡£ä¸­æåˆ°ï¼Œåœ¨åŠ è½½åº”ç”¨ç¨‹åºæ—¶ï¼Œæ¯ä¸ªå®ä¾‹éƒ½åœ¨è‡ªå·±çš„å—ä¿æŠ¤è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­è¿è¡Œã€‚ç„¶è€Œï¼Œä»–ä»¬çš„å®ä¾‹å¥æŸ„ï¼ˆ<em>hInstance</em>ï¼‰é€šå¸¸å…·æœ‰ç›¸åŒçš„å€¼ã€‚æ­¤å€¼è¡¨ç¤ºåº”ç”¨ç¨‹åºè™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„åŸºæœ¬åœ°å€ã€‚å¦‚æœæ¯ä¸ªå®ä¾‹éƒ½å¯ä»¥åŠ è½½åˆ°é»˜è®¤åŸºåœ°å€ï¼Œå®ƒå¯ä»¥é€šè¿‡ Copy on Write ä¿æŠ¤æ˜ å°„åˆ°å…¶ä»–å®ä¾‹å¹¶ä¸ä»–ä»¬å…±äº«ç›¸åŒçš„ç‰©ç†é¡µé¢ã€‚ç³»ç»Ÿå…è®¸è¿™äº›å®ä¾‹å…±äº«ç›¸åŒçš„ç‰©ç†é¡µé¢ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªå®ä¾‹ä¿®æ”¹é¡µé¢ã€‚å¦‚æœç”±äºæŸç§åŸå› æ— æ³•å°†å…¶ä¸­ä¸€ä¸ªå®ä¾‹åŠ è½½åˆ°æ‰€éœ€çš„åŸºåœ°å€ä¸­ï¼Œå®ƒå°†æ¥æ”¶è‡ªå·±çš„ç‰©ç†é¡µé¢ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦è¿›ç¨‹åªä»è¿™äº›å†…å­˜é¡µé¢è¯»å–ï¼Œå®ƒä»¬å°±ä¼šè¢«å…±äº«ï¼Œä¼˜åŒ–å°±ä¼šç”Ÿæ•ˆã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹åœ¨ä»»ä½•æ—¶å€™å†™å…¥è¿™äº›å…±äº«é¡µé¢ä¹‹ä¸€ï¼Œåˆ™æ•°æ®å°†è¢«å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ç‰©ç†é¡µé¢ï¼Œå¹¶æ›´æ–°è™šæ‹Ÿåˆ°ç‰©ç†å†…å­˜æ˜ å°„ä»¥åæ˜ æ›´æ”¹ã€‚è¿™ç§æŠ€æœ¯ç”¨äºè®¸å¤šä¸åŒçš„åœºæ™¯ï¼Œå¦‚åŠ è½½çš„dllã€åˆ†å‰è¿›ç¨‹ã€æ–‡ä»¶ç³»ç»Ÿæ•°æ®å—ç­‰ã€‚</p><h4 id="å¹¶å‘å¤šçº¿ç¨‹"><a href="#å¹¶å‘å¤šçº¿ç¨‹" class="headerlink" title="å¹¶å‘å¤šçº¿ç¨‹"></a>å¹¶å‘å¤šçº¿ç¨‹</h4><p>æ“ä½œç³»ç»Ÿé€šå¸¸å¯¹å¹¶å‘çš„å¤šçº¿ç¨‹è®¿é—®å…±äº«æ•°æ®æ—¶æ·»åŠ é”ã€‚é€šè¿‡äº’æ–¥æ¡ä»¶ä½¿å¯¹åŒä¸€å˜é‡çš„ä¸åŒè®¿é—®åˆ†å¼€ï¼Œæˆ–ä½¿ç”¨å…¶ä»–çš„æ–¹å¼ï¼Œå¦‚ Windows ä¸Šçš„ InterlockedIncrement()ï¼Œä½¿å®ƒä»¬æˆä¸ºåŸå­ã€‚å½“å‘ç”Ÿ Race Condition æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€äº›å°çš„æ—¶é—´çª—å£ï¼Œæ—¶é—´çª—å£å†…ä¸€äº›é¢„æœŸä¹‹å¤–çš„æ“ä½œå°±å¯ä»¥è¢«æ‰§è¡Œã€‚</p><blockquote><p>A race condition is when the end result of an operation or sequence of operations is dependent on the order or timing of the operation(s). </p></blockquote><p>é€šå¸¸æ¥è¯´ï¼Œæ—¶é—´çª—å£çš„å¤§å°å†³å®šäº†è¿™ä¸ªæ¼æ´å¯ä»¥è¢«åˆ©ç”¨çš„éš¾æ˜“ç¨‹åº¦ã€‚æ¯”å¦‚ VMware åšå®¢çš„ä½œè€…æåˆ°ä»–åœ¨è°ƒè¯•ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œå¯ä»¥åˆ©ç”¨çš„æ—¶é—´çª—å£åªæœ‰ 3Î¼sï¼Œè¿™ä¹Ÿå¯¼è‡´ä»–å¾ˆéš¾å¯¹è¿™ä¸ªæ¼æ´è¿›è¡Œå¤ç°ï¼Œä»è€Œä½¿å¾—å®ƒéš¾ä»¥ä¿®å¤ã€‚</p><p>åœ¨ Dirty COW æ¼æ´ä¸­ï¼Œç—…æ¯’è¿›ç¨‹é€šè¿‡å¾ªç¯å°è¯• 100,000,000 æ¬¡æ¥åŠ å¤§æ¼æ´å¯ä»¥è¢«åˆ©ç”¨çš„æ¦‚ç‡ï¼Œæé«˜ Copy on Write çš„æˆåŠŸç‡ã€‚</p><h4 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h4><p>Dirty COW çš„ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Main:</span><br><span class="line">    fd = open(filename, O_RDONLY)</span><br><span class="line">    fstat(fd, &amp;st)</span><br><span class="line">    <span class="built_in">map</span> = mmap(<span class="literal">NULL</span>, st.st_size , PROT_READ, MAP_PRIVATE, fd, <span class="number">0</span>)</span><br><span class="line">    start Thread1</span><br><span class="line">    start Thread2</span><br><span class="line">    </span><br><span class="line">Thread1ï¼š</span><br><span class="line">    f = open(<span class="string">&quot;/proc/self/mem&quot;</span>, O_RDWR)</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>):</span><br><span class="line">        lseek(f, <span class="built_in">map</span>, SEEK_SET)</span><br><span class="line">        write(f, shellcode, <span class="built_in">strlen</span>(shellcode))</span><br><span class="line">        </span><br><span class="line">Thread2ï¼š</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>):</span><br><span class="line">        madvise(<span class="built_in">map</span>, <span class="number">100</span>, MADV_DONTNEED)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½œä¸ºåªæœ‰è¯»æ–‡ä»¶æƒé™çš„æ™®é€šç”¨æˆ·ï¼Œåœ¨æ‰“å¼€æ–‡ä»¶æ—¶å¿…é¡»å…ˆä½¿ç”¨ Read Onlyï¼Œç„¶åä½¿ç”¨ MAP_PRIVATE æ ‡è®°æ˜ å°„æ–‡ä»¶åˆ°å†…å­˜åŒºåŸŸã€‚å®Œæˆåå°±å¯ä»¥å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹å¼€å§‹ç«äº‰äº†ã€‚Thread 1 ä»¥è¯»å†™æƒé™æ‰“å¼€ <code>/proc/self/mem</code>ã€‚ç”±äºåœ¨å†…æ ¸ä¸­ä½¿ç”¨çš„ OOP æ€æƒ³ï¼Œå…¶é€šç”¨çš„æŠ½è±¡ç±»ç»“æ„æºè‡ªäº <code>/proc/&#123;pid&#125;/men</code>ï¼Œå®ƒåŒ…å«äº†ä»¥ä¸‹ç»“æ„ä½“å†…å˜é‡ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">file_operations</span> <span class="title">proc_mem_operations</span> = &#123;</span></span><br><span class="line">    .llseek  = mem_lseek,</span><br><span class="line">    .read    = mem_read,</span><br><span class="line">    .write   = mem_write,</span><br><span class="line">    .open    = mem_open,</span><br><span class="line">    .release = mem_release,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬éœ€è¦å†™å…¥ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶æ—¶ï¼Œå†…æ ¸å°†è°ƒç”¨ <code>mem_write</code> å‡½æ•°ï¼Œå®ƒæœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹ <code>mem_rw</code> å‡½æ•°çš„å°è£…ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">ssize_t</span> <span class="title">mem_rw</span><span class="params">(struct file *file, <span class="keyword">char</span> __user *buf, <span class="keyword">size_t</span> count, <span class="keyword">loff_t</span> *ppos, <span class="keyword">int</span> write)</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">mm_struct</span> *<span class="title">mm</span> = <span class="title">file</span>-&gt;<span class="title">private_data</span>;</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> addr = *ppos;</span><br><span class="line">    <span class="keyword">ssize_t</span> copied;</span><br><span class="line">    <span class="keyword">char</span> *page;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!mm)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* allocate an exchange buffer */</span></span><br><span class="line">    page = (<span class="keyword">char</span> *)__get_free_page(GFP_TEMPORARY);</span><br><span class="line">    <span class="keyword">if</span> (!page)</span><br><span class="line">        <span class="keyword">return</span> -ENOMEM;</span><br><span class="line"></span><br><span class="line">    copied = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (!atomic_inc_not_zero(&amp;mm-&gt;mm_users))</span><br><span class="line">        <span class="keyword">goto</span> <span class="built_in">free</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> this_len = <span class="keyword">min_t</span>(<span class="keyword">int</span>, count, PAGE_SIZE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* copy user content to the exchange buffer */</span></span><br><span class="line">        <span class="keyword">if</span> (write &amp;&amp; copy_from_user(page, buf, this_len)) &#123;</span><br><span class="line">            copied = -EFAULT;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this_len = access_remote_vm(mm, addr, page, this_len, write);</span><br><span class="line">        <span class="keyword">if</span> (!this_len) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!copied)</span><br><span class="line">                copied = -EIO;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!write &amp;&amp; copy_to_user(buf, page, this_len)) &#123;</span><br><span class="line">            copied = -EFAULT;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        buf += this_len;</span><br><span class="line">        addr += this_len;</span><br><span class="line">        copied += this_len;</span><br><span class="line">        count -= this_len;</span><br><span class="line">    &#125;</span><br><span class="line">    *ppos = addr;</span><br><span class="line"></span><br><span class="line">    mmput(mm);<span class="built_in">free</span>:</span><br><span class="line">    free_page((<span class="keyword">unsigned</span> <span class="keyword">long</span>) page);</span><br><span class="line">    <span class="keyword">return</span> copied;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒä¼šåœ¨å¼€å§‹æ—¶åˆ†é…ä¸€ä¸ªä¸´æ—¶å†…å­˜ bufferï¼Œç”¨æ¥åœ¨æºè¿›ç¨‹ï¼ˆè¦å†™çš„åªè¯»æ–‡ä»¶ï¼‰å’Œç›®çš„è¿›ç¨‹ï¼ˆ<code>/proc/self/mem</code>ï¼‰ä¹‹é—´è¿›è¡Œå†…å­˜äº¤æ¢ã€‚å› ä¸º Copy on Write çš„ä¸¤ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸èƒ½ç›´æ¥äº’ç›¸è®¿é—®ï¼Œæ‰€ä»¥å®ƒå°†æ‹·è´æºè¿›ç¨‹çš„ buffer åˆ°æ–°ç‰©ç†é¡µé¢ã€‚<code>access_remote_vm</code> å‡½æ•°å…è®¸å†…æ ¸è¯»å†™å¦ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå®ƒæ˜¯æ‰€æœ‰ out-of-band è®¿é—®å†…å­˜æ–¹å¼çš„æ ¸å¿ƒå®ç°ã€‚<code>madvise</code> ç³»ç»Ÿè°ƒç”¨çš„ä½œç”¨æ˜¯ç»™ç³»ç»Ÿå¯¹äºå†…å­˜ä½¿ç”¨çš„ä¸€äº›å»ºè®®ï¼Œ<code>MADV_DONTNEED</code> å‚æ•°å‘Šè¯‰ç³»ç»Ÿæœªæ¥ä¸è®¿é—®è¯¥å†…å­˜äº†ï¼Œå†…æ ¸å¯ä»¥é‡Šæ”¾å†…å­˜é¡µäº†ã€‚å†…æ ¸å‡½æ•° <code>madvise_dontneed</code> ä¸­ä¼šç§»é™¤æŒ‡å®šèŒƒå›´å†…çš„ç”¨æˆ·ç©ºé—´ pageã€‚å¯ä»¥çœ‹åˆ°ï¼Œå†™æ“ä½œç”±ä¸¤æ­¥å®Œæˆï¼š å°†åº”ç”¨å±‚ä¼ è¿›çš„æ•°æ®å†™åˆ°ç›®æ ‡pageä¸­ ä»¥åŠå°†pageè®¾ç½®ä¸ºè„é¡µã€‚<code>madvise(MADV_DONTNEED)</code> åŸºæœ¬åŠŸèƒ½æ˜¯æ¸…é™¤è¢«ç®¡ç†çš„å†…å­˜æ˜ å°„çš„ç‰©ç†é¡µã€‚å°±å½“å‰æƒ…å†µè€Œè¨€ï¼Œ åœ¨è°ƒç”¨å®Œè¯¥å‡½æ•°åï¼Œæåˆ°çš„è¿™äº›é¡µå°†è¢«clearã€‚å½“ä¸‹ä¸€æ¬¡ç”¨æˆ·å°è¯•è®¿é—®è¿™äº›å†…å­˜åŒºåŸŸæ—¶ï¼ŒåŸå§‹çš„å†…å®¹ä¼šé‡æ–°ä»ç£ç›˜æˆ–è€…é¡µç¼“å­˜ä¸­å¯¼å…¥ï¼Œè€Œå¯¹äºåŒ¿åçš„å †å†…å­˜ï¼Œåˆ™ä¼šå¡«å……é›¶ã€‚ </p><p>å¦‚æœæˆ‘ä»¬ç›´æ¥è®¿é—®ä¸€ä¸ªåŸºäºæ–‡ä»¶çš„åªè¯»æ˜ å°„ï¼Œä¸€ä¸ªæ®µé”™è¯¯å°†ä¼šäº§ç”Ÿã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨å†™ <code>/proc/self/mem</code> ç¡®è¿”å›äº†ä¸€ä¸ª Dirty COW é¡µå‘¢ï¼Ÿè¿™ä¸ªåŸå› å–å†³äºå½“åœ¨ä¸€ä¸ªè¿›ç¨‹å†…å‘ç”Ÿå†…å­˜è®¿é—®å’Œå½“é‡‡ç”¨ out-of-band, <code>/proc/&#123;pid&#125;/mem</code> å†…å­˜è®¿é—®æ—¶ï¼Œå†…æ ¸å¦‚ä½•å¤„ç†é¡µé”™è¯¯çš„æƒ…å†µã€‚è¿™ä¸¤ç§æƒ…å†µæœ€ç»ˆéƒ½ä¼šè°ƒ <code>handle_mm_fault</code> æ¥å¤„ç†é¡µé”™è¯¯ã€‚ä½†æ˜¯åè€…ä½¿ç”¨ <code>faultin_page</code> æ¥æ¨¡æ‹Ÿé¡µé”™è¯¯ï¼Œé¡µé”™è¯¯ç›´æ¥å¯¼è‡´è§¦å‘ MMUï¼Œå°†ç›´æ¥è¿›å…¥ä¸­æ–­å¤„ç†å™¨ï¼Œä¹‹åæ‰€æœ‰çš„è·¯å¾„éƒ½è¿›å…¥åˆ°å¹³å°ç‹¬ç«‹çš„å†…æ ¸å¤„ç†å‡½æ•° <code>__do_page_fault</code> ä¸­ã€‚è€Œåœ¨ç›´æ¥å†™åªè¯»å†…å­˜åŒºåŸŸæ—¶ï¼Œhanler å°†æ£€æµ‹åˆ°è®¿é—®è¿ä¾‹åœ¨å‡½æ•° <code>access_error</code> ä¸­ï¼ŒåŒæ—¶åœ¨ <code>handle_mm_fault</code> å¤„ç†ä¹‹å‰ï¼Œç›´æ¥è§¦å‘ä¿¡å· <code>SIGEGV</code> åœ¨å‡½æ•° <code>bad_aea_access_error</code> ä¸­ã€‚</p><h3 id="Dirty-COW-æ¼æ´å¤ç°ä¸­çš„å›°éš¾"><a href="#Dirty-COW-æ¼æ´å¤ç°ä¸­çš„å›°éš¾" class="headerlink" title="Dirty COW æ¼æ´å¤ç°ä¸­çš„å›°éš¾"></a>Dirty COW æ¼æ´å¤ç°ä¸­çš„å›°éš¾</h3><p>åœ¨å°è¯•å¤ç° DirtyCow å†…æ ¸æ¼æ´ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†éå¸¸å¤šçš„å›°éš¾å’ŒæŒ«æŠ˜ã€‚æˆ‘å…ˆååœ¨æ—¥å¸¸ä½¿ç”¨çš„ macOSã€Docker Ubuntu 20.04ã€Docker Ubuntu 14.04 ä¸Šç®€å•è¯•è¿è¡Œäº† dirtyc0w ç—…æ¯’ç¨‹åºï¼Œå‡æœªèƒ½æˆåŠŸã€‚</p><p>macOS æœ¬èº«ä½¿ç”¨ XNU å†…æ ¸ï¼Œå…¶å‰èº« NeXT ç³»ç»Ÿæ˜¯åŸºäº Mach å†…æ ¸å’Œ BSD ä»£ç åº“åˆ›å»ºï¼Œä¸åæ¥çš„ Linux å†…æ ¸å°½ç®¡åŠŸèƒ½æ€§ä¸Šæœ‰å¾ˆå¤šç›¸ä¼¼æƒ³é€šä¹‹å¤„ï¼Œä½†æ˜¯åœ¨åº•å±‚ä¸Šç›¸å»ç”šè¿œã€‚macOS å†…åµŒ Mach å¾®å†…æ ¸å’Œ BSD å®å†…æ ¸ï¼Œè€Œ Linux ä»…æœ‰ä¸€ä¸ªè´Ÿè´£å¯¹ CPUã€å†…å­˜ã€è¿›ç¨‹é—´é€šä¿¡ã€è®¾å¤‡é©±åŠ¨ã€æ–‡ä»¶ç³»ç»Ÿå’Œç³»ç»ŸæœåŠ¡è°ƒç”¨è¿›è¡Œç®¡ç†çš„å®å†…æ ¸ã€‚å¹¶ä¸” macOS æœ¬èº«ä¸ºé—­æºï¼Œæ— ä»å°†å…¶ä¸ Linux å†…æ ¸ä»£ç è¿›è¡Œæ¯”è¾ƒã€‚</p><p>ç”±äºä½¿ç”¨åŠå‰åŠéƒ¨åˆ†é€‰é¢˜çš„åŸå› ï¼Œæˆ‘é¦–å…ˆå°è¯•ä½¿ç”¨ Docker çš„ Ubuntu æ¥å¯¹ DirtyCow æ¼æ´è¿›è¡Œå¤ç°ã€‚åœ¨ Docker æœ¬åœ°æ˜ å°„ææƒä¸­ä½¿ç”¨çš„ Ubuntu 20.04 ä¸­è¿è¡Œæ—¶ï¼Œç—…æ¯’æ–‡ä»¶åªå¯¹è¿›ç¨‹æœ¬èº«åšå‡ºç›¸åº”ï¼Œå³ <code>main</code> ä¸­è¿›è¡Œçš„ <code>mmap</code>ï¼Œè€Œæ— æ³•è¿›å…¥ä¸¤ä¸ªè¿è¡Œçš„çº¿ç¨‹ä¸­å¹¶æ­£å¸¸æ‰§è¡Œã€‚ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mmap 7f03ac372000</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ˜¯ï¼Œæ˜¯å¦æ˜¯ç”±äºç›®å‰ç‰ˆæœ¬å·²ç»å¯¹ Dirty COW æ¼æ´è¿›è¡Œäº†ä¿®å¤ã€‚æ‰€ä»¥æˆ‘æŸ¥çœ‹äº† Linux åœ¨ GitHub ä¸Šçš„æºä»£ç ä»“åº“ï¼Œå‘ç°å¹¶æ²¡æœ‰æœ‰å…³ DirtyCow çš„æäº¤æˆ– issueã€‚æŸ¥é˜…åˆ° <code>linux/mm/madvise.c</code> å’Œ <code>linux/tools/perf/trace/beauty/mmap.c</code> ä¸æœ¬ç—…æ¯’é¡¹ç›®å¯èƒ½å­˜åœ¨ç›¸å…³æ€§ã€‚ï¼ˆåç»­æŸ¥é˜…åˆ° Dirty COW çš„å½±å“èŒƒå›´ä¸ºå½±å“èŒƒå›´ï¼šLinux å†…æ ¸ &gt;= 2.6.22ï¼ˆ2007 å¹´å‘è¡Œï¼‰å¼€å§‹å°±å—å½±å“äº†ï¼Œç›´åˆ° 2016 å¹´ 10 æœˆ 18 æ—¥æ‰ä¿®å¤</p><p>äºæ˜¯æ”¹ç”¨äº†æ—§ç‰ˆæœ¬çš„ Ubuntu 14.04ï¼Œä½†æ˜¯å…¶ç³»ç»Ÿå†…æ ¸ä¸º 4.4ï¼Œåº”è¯¥ä¹Ÿæ˜¯ Ubuntu LTS é•¿æœŸæ”¯æŒï¼Œä» Docker Hub æ‹‰å–çš„ Ubuntu 14.04 ä½¿ç”¨çš„æ˜¯æ›´æ–°åçš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ï¼Œæ¨ç†åº”è¯¥æ˜¯ä½œä¸ºå®‰å…¨æ€§æ›´æ–°å¾—åˆ°äº†ä¿®è¡¥ã€‚ä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰æ„è¯†åˆ°å¯èƒ½æœ‰è¿™ä¸ªé—®é¢˜ã€‚ç”±äº Docker åœ¨æœ¬åœ°ä¸å®¹å™¨çš„æ˜ å°„é—®é¢˜ï¼Œæˆ‘å½“æ—¶æ€€ç–‘çš„å¯¹è±¡æ˜¯ Docker åœ¨é»˜è®¤æ˜ å°„éƒ¨åˆ†å°†æˆ‘ç³»ç»Ÿä¸­ä¿®è¡¥åçš„å†…å®¹æ˜ å°„åˆ°äº†å®¹å™¨é‡Œï¼Œæ²¡æœ‰æ„è¯†åˆ°å°½ç®¡ä½¿ç”¨äº†æ—§ç‰ˆæœ¬çš„ Ubuntu å‘è¡Œç‰ˆï¼Œå†…æ ¸ç‰ˆæœ¬å¯èƒ½å·²ç»ä¸æ˜¯å½“æ—¶ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬äº†ã€‚åœ¨è¿è¡Œ Dirty COW æ ¸å¿ƒä»£ç æ—¶ï¼Œå‡ºç°äº† Docker å ç”¨ç‡æ‹‰é«˜ï¼Œè‡´ä½¿é£æ‰‡ç‹‚è½¬çš„ç°è±¡ã€‚æˆ‘åœ¨ç¨‹åºå‡æ­»åŠä¸ªå°æ—¶åæ‰å¼ºåˆ¶ç»“æŸè¿è¡Œã€‚</p><p>å…¶å®æˆ‘ä»¬å¯ä»¥ä»¥ Ubuntu ä¸ºä¾‹ï¼ŒæŸ¥è¯¢å‘è¡Œç‰ˆå¹´ä»£ä»¥åŠå¯¹åº”çš„å†…æ ¸ç‰ˆæœ¬ã€‚å¯ä»¥çœ‹åˆ° Ubuntu 14.04 LTS å¼€å‘ä»£å· Trusty Tahrï¼Œäº 2014 å¹´ 4 æœˆå‘è¡Œï¼Œä½¿ç”¨ 3.13 ç‰ˆæœ¬çš„ Linux å†…æ ¸ï¼ŒåŸè®¡åˆ’äº 2019 å¹´åœæ­¢å¯¹ç³»ç»Ÿçš„ç»´æŠ¤ï¼Œä½†æ˜¯å¼€å‘å›¢é˜Ÿå°†ç»´æŠ¤æ—¶é—´å»¶é•¿åˆ°äº† 2022 å¹´ã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘ä¸ºä»€ä¹ˆèƒ½ä»å®˜æ–¹é€”å¾„ç›´æ¥æ‰¾åˆ°ä»ç„¶åœ¨ç»´æŠ¤æ”¯æŒçš„ Ubuntu 14.04 ç‰ˆæœ¬çš„åŸå› ã€‚</p><p>åœ¨æ”¾å¼ƒåœ¨ Docker Ubuntu ä¸­ç›´æ¥å¤ç° DirtyCow æ¼æ´åï¼Œæˆ‘è½¬è€Œä½¿ç”¨ Windows ä¸‹çš„è™šæ‹Ÿæœºé‡æ–°æ­å»ºäº†ä¸€ä¸ª Ubuntu Server 14.04 å®éªŒç¯å¢ƒã€‚è™½ç„¶åæ¥å‘ç°ç³»ç»Ÿç‰ˆæœ¬ä¸º 4.4ï¼ˆå…¶ä¸º Ubuntu 16.04 LTS ç‰ˆæœ¬åœ¨å‘å¸ƒæ—¶ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬ï¼Œå‘å¸ƒäº 2016 å¹´ 4 æœˆï¼Œä»æ—©äºè¯¥æ¼æ´è¢«ä¿®å¤çš„æ—¶é—´ï¼‰ã€‚åœ¨è™šæ‹Ÿæœºç¯å¢ƒä¸­ï¼Œæˆ‘ä¹Ÿâ€œæˆåŠŸâ€è¿è¡Œäº† DirtyCow ç¨‹åºï¼Œä½†æ˜¯å¯èƒ½ä»…æœ‰ä¸€æ¬¡åœ¨åˆ·å†™ <code>/etc/passwd</code> æ–‡ä»¶æ—¶æˆåŠŸå°† <code>test</code>ï¼ˆæƒé™ä¸º 1001ï¼‰ç”¨æˆ·çš„å¯†ç å†™å…¥äº†æ–‡ä»¶ï¼Œè€Œåœ¨å¯¹åªè¯»æµ‹è¯•æ–‡ä»¶ï¼ˆæƒé™ä¸º 0404 æˆ– 704ï¼‰çš„å†™å…¥ä¸­å¤±è´¥ã€‚ä½†æ˜¯ç¨‹åºæ­£å¸¸ç»“æŸäº†è¿è¡Œã€‚ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat test.txt</span><br><span class="line">1234567890</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ./dirtyc0w test.txt 00000</span><br><span class="line">mmap 7f8b6aaae000</span><br><span class="line"></span><br><span class="line">madvise 0</span><br><span class="line"></span><br><span class="line">procselfmem 500000000</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat test.txt</span><br><span class="line">1234567890</span><br></pre></td></tr></table></figure><p>åœ¨å¤ç°æ·»åŠ ç”¨æˆ·è¿›å…¥ <code>sudoers</code> æ—¶åŒæ ·æ— æ³•ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./dirtyc0w /etc/group <span class="string">&quot;<span class="subst">$(sed &#x27;s/\(sudo:x:.*:\)/\1test1/g&#x27; /etc/group)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸è€å¸ˆè®¨è®ºåï¼Œé€‰æ‹©å°è¯•å°†ç³»ç»Ÿçš„ Linux å†…æ ¸è¿›è¡Œé™çº§ã€‚å‰åå…±å°è¯•äº† 3 ä¸ª ubuntu å‘è¡Œç‰ˆï¼Œä¸º 14.04 åŠ ubuntu 12ï¼Œå…¶ä¸­ 14 å†…æ ¸é™çº§ä¸º 3.14 ç‰ˆæœ¬æ—¶å‡ºç°äº†åœ¨å¸¸è§„æƒ…å†µä¸‹æ­£å¸¸ï¼Œä½†å¯åŠ¨ç—…æ¯’ç¨‹åºè¿›è¡Œåˆ·å†™å†…å­˜æ—¶å‡ºç°ç³»ç»Ÿå´©æºƒä»¥åŠå¼•å¯¼æ•…éšœçš„é—®é¢˜ã€‚</p><p><img src="https://i.loli.net/2021/11/15/blFgufXzAsK4OLW.jpg" alt="IMG_4034"></p><p><img src="https://i.loli.net/2021/11/15/qgdoIxN7Ty9BL2M.jpg" alt="IMG_4035"></p><p><img src="https://i.loli.net/2021/11/15/1wvXYKjCycHab4U.png" alt="6383A801DE9D67BB2E9F892B2AAE963D"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘åœ¨å°è¯•äº†å°† Linux å†…æ ¸è¿›è¡Œé™çº§åä»ç„¶æ— æ³•å¤ç°ç—…æ¯’æ ·æœ¬ã€‚ç°åœ¨ç½‘ç»œä¸Šèƒ½æ‰¾åˆ°çš„ Ubuntu 14.04 å‘è¡Œç‰ˆå‡é‡‡ç”¨äº† 4.4 ç‰ˆæœ¬çš„å†…æ ¸ï¼ŒUbuntu 12 é‡‡ç”¨ 3.1x ç‰ˆæœ¬å†…æ ¸ã€‚åœ¨ç¬¬ä¸€æ¬¡ç»™ Ubuntu 14 é™çº§å†…æ ¸ç‰ˆæœ¬è‡³ 3.14 åï¼Œç³»ç»Ÿç»´æŒæ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯æ¯å½“é•¿æ—¶é—´è¿è¡Œé«˜è´Ÿè½½çš„è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿå¼•å¯¼å°±ä¼šå´©æºƒå¹¶åœ¨æç¤ºå¼•å¯¼é”™è¯¯åç›´æ¥æ­»æœºã€‚è¿™ä¹Ÿæ˜¯åœ¨æœ¬æ¬¡å¤ç° Dirty COW ç—…æ¯’çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„æœ€æ— æ³•è§£é‡Šçš„é”™è¯¯ã€‚äº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ—©æœŸçš„ Ubuntu å‘è¡Œç‰ˆçš„é—®é¢˜ï¼Œæˆ‘æ¯æ¬¡å®‰è£…éƒ½å¯èƒ½æœ‰ä¸ä¸€æ ·çš„é—®é¢˜ï¼Œé€šå¸¸ä¸€ä¸ª iso éœ€è¦å®‰è£…å¾ˆå¤šæ¬¡ï¼Œæ‰¾åˆ°è¿è¡Œæœ€ç¨³å®šçš„ä¸€æ¬¡ã€‚ä¾‹å¦‚ç»å¸¸ä¼šæœ‰å®‰è£…å®Œç³»ç»ŸåæŠ¥ dpkg error ç­‰ï¼Œå†é‡æ–°å®‰è£…å°±å¯ä»¥è§£å†³ã€‚</p><p>åœ¨ Linux å†…æ ¸é™çº§æ—¶ï¼Œæ— è®ºæ˜¯æŒ‡å®š Advanced Option è¿˜æ˜¯ç›´æ¥è®¾å®šå¯åŠ¨è¿è¡Œçš„å†…æ ¸ç‰ˆæœ¬ï¼Œç³»ç»Ÿéƒ½ä¼šå°† 4.4 ä½œä¸ºå¯åŠ¨çš„ä¼˜å…ˆé€‰é¡¹ã€‚åœ¨å¤šæ¬¡å°è¯•æ— æœåï¼Œæˆ‘é€‰æ‹©äº†é™çº§ååˆ é™¤åŸ 4.4 ç‰ˆæœ¬çš„å†…æ ¸ï¼Œä»è€Œè¿«ä½¿ç³»ç»Ÿä½¿ç”¨æ—§ç‰ˆæœ¬çš„å†…æ ¸æ¥å¯åŠ¨ã€‚</p><p>æˆ‘çš„ä¸‰æ¬¡ç³»ç»Ÿå†…æ ¸é™çº§çš„å°è¯•åˆ†åˆ«é€‰æ‹©äº† 3.14ï¼Œ3.13-100ï¼ˆåä¹Ÿå°è¯•äº†72ï¼‰ï¼Œ2.6 ç‰ˆæœ¬ã€‚åä¸¤æ¬¡åœ¨ç°åœ¨çœ‹æ¥æ˜¯ç†è®ºä¸Šæ˜¯åº”è¯¥å¯ä»¥æˆåŠŸçš„ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢ Dirty COW çš„ wiki ä¸Šå¯¹äºè¡¥ä¸ç‰ˆæœ¬çš„è¯´æ˜ã€‚å¯¹äºæ¯ä¸ªå‘è¡Œç‰ˆçš„è¡¥ä¸æ—¶é—´ï¼Œåœ¨å…¶ä»–äººå¯¹æ¼æ´åˆ†æé‡Œéƒ½æ²¡æœ‰æåˆ°ï¼Œæ‰€æœ‰æåˆ°æ¼æ´å¯ä»¥åˆ©ç”¨çš„ç‰ˆæœ¬æ—¶éƒ½è¯´çš„æ˜¯â€œå¯¹Linuxå†…æ ¸2.6.22ä»¥ä¸Šçš„ç‰ˆæœ¬éƒ½æœ‰æ•ˆæœâ€œï¼Œå¯äº‹å®ä¸Šæ¼æ´ä¿®å¤çš„å¾ˆå¿«ï¼Œåœ¨ 2021 å¹´èƒ½æ‰¾åˆ°çš„ç³»ç»Ÿé•œåƒéƒ½æ—©ä»¥ä¿®å¤äº†å®ƒã€‚ç½‘ç»œä¸Šçš„å¤ç°å®ä¾‹éƒ½æ˜¯å†™äº 2016 å¹´ã€‚</p><p><img src="https://i.loli.net/2021/11/15/PqWQpE7xTX9hl1A.png" alt="Screen Shot 2021-11-05 at 2.08.16 PM"></p><p>åŸºæœ¬ä¸Šæ¯æ¬¡å°è¯•è¿è¡Œç—…æ¯’æ ·æœ¬çš„èŠ±é”€éƒ½æ˜¯åœ¨åŠä¸ªå°æ—¶å·¦å³ã€‚ä»å‰æœŸçš„æ­£å¸¸è¿è¡Œä½†æ— æ³•å¾—å‡ºç»“æœï¼Œåˆ°ä¸­æœŸè¿è¡Œåå´©æºƒæŠ¥é”™ï¼Œå†åˆ°æœ€åé™çº§åˆ°ç†è®ºå¯å¤ç°çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬åæ¯æ¬¡è¿è¡Œéƒ½æ­»æœºã€‚å‰åå¤§æ¦‚èŠ±äº†ä¸€ä¸ªæœˆæ—¶é—´ç”¨äº Dirty COW ç—…æ¯’ï¼Œä½†å®è´¨ä¸Šä»ç„¶æ²¡æœ‰æˆåŠŸå¤ç°å‡ºæ¥ã€‚</p><h3 id="Dirty-COW-æ€»ç»“"><a href="#Dirty-COW-æ€»ç»“" class="headerlink" title="Dirty COW æ€»ç»“"></a>Dirty COW æ€»ç»“</h3><ol><li>Dirty COW æ¼æ´ç©¶å…¶åŸå› æ˜¯ Copy on Write è¿™ç§å¯¹äºå†…å­˜åˆ©ç”¨çš„å°è¯•çš„æŠ€æœ¯æ¼æ´ã€‚å°½ç®¡å®ƒéå¸¸æœ‰æ•ˆçš„æå‡äº†å†…å­˜çš„åˆ©ç”¨ï¼Œä½†æ˜¯åœ¨å½“æ—¶å¯¹äºè¿™éƒ¨åˆ†å†…å®¹çš„ç¼–å†™è€…æ¥è¯´å¯èƒ½å¹¶æ²¡æœ‰æ³¨æ„åˆ°å®ƒå¯èƒ½å­˜åœ¨çš„é—®é¢˜å¹¶è¿›è¡Œä¿®è¡¥ï¼Œå¯¼è‡´æœ€ç»ˆæš´éœ²å‡ºé—®é¢˜ã€‚Dirty COW æ¼æ´æœ€åç”± Linus æœ¬äººäº²è‡ªå¯¹å…¶è¿›è¡Œä¿®å¤ã€‚</li><li><code>MADV_DONTNEED</code> åœ¨ Linux ä¸Šçš„è¡Œä¸ºä¸€ç›´éƒ½æ˜¯æœ‰äº‰è®®çš„ï¼Œå®ƒå¹¶æ²¡æœ‰å®Œå…¨æœä» POSIX çš„æ ‡å‡†ã€‚äº‹å®ä¸Šï¼Œæ­£å¼å®ƒéæ ‡å‡†çš„è¡Œä¸ºå¯¼è‡´ Dirty COW çš„æ”»å‡»å˜ä¸ºå¯èƒ½ã€‚ </li><li>æ¼æ´å¯ä»¥ä½“ç°å‡ºåœ¨å¯¹äºå¹¶å‘å¤„ç†ä¸Šæ—§ç‰ˆæœ¬ä»æœ‰ç‘•ç–µã€‚ä¸€ç›´ä»¥æ¥ï¼Œå¹¶å‘å¤„ç†éƒ½è¢«è®¤ä¸ºæ˜¯å¾ˆéš¾å¤„ç†çš„äº‹æƒ…ï¼Œè¿™ä¹Ÿæ˜¯ Golang è‡ªæ¨å‡ºä»¥æ¥å°±ä¸€ç›´å¾ˆå—æ¬¢è¿çš„åŸå› ä¹‹ä¸€ã€‚</li><li>ä¸€å¼€å§‹æˆ‘å¯¹äºç½‘ç»œä¸Šåˆ«äººå¯¹äºæ¼æ´çš„è¯´æ˜æœ‰äº›ç›²ç›®ä¿¡ä»»ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æˆ‘åœ¨å°è¯•å¤ç°çš„åˆæœŸè¸©äº†å¾ˆå¤šå‘ã€‚</li></ol><h2 id="Preference-List"><a href="#Preference-List" class="headerlink" title="Preference List"></a>Preference List</h2><ol><li><a href="https://cve.mitre.org/index.html">CVE List</a></li><li><a href="https://www.dell.com/community/æ•°æ®å­˜å‚¨å’Œä¿æŠ¤-èµ„æ–™æ–‡æ¡£/æµ…è°ˆDockeréš”ç¦»æ€§å’Œå®‰å…¨æ€§/ta-p/7181817A">æµ…è°ˆDockeréš”ç¦»æ€§å’Œå®‰å…¨æ€§</a></li><li><a href="https://www.freebuf.com/articles/network/226210.html">é’ˆå¯¹Dockerçš„æ¶æ„è¡Œä¸ºåˆ†æ</a></li><li><a href="https://www.secrss.com/articles/16228">Dockerå®¹å™¨å®‰å…¨æ€§åˆ†æ</a></li><li><a href="http://blog.lujun9972.win/blog/2019/05/13/ä¸ºä»€ä¹ˆè¯´åˆ›å»ºdockerç”¨æˆ·ç»„ä¸æ˜¯ä¸ªå¥½é€‰æ‹©/">ä¸ºä»€ä¹ˆè¯´åˆ›å»ºdockerç”¨æˆ·ç»„ä¸æ˜¯ä¸ªå¥½é€‰æ‹©</a></li><li><a href="https://docs.docker.com/engine/install/linux-postinstall/">Post-installation steps for Linux</a></li><li><a href="https://szukevin.site/2020/05/31/åˆ©ç”¨dockerææƒçš„ä¸€æ¬¡å°è¯•/">åˆ©ç”¨Dockerè¿›è¡Œææƒçš„ä¸€æ¬¡å°è¯•</a></li><li><a href="https://github.com/zeroby0/virus/blob/master/virus.sh">copy to all script</a></li><li><a href="https://blogs.vmware.com/security/2016/12/dirty-truth-dirty-cow-cve-2016-5195.html">The Dirty Truth About â€œDirty COWâ€ (CVE-2016-5195)</a></li><li><a href="https://dirtycow.ninja">CVE-2016-5195 homepage</a></li><li><a href="https://github.com/dirtycow/dirtycow.github.io">Dirty COW source code</a></li><li><a href="https://zhuanlan.zhihu.com/p/27604276">ä»å†…æ ¸è§’åº¦åˆ†æDirty CowåŸç†</a></li><li><a href="https://blog.csdn.net/wanzt123/article/details/81879680">DirtyCowï¼ˆè„ç‰›ï¼‰æ¼æ´å¤ç°</a></li><li><a href="https://blog.jenisec.org/security/dirtycow.html">DirtyCow æ¼æ´åˆ©ç”¨</a></li><li><a href="https://blog.lovetecnet.xyz/2018/04/5ed11002857793053427715c/">è„ç‰›ï¼ˆCVE-2016-5195ï¼‰æ¼æ´åˆ†æ</a></li><li><a href="https://www.cnblogs.com/xiaozi/p/14264210.html">Linuxææƒçš„å‡ ç§å¸¸ç”¨å§¿åŠ¿</a></li><li><a href="https://linux.cn/article-9850-1.html">macOS å’Œ Linux çš„å†…æ ¸æœ‰ä»€ä¹ˆåŒºåˆ«</a></li><li><a href="https://hub.docker.com/_/ubuntu">Docker Hub</a></li><li><a href="https://zh.wikipedia.org/wiki/Ubuntu">Ubuntuå‘è¡Œç‰ˆåˆ—è¡¨</a></li><li><a href="https://docs.microsoft.com/en-us/windows/win32/memory/memory-protection?redirectedfrom=MSDN">å†…å­˜ä¿æŠ¤</a></li><li><a href="https://www.bbsmax.com/A/n2d9a7vdDv/">dirtycowä¸æ­»æœºexploit</a></li><li><a href="https://github.com/torvalds/linux/blob/7cca308cfdc0725363ac5943dca9dcd49cc1d2d5/mm/madvise.c">linux kernel madvise</a></li><li><a href="https://github.com/torvalds/linux/blob/5bfc75d92efd494db37f5c4c173d3639d4772966/tools/perf/trace/beauty/mmap.c">linux kernel mmap</a></li><li><a href="http://www.cnblogs.com/bonelee/p/6900243.html">LMDBä¸­çš„mmapã€copy on writeæ·±å…¥ç†è§£</a></li><li><a href="https://www.anquanke.com/post/id/84851">æ·±å…¥è§£è¯»è„ç‰›Linuxæœ¬åœ°ææƒæ¼æ´ï¼ˆCVE-2016-5195ï¼‰</a></li><li><a href="http://pwn4.fun/2017/07/14/Dirty-COWï¼ˆCVE-2016-5195ï¼‰æ¼æ´åˆ†æ/">Dirty COWï¼ˆCVE-2016-5195ï¼‰æ¼æ´åˆ†æ</a></li></ol>          </div>]]></content>
    
    <summary type="html">
    
      Homework for Computer Virus Detect Course
    
    </summary>
    
    
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
      <category term="VIRUS" scheme="https://augists.top/tags/VIRUS/"/>
    
  </entry>
  
  <entry>
    <title>Bit Operation: Average of Two Integer</title>
    <link href="https://augists.top/NOTES/COURSES/Network_Protocol_Stack/bit-operation-average-of-two-integer/"/>
    <id>https://augists.top/NOTES/COURSES/Network_Protocol_Stack/bit-operation-average-of-two-integer/</id>
    <published>2021-11-12T04:59:34.000Z</published>
    <updated>2021-11-12T05:15:00.196Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>å¦‚ä½•æ±‚ä¸¤ä¸ªæ•´æ•°çš„å¹³å‡å€¼ï¼Ÿ</p><p>é—®é¢˜çœ‹èµ·æ¥ç®€å•ï¼Œå¦‚æœç”¨ä»£ç å®ç°èµ·æ¥å´æœ‰å¾ˆå¤šå€¼å¾—ç ”ç©¶çš„åœ°æ–¹ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨Javaä»£ç æ¥å®ç°ã€‚</p><h2 id="æ™®é€šå®ç°1"><a href="#æ™®é€šå®ç°1" class="headerlink" title="æ™®é€šå®ç°1"></a>æ™®é€šå®ç°1</h2><p>æ±‚ä¸¤ä¸ªæ•´æ•°çš„å¹³å‡å€¼ï¼Œæœ€ç®€å•çš„å®ç°æ–¹æ³•å°±æ˜¯ä¸¤ä¸ªæ•°ç›¸åŠ å†é™¤ä»¥äºŒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">mean</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (x + y) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯, å¦‚æœä¼ å…¥çš„æ˜¯ä¸¤ä¸ªæ•´æ•°éƒ½æ˜¯<code>Integer.MAX_VALUE</code>ï¼Œ ä¸‹é¢çš„æ–­è¨€å°±è¿‡ä¸äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertEquals(Integer.MAX_VALUE, </span><br><span class="line">    mean(Integer.MAX_VALUE, Integer.MAX_VALUE));</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æœŸæœ›çš„ç»“æœæ˜¯<code>Integer.MAX_VALUE</code>ï¼Œä½†æ˜¯å®é™…ä¸Šè¿”å›çš„ç»“æœå´æ˜¯-1ã€‚å› ä¸º <code>Integer.MAX_VALUE + Integer.MAX_VALUE = -2</code>ï¼Œ ç»“æœå·²ç»æº¢å‡ºäº†ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">java</span><span class="selector-class">.lang</span><span class="selector-class">.AssertionError</span>: </span><br><span class="line"><span class="selector-tag">Expected</span> <span class="selector-pseudo">:2147483647</span></span><br><span class="line"><span class="selector-tag">Actual</span>   <span class="selector-pseudo">:-1</span></span><br></pre></td></tr></table></figure><h2 id="æ™®é€šå®ç°2"><a href="#æ™®é€šå®ç°2" class="headerlink" title="æ™®é€šå®ç°2"></a>æ™®é€šå®ç°2</h2><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ— ç¬¦å·çš„å³ç§»è¿ç®—ç¬¦ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">mean1</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (x + y) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·è™½ç„¶å¯ä»¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœ<code>Integer.MAX_VALUE</code>, ä½†æ˜¯å´æ˜¯ä¸æ”¯æŒè´Ÿæ•°ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æ±‚-9å’Œ-3çš„å¹³å‡å€¼,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertEquals(-<span class="number">6</span>, mean1(-<span class="number">9</span>, -<span class="number">34</span>));</span><br></pre></td></tr></table></figure><p>æœŸæœ›è¿”å›çš„ç»“æœæ˜¯-6,ä½†æ˜¯å®é™…ä¸Šå´è¿”å›äº†2147483642</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.AssertionError: </span><br><span class="line">Expected :-<span class="number">6</span></span><br><span class="line">Actual   :<span class="number">2147483642</span></span><br></pre></td></tr></table></figure><h2 id="æ™®é€šå®ç°3"><a href="#æ™®é€šå®ç°3" class="headerlink" title="æ™®é€šå®ç°3"></a>æ™®é€šå®ç°3</h2><p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¸æŠŠä¸¤ä¸ªæ•´æ•°ç›´æ¥ç›¸åŠ , è€Œæ˜¯åˆ†åˆ«é™¤ä»¥2å†ç›¸åŠ , æ˜¯ä¸æ˜¯å°±ä¸ä¼šæº¢å‡ºäº†å‘¢?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">mean3</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (x &gt;&gt; <span class="number">1</span>) + (y &gt;&gt; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å®ç°çš„è¯, ç¡®å®æ˜¯ä¸ä¼šæº¢å‡ºäº†ï¼Œä½†æ˜¯ç²¾åº¦ä¹Ÿä¸¢å¤±äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.AssertionError: </span><br><span class="line">Expected :<span class="number">2147483647</span></span><br><span class="line">Actual   :<span class="number">2147483646</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§å®ç°æ–¹å¼, æ—¢ä¸ä¼šæº¢å‡º,åˆå¯ä»¥åŒæ—¶æ”¯æŒæ­£è´Ÿæ•´æ•°å‘¢?</p><p>ç­”æ¡ˆæ˜¯ä¸æ­¢ä¸€ç§!</p><h2 id="ä½è¿ç®—å®ç°1"><a href="#ä½è¿ç®—å®ç°1" class="headerlink" title="ä½è¿ç®—å®ç°1"></a>ä½è¿ç®—å®ç°1</h2><p>æˆ‘ä»¬æ¥çœ‹çœ‹Googleçš„guavaå·¥å…·ç±»æ˜¯æ€ä¹ˆå®ç°çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IntMath#mean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@link</span> https://github.com/google/guava/blob/master/guava/src/com/google/common/math/IntMath.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// å°æ•° å‘ä¸‹å–æ•´</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meanRoundDown</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (x &amp; y) + ((x ^ y) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡é›†åˆæ¥ç†è§£ä¸Šé¢çš„ä»£ç ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æ±‚æ•´æ•°9å’Œ3çš„å¹³å‡å€¼ã€‚</p><p>9çš„äºŒè¿›åˆ¶æ˜¯1001, 3çš„äºŒè¿›åˆ¶æ˜¯0011,</p><p>é‚£ä¹ˆè¿™ä¸¤ä¸ªæ•°çš„äº¤é›†å°±æ˜¯<code>9&amp;3=0001</code>,</p><p>å·®é›†å°±æ˜¯1010ã€‚<code>0001+(1010&gt;&gt;1)</code>ç»“æœå°±æ˜¯6ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“äºŒè¿›åˆ¶æ•°å­—éƒ½æ˜¯ä¸€ä¸²0å’Œ1ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠæ•´æ•°xå’Œyéƒ½çœ‹ä½œæ˜¯ä¸€ä¸ªæœ‰å¾ˆå¤šä¸åŒçš„0å’Œ1ç»„æˆçš„é›†åˆã€‚</p><p>é‚£ä¹ˆ<code>x &amp; y</code>å°±è¡¨ç¤ºä¸¤ä¸ªé›†åˆçš„äº¤é›†, å› ä¸º<code>1&amp;1=1</code>ï¼›</p><p><code>x ^ y</code>å¾—åˆ°çš„å°±æ˜¯ä¸¤ä¸ªé›†åˆçš„å·®é›†, å› ä¸º<code>1^1=0</code>,<code>1^0=1</code>ï¼›</p><p>äº¤é›†åŠ ä¸Šå·®é›†çš„ä¸€åŠ, å°±å¾—åˆ°äº†ä¸¤ä¸ªæ•°çš„äºŒè¿›åˆ¶å¹³å‡å€¼ã€‚</p><h2 id="ä½è¿ç®—å®ç°2"><a href="#ä½è¿ç®—å®ç°2" class="headerlink" title="ä½è¿ç®—å®ç°2"></a>ä½è¿ç®—å®ç°2</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ç”¨ä½è¿ç®—çš„ç¬¬äºŒç§å®ç°æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°æ•° å‘ä¸Šå–æ•´</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">meanRoundUp</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (x | y) - ((x ^ y) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ€ä¹ˆç†è§£å‘¢ï¼Ÿ</p><p><code>x | y</code> å¾—åˆ°çš„å°±æ˜¯ä¸¤ä¸ªé›†åˆçš„å»é‡å¹¶é›†ã€‚</p><p>å¹¶é›†å‡å»å·®é›†çš„ä¸€åŠï¼Œå°±å¾—åˆ°äº†ä¸¤ä¸ªæ•°çš„äºŒè¿›åˆ¶å¹³å‡å€¼ã€‚</p><h2 id="ä¸¤ç§æ–¹å¼çš„åŒºåˆ«"><a href="#ä¸¤ç§æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="ä¸¤ç§æ–¹å¼çš„åŒºåˆ«"></a>ä¸¤ç§æ–¹å¼çš„åŒºåˆ«</h2><p>å¦‚æœä¸¤ä¸ªæ•´æ•°çš„å¹³å‡å€¼æ˜¯å°æ•°æ—¶ï¼Œ</p><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯å‘ä¸‹å–æ•´ï¼›</p><p>ç¬¬äºŒç§æ–¹å¼æ˜¯å‘ä¸Šå–æ•´ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æ±‚æ•´æ•°9å’Œ4çš„å¹³å‡å€¼ï¼Œè¿™ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼åº”è¯¥æ˜¯6.5ï¼Œå‘ä¸Šå–æ•´å°±æ˜¯7ï¼Œå‘ä¸‹å–å€¼å°±æ˜¯6ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertEquals(<span class="number">6</span>, meanRoundDown(<span class="number">9</span>, <span class="number">4</span>)); <span class="comment">// 6</span></span><br><span class="line">Assert.assertEquals(<span class="number">7</span>, meanRoundUp(<span class="number">9</span>, <span class="number">4</span>)); <span class="comment">// 7</span></span><br></pre></td></tr></table></figure><h2 id="é¢˜å¤–è¯"><a href="#é¢˜å¤–è¯" class="headerlink" title="é¢˜å¤–è¯"></a>é¢˜å¤–è¯</h2><p>ä¸Šé¢æ¢è®¨çš„åªæ˜¯æ±‚ä¸¤ä¸ªæ•´æ•°çš„å¹³å‡å€¼, é‚£ä¹ˆæ±‚å¤šä¸ªæ•´æ•°çš„å¹³å‡å€¼åˆæœ‰å“ªäº›å€¼å¾—å‚è€ƒçš„å®ç°æ–¹å¼å‘¢?</p><p>åŒæ ·æˆ‘ä»¬æ¥çœ‹çœ‹Googleçš„guavaå·¥å…·ç±»æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Stats#meanOf</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@link</span> https://github.com/google/guava/blob/master/guava/src/com/google/common/math/Stats.java</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   * Returns the &lt;a href=&quot;http://en.wikipedia.org/wiki/Arithmetic_mean&quot;&gt;arithmetic mean&lt;/a&gt; of the</span></span><br><span class="line"><span class="comment">   * values. The count must be non-zero.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * &lt;p&gt;The definition of the mean is the same as &#123;<span class="doctag">@link</span> Stats#mean&#125;.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> values a series of values</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> IllegalArgumentException if the dataset is empty</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">meanOf</span><span class="params">(<span class="keyword">int</span>... values)</span> </span>&#123;</span><br><span class="line">  checkArgument(values.length &gt; <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">double</span> mean = values[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">1</span>; index &lt; values.length; index++) &#123;</span><br><span class="line">    <span class="keyword">double</span> value = values[index];</span><br><span class="line">    <span class="keyword">if</span> (isFinite(value) &amp;&amp; isFinite(mean)) &#123;</span><br><span class="line">      <span class="comment">// Art of Computer Programming vol. 2, Knuth, 4.2.2, (15)</span></span><br><span class="line">      mean += (value - mean) / (index + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      mean = calculateNewMeanNonFinite(mean, value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> mean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„è¿™å¥æ³¨é‡Š:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Art of Computer Programming vol. <span class="number">2</span>, Knuth, <span class="number">4.2</span>.<span class="number">2</span>, (<span class="number">15</span>)</span><br></pre></td></tr></table></figure><p>Guavaçš„å®ç°æ˜¯å‚è€ƒäº†é«˜å¾·çº³è€çˆ·å­çš„ç»å…¸ä¹‹ä½œã€Šè®¡ç®—æœºç¼–ç¨‹çš„è‰ºæœ¯ã€‹, è¿™å¥—ä¹¦è§„åˆ’æœ‰ 7 å·, ç›®å‰å·²ç»å‡ºç‰ˆäº† 4 å·ã€‚</p><p>æ¯”å°”ç›–èŒ¨ç»™å‡ºçš„è¯„ä»·æ˜¯ï¼šâ€œå¦‚æœä½ èƒ½è¯»å®Œæ­¤ä¹¦ï¼Œä½ ç»å¯¹å¾—ç»™æˆ‘å‘ä»½ç®€å†ã€‚â€</p><blockquote><p>é€Ÿè®°å¡</p><p>æ±‚ä¸¤ä¸ªæ•´æ•°çš„å¹³å‡å€¼<br><code>(x &amp; y) + ((x ^ y) &gt;&gt; 1)</code>å‘ä¸‹å–æ•´ï¼›<br><code>(x | y) - ((x ^ y) &gt;&gt; 1)</code>å‘ä¸Šå–æ•´ï¼›</p></blockquote>          </div>]]></content>
    
    <summary type="html">
    
      Network Protocol Stack Notes
    
    </summary>
    
    
    
      <category term="NOTE" scheme="https://augists.top/tags/NOTE/"/>
    
      <category term="C/C++" scheme="https://augists.top/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>Why Su &amp; Why Sudo</title>
    <link href="https://augists.top/NOTES/TERMINAL/Why-su-Why-sudo/"/>
    <id>https://augists.top/NOTES/TERMINAL/Why-su-Why-sudo/</id>
    <published>2021-11-10T04:13:15.000Z</published>
    <updated>2021-11-10T04:21:09.809Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <div class="note info">            <p>ä½œè€… | Jun Tao<br>æ¥æº | <a href="https://tanjuntao.github.io/">https://tanjuntao.github.io/</a><br>è½¬è‡ª | <a href="https://mp.weixin.qq.com/s/iMF-3NXgWk5yEfLlQp1MqQ">https://mp.weixin.qq.com/s/iMF-3NXgWk5yEfLlQp1MqQ</a></p>          </div><p>ä¹‹å‰ä¸€ç›´å¯¹ su å’Œ sudo è¿™ä¸¤ä¸ªå‘½ä»¤çŠ¯è¿·ç³Šï¼Œæœ€è¿‘ä¸“é—¨æœäº†è¿™æ–¹é¢çš„èµ„æ–™ï¼Œæ€»ç®—æ˜¯æŠŠä¸¤è€…çš„å…³ç³»ä»¥åŠç”¨æ³•ææ¸…æ¥šäº†ï¼Œè¿™ç¯‡æ–‡ç« æ¥ç³»ç»Ÿæ€»ç»“ä¸€ä¸‹ã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>å› ä¸ºæœ¬ç¯‡åšå®¢ä¸­æ¶‰åŠåˆ°ç”¨æˆ·åˆ‡æ¢ï¼Œæ‰€ä»¥æˆ‘éœ€è¦æå‰å‡†å¤‡å¥½å‡ ä¸ªæµ‹è¯•ç”¨æˆ·ï¼Œæ–¹ä¾¿åç»­åˆ‡æ¢ã€‚</p><p>Linux ä¸­æ–°å»ºç”¨æˆ·çš„å‘½ä»¤æ˜¯ useradd ï¼Œä¸€èˆ¬ç³»ç»Ÿä¸­è¿™ä¸ªå‘½ä»¤å¯¹åº”çš„è·¯å¾„éƒ½åœ¨ PATH ç¯å¢ƒå˜é‡é‡Œï¼Œå¦‚æœç›´æ¥è¾“å…¥ useradd ä¸ç®¡ç”¨çš„è¯ï¼Œå°±ç”¨ç»å¯¹è·¯å¾„åçš„æ–¹å¼ï¼š/usr/sbin/useradd ã€‚</p><p>useradd æ–°å»ºç”¨æˆ·å‘½ä»¤åªæœ‰ root ç”¨æˆ·æ‰èƒ½æ‰§è¡Œï¼Œæˆ‘ä»¬å…ˆä»æ™®é€šç”¨æˆ· ubuntu åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼ˆå¦‚ä½•åˆ‡æ¢åæ–‡ä¼šä»‹ç»ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ su -</span><br><span class="line">Password:                                         <span class="comment"># è¾“å…¥ root ç”¨æˆ·ç™»å½•å¯†ç </span></span><br><span class="line">root@VM-0-14-ubuntu:~<span class="comment"># useradd -m test_user       # å¸¦ä¸Š -m å‚æ•°</span></span><br><span class="line">root@VM-0-14-ubuntu:~<span class="comment"># ls /home</span></span><br><span class="line">test_user  ubuntu                                 <span class="comment"># å¯ä»¥çœ‹åˆ° /home ç›®å½•ä¸‹é¢æœ‰ä¸¤ä¸ªç”¨æˆ·äº†</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºè¿˜æ²¡æœ‰ç»™æ–°å»ºçš„ç”¨æˆ· test_user è®¾ç½®ç™»å½•å¯†ç ï¼Œè¿™å°±å¯¼è‡´æˆ‘ä»¬æ— æ³•ä»æ™®é€šç”¨æˆ· ubuntu åˆ‡æ¢åˆ° test_userï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ root æ¥è®¾ç½® test_user çš„ç™»å½•å¯†ç ã€‚éœ€è¦ç”¨åˆ° passwd å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@VM-0-14-ubuntu:~<span class="comment"># passwd test_user</span></span><br><span class="line">Enter new UNIX password:                          <span class="comment"># è¾“å‡º test_user çš„å¯†ç </span></span><br><span class="line">Retype new UNIX password:       </span><br><span class="line">passwd: password updated successfully</span><br><span class="line">root@VM-0-14-ubuntu:~<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬è¾“å…¥ exit é€€å‡º root ç”¨æˆ·åˆ° æ™®é€šç”¨æˆ· ubuntuï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@VM-0-14-ubuntu:~<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">logout</span></span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå‘½ä»¤æç¤ºç¬¦å‰é¢å·²ç»ç”± root å˜æˆ ubuntuï¼Œè¯´æ˜æˆ‘ä»¬ç°åœ¨çš„èº«ä»½æ˜¯ ubuntu ç”¨æˆ·ã€‚</p><h2 id="su-å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•"><a href="#su-å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•" class="headerlink" title="su å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•"></a>su å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•</h2><p>é¦–å…ˆéœ€è¦è§£é‡Šä¸‹ su ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚</p><p>ä¹‹å‰ä¸€ç›´ä»¥ä¸º su æ˜¯ super userï¼ŒæŸ¥é˜…èµ„æ–™ä¹‹åæ‰çŸ¥é“åŸæ¥è¡¨ç¤º switch userã€‚</p><p>çŸ¥é“ su æ˜¯ç”±ä»€ä¹ˆç¼©å†™æ¥çš„ä¹‹åï¼Œé‚£ä¹ˆå®ƒæä¾›çš„åŠŸèƒ½å°±æ˜¾è€Œæ˜“è§äº†ï¼Œå°±æ˜¯åˆ‡æ¢ç”¨æˆ·ã€‚</p><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="- å‚æ•°"></a><code>-</code> å‚æ•°</h3><p>su çš„ä¸€èˆ¬ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su  &lt;user_name&gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - &lt;user_name&gt;</span><br></pre></td></tr></table></figure><p>ä¸¤ç§æ–¹æ³•åªå·®äº†ä¸€ä¸ªå­—ç¬¦ -ï¼Œä¼šæœ‰æ¯”è¾ƒå¤§çš„å·®å¼‚ï¼š</p><p>å¦‚æœåŠ å…¥äº† - å‚æ•°ï¼Œé‚£ä¹ˆæ˜¯ä¸€ç§ login-shell çš„æ–¹å¼ï¼Œæ„æ€æ˜¯è¯´åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç”¨æˆ· <user_name> ä¹‹åï¼Œå½“å‰çš„ shell ä¼šåŠ è½½ <user_name> å¯¹åº”çš„ç¯å¢ƒå˜é‡å’Œå„ç§è®¾ç½®ï¼›<br>å¦‚æœæ²¡æœ‰åŠ å…¥ - å‚æ•°ï¼Œé‚£ä¹ˆæ˜¯ä¸€ç§ non-login-shell çš„æ–¹å¼ï¼Œæ„æ€æ˜¯è¯´æˆ‘ç°åœ¨åˆ‡æ¢åˆ°äº† <user_name>ï¼Œä½†æ˜¯å½“å‰çš„ shell è¿˜æ˜¯åŠ è½½åˆ‡æ¢ä¹‹å‰çš„é‚£ä¸ªç”¨æˆ·çš„ç¯å¢ƒå˜é‡ä»¥åŠå„ç§è®¾ç½®ã€‚<br>å…‰è§£é‡Šä¼šæ¯”è¾ƒæŠ½è±¡ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­å°±æ¯”è¾ƒå®¹æ˜“ç†è§£äº†ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆä» ubuntu ç”¨æˆ·ä»¥ non-login-shell çš„æ–¹å¼åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œæ¯”è¾ƒä¸¤ç§ç”¨æˆ·çŠ¶æ€ä¸‹ç¯å¢ƒå˜é‡ä¸­ PWD çš„å€¼ï¼ˆsu å‘½ä»¤ä¸è·Ÿä»»ä½• <user_name> ï¼Œé»˜è®¤åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ env | grep ubuntu</span><br><span class="line">USER=ubuntu</span><br><span class="line">PWD=/home/ubuntu                                         <span class="comment"># æ˜¯ /home/ubuntu</span></span><br><span class="line">HOME=/home/ubuntu</span><br><span class="line"><span class="comment"># çœç•¥......</span></span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$ su                              <span class="comment"># non-login-shell æ–¹å¼</span></span><br><span class="line">Password:                                                <span class="comment"># è¾“å…¥ root ç”¨æˆ·ç™»å½•å¯†ç </span></span><br><span class="line">root@VM-0-14-ubuntu:/home/ubuntu<span class="comment"># env | grep ubuntu</span></span><br><span class="line">PWD=/home/ubuntu                                         <span class="comment"># å¯ä»¥å‘ç°è¿˜æ˜¯ /home/ubuntu</span></span><br><span class="line">root@VM-0-14-ubuntu:/home/ubuntu<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç¡®æ˜¯åˆ‡æ¢åˆ° root ç”¨æˆ·äº†ï¼Œä½†æ˜¯ shell ç¯å¢ƒä¸­çš„å˜é‡å¹¶æ²¡æœ‰æ”¹å˜ï¼Œè¿˜æ˜¯ç”¨ä¹‹å‰ ubuntu ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ã€‚</p><p>æ¥ç€æˆ‘ä»¬ä» ubuntu ç”¨æˆ·ä»¥ login-shell çš„æ–¹å¼åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼ŒåŒæ ·æ¯”è¾ƒä¸¤ç§ç”¨æˆ·è½¬å°ä¸‹ç¯å¢ƒå˜é‡ä¸­ PWD çš„å€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ env | grep ubuntu</span><br><span class="line">USER=ubuntu</span><br><span class="line">PWD=/home/ubuntu                               <span class="comment"># æ˜¯ /home/ubuntu</span></span><br><span class="line">HOME=/home/ubuntu</span><br><span class="line"><span class="comment"># çœç•¥.......</span></span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$ su -                  <span class="comment"># æ˜¯ login-shell æ–¹å¼</span></span><br><span class="line">Password:</span><br><span class="line">root@VM-0-14-ubuntu:~<span class="comment"># env | grep root</span></span><br><span class="line">USER=root</span><br><span class="line">PWD=/root                                      <span class="comment"># å·²ç»å˜æˆ /root äº†</span></span><br><span class="line">HOME=/root</span><br><span class="line">MAIL=/var/mail/root</span><br><span class="line">LOGNAME=root</span><br><span class="line">root@VM-0-14-ubuntu:~<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ç”¨ login-shell çš„æ–¹å¼åˆ‡æ¢ç”¨æˆ·çš„è¯ï¼Œshell ä¸­çš„ç¯å¢ƒå˜é‡ä¹Ÿè·Ÿç€æ”¹å˜äº†ã€‚</p><p>æ€»ç»“ï¼šå…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼åˆ‡æ¢ç”¨æˆ·çœ‹ä¸ªäººéœ€æ±‚ï¼š</p><p>å¦‚æœä¸æƒ³å› ä¸ºåˆ‡æ¢åˆ°å¦ä¸€ä¸ªç”¨æˆ·å¯¼è‡´è‡ªå·±åœ¨å½“å‰ç”¨æˆ·ä¸‹çš„è®¾ç½®ä¸å¯ç”¨ï¼Œé‚£ä¹ˆç”¨ non-login-shell çš„æ–¹å¼ï¼›<br>å¦‚æœåˆ‡æ¢ç”¨æˆ·åï¼Œéœ€è¦ç”¨åˆ°è¯¥ç”¨æˆ·çš„å„ç§ç¯å¢ƒå˜é‡ï¼ˆä¸åŒç”¨æˆ·çš„ç¯å¢ƒå˜é‡è®¾ç½®ä¸€èˆ¬æ˜¯ä¸åŒçš„ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨ login-shell çš„æ–¹å¼ã€‚</p><h3 id="åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·"><a href="#åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·" class="headerlink" title="åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·"></a>åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·</h3><p>å‰é¢å·²ç»ä»‹ç»äº†ï¼Œå¦‚æœ su å‘½ä»¤åé¢ä¸è·Ÿä»»ä½• <user_name>ï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ su -</span><br><span class="line">Password:                                       <span class="comment"># root ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">root@VM-0-14-ubuntu:/home/ubuntu<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬åœ¨ 1. å‡†å¤‡å·¥ä½œ éƒ¨åˆ†å·²ç»æ–°å»ºäº†ä¸€ä¸ª test_user ç”¨æˆ·ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹ŸçŸ¥é“ test_user ç”¨æˆ·çš„ç™»å½•å¯†ç ï¼ˆroot ç”¨æˆ·è®¾ç½®çš„ï¼‰ï¼Œæˆ‘ä»¬å°±èƒ½ä» ubuntu ç”¨æˆ·åˆ‡æ¢åˆ° test_user ç”¨æˆ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ su - test_user</span><br><span class="line">Password:                                       <span class="comment"># test_user ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">$</span><br></pre></td></tr></table></figure><h3 id="c-å‚æ•°"><a href="#c-å‚æ•°" class="headerlink" title="-c å‚æ•°"></a>-c å‚æ•°</h3><p>å‰é¢çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å…ˆåˆ‡æ¢åˆ°å¦ä¸€ä¸ªç”¨æˆ·ï¼ˆroot æˆ–è€… test_userï¼‰ï¼Œåœ¨å“ªä¸ªç”¨æˆ·çš„çŠ¶æ€ä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œæœ€åè¾“å…¥ exit è¿”å›å½“å‰ ubuntu ç”¨æˆ·ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯ï¼šä¸éœ€è¦å…ˆåˆ‡æ¢ç”¨æˆ·å†æ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥åœ¨å½“å‰ç”¨æˆ·ä¸‹ï¼Œä»¥å¦ä¸€ä¸ªç”¨æˆ·çš„æ–¹å¼æ‰§è¡Œå‘½ä»¤ï¼Œæ‰§è¡Œç»“æŸåå°±è¿”å›å½“å‰ç”¨æˆ·ã€‚è¿™å°±å¾—ç”¨åˆ° -c å‚æ•°ã€‚</p><p>å…·ä½“ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - -c <span class="string">&quot;æŒ‡ä»¤ä¸²&quot;</span>                                  <span class="comment"># ä»¥ root çš„æ–¹å¼æ‰§è¡Œ &quot;æŒ‡ä»¤ä¸²&quot;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä¹ˆçœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ cat /etc/shadow</span><br><span class="line">cat: /etc/shadow: Permission denied                <span class="comment"># ubuntu ç”¨æˆ·ä¸èƒ½ç›´æ¥æŸ¥çœ‹ /etc/shadow æ–‡ä»¶å†…å®¹</span></span><br><span class="line"></span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$ su - -c <span class="string">&quot;tail -n 4 /etc/shadow&quot;</span></span><br><span class="line">Password:                                          <span class="comment"># è¾“å…¥ root ç”¨æˆ·å¯†ç </span></span><br><span class="line">ubuntu:<span class="variable">$1</span><span class="variable">$fZKcWEDI</span><span class="variable">$uwZ64uFvVbwpHTbCSgim0</span>/:18352:0:99999:7:::</span><br><span class="line">ntp:*:17752:0:99999:7:::</span><br><span class="line">mysql:!:18376:0:99999:7:::</span><br><span class="line">test_user:<span class="variable">$6</span>$.ZY1lj4m<span class="variable">$ii0x9CG8h</span>.JHlh6zKbfBXRuolJmIDBHAd5eqhvW7lbUQXTRS//89jcuTzRilKqRkP8YbYW4VPxmTVHWRLYNGS/:18406:0:99999:7:::</span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$                            <span class="comment"># æ‰§è¡Œå®Œé©¬ä¸Šè¿”å› ubuntu ç”¨æˆ·è€Œä¸æ˜¯ root ç”¨æˆ·</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ‰§è¡Œæ–¹å¼å’Œåé¢è¦ä»‹ç»çš„ sudo å¾ˆåƒï¼Œéƒ½æ˜¯ä¸´æ—¶ç”³è¯·ä¸€ä¸‹ root ç”¨æˆ·çš„æƒé™ã€‚ä½†è¿˜æ˜¯æœ‰å·®å¼‚ï¼Œæˆ‘ä»¬æ¥ç€å¾€åçœ‹ã€‚</p><h2 id="sudo-å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•"><a href="#sudo-å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•" class="headerlink" title="sudo å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•"></a>sudo å‘½ä»¤ä»‹ç»åŠä¸»è¦ç”¨æ³•</h2><p>é¦–å…ˆè¿˜æ˜¯è§£é‡Šä¸‹ sudo å‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€ã€‚</p><p>sudo çš„è‹±æ–‡å…¨ç§°æ˜¯ super user doï¼Œå³ä»¥è¶…çº§ç”¨æˆ·ï¼ˆroot ç”¨æˆ·ï¼‰çš„æ–¹å¼æ‰§è¡Œå‘½ä»¤ã€‚è¿™é‡Œçš„ sudo å’Œä¹‹å‰ su è¡¨ç¤ºçš„ switch user æ˜¯ä¸åŒçš„ï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ï¼Œå¾ˆå®¹æ˜“ææ··ã€‚</p><p>æˆ‘ä»¬å…ˆä»‹ç» sudo å‘½ä»¤èƒ½åšä»€ä¹ˆäº‹æƒ…ï¼Œç„¶åè¯´æ˜ä¸ºä½•èƒ½åšåˆ°è¿™äº›ï¼Œä»¥åŠå¦‚ä½•åšåˆ°è¿™äº›ã€‚</p><p>æˆ‘ä»¬å¼€å§‹ã€‚</p><h3 id="ä¸»è¦ç”¨æ³•"><a href="#ä¸»è¦ç”¨æ³•" class="headerlink" title="ä¸»è¦ç”¨æ³•"></a>ä¸»è¦ç”¨æ³•</h3><p>æˆ‘ä»¬åœ¨ Linux ä¸­ç»å¸¸ä¼šç¢°åˆ° Permission denied è¿™ç§æƒ…å†µï¼Œæ¯”å¦‚ä»¥ ubuntu ç”¨æˆ·çš„èº«ä»½æŸ¥çœ‹ /etc/shadow çš„å†…å®¹ã€‚å› ä¸ºè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹æ˜¯åªæœ‰ root ç”¨æˆ·èƒ½æŸ¥çœ‹çš„ã€‚</p><p>é‚£å¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ sudo :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ tail -n 3 /etc/shadow</span><br><span class="line">tail: cannot open <span class="string">&#x27;/etc/shadow&#x27;</span> <span class="keyword">for</span> reading: Permission denied      <span class="comment"># æ²¡æœ‰æƒé™</span></span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$ sudo !!                                    <span class="comment"># è·Ÿä¸¤ä¸ªæƒŠå¹å·</span></span><br><span class="line">sudo tail -n 3 /etc/shadow</span><br><span class="line">ntp:*:17752:0:99999:7:::</span><br><span class="line">mysql:!:18376:0:99999:7:::</span><br><span class="line">test_user:<span class="variable">$6</span>$.ZY1lj4m<span class="variable">$ii0x9CG8h</span>.JHlh6zKbfBXRuolJmIDBHAd5eqhvW7lbUQXTRS//89jcuTzRilKqRkP8YbYW4VPxmTVHWRLYNGS/:18406:0:99999:7:::</span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$</span><br></pre></td></tr></table></figure><p>å®ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† sudo !! è¿™ä¸ªå°æŠ€å·§ï¼Œè¡¨ç¤ºé‡å¤ä¸Šé¢è¾“å…¥çš„å‘½ä»¤ï¼Œåªä¸è¿‡åœ¨å‘½ä»¤æœ€å‰é¢åŠ ä¸Š sudo ã€‚</p><p>å› ä¸ºæˆ‘å·²ç»è®¾ç½®äº† sudo å‘½ä»¤ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œæ‰€ä»¥è¿™é‡Œ sudo !! å°±èƒ½ç›´æ¥è¾“å‡ºå†…å®¹ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®çš„è¯ï¼Œéœ€è¦è¾“å…¥å½“å‰è¿™ä¸ªç”¨æˆ·çš„å¯†ç ï¼Œä¾‹å¦‚æœ¬ä¾‹ä¸­ï¼Œæˆ‘å°±åº”è¯¥è¾“å…¥ ubuntu ç”¨æˆ·çš„ç™»å½•å¯†ç ã€‚</p><p>ä¸¤æ¬¡ç›¸é‚»çš„ sudo æ“ä½œï¼Œå¦‚æœé—´éš”åœ¨ 5min ä¹‹å†…ï¼Œç¬¬äºŒæ¬¡è¾“å…¥ sudo ä¸éœ€è¦é‡æ–°è¾“å…¥å¯†ç ï¼›å¦‚æœè¶…è¿‡ 5minï¼Œé‚£ä¹ˆå†è¾“å…¥ sudo æ—¶ï¼Œåˆéœ€è¦è¾“å…¥å¯†ç ã€‚æ‰€ä»¥ä¸€ä¸ªæ¯”è¾ƒçœäº‹çš„æ–¹æ³•æ˜¯è®¾ç½® sudo æ“ä½œä¸éœ€è¦å¯†ç ã€‚åé¢ä»‹ç»å¦‚ä½•è®¾ç½®ã€‚</p><p>sudo é™¤äº†ä»¥ root ç”¨æˆ·çš„æƒé™æ‰§è¡Œå‘½ä»¤å¤–ï¼Œè¿˜æœ‰å…¶å®ƒå‡ ä¸ªç”¨æ³•ï¼Œè¿™é‡Œåšç®€å•ä»‹ç»ã€‚</p><p>åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su -</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¹Ÿèƒ½ä»¥ login-shell çš„æ–¹å¼åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œä½†æ˜¯å®ƒå’Œ su - æ–¹æ³•æ˜¯ç”±åŒºåˆ«çš„ï¼š</p><p>å‰è€…è¾“å…¥ sudo su - åï¼Œéœ€è¦æä¾›å½“å‰ç”¨æˆ·çš„ç™»å½•å¯†ç ï¼Œä¹Ÿå°±æ˜¯ ubuntu ç”¨æˆ·çš„å¯†ç ï¼›<br>åè€…è¾“å…¥ su - åï¼Œéœ€è¦æä¾› root ç”¨æˆ·çš„ç™»å½•å¯†ç ã€‚<br>è¿˜æœ‰ä¸€ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å’Œ sudo su - æ•ˆæœä¸€è‡´ï¼Œä¹Ÿæ˜¯åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œä¹Ÿæ˜¯éœ€è¦æä¾›å½“å‰ç”¨æˆ·ï¼ˆubuntu ç”¨æˆ·ï¼‰çš„ç™»å½•å¯†ç ã€‚</p><p>æˆ‘ä»¬ç°åœ¨åˆ‡æ¢åˆ° test_user ç”¨æˆ·ï¼Œå°è¯•æ˜¾ç¤º /etc/shadow æ–‡ä»¶çš„å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-14-ubuntu:~$ su - test_user</span><br><span class="line">Password:                                       <span class="comment"># test_user çš„å¯†ç </span></span><br><span class="line">$ sudo cat /etc/shadow</span><br><span class="line">[sudo] password <span class="keyword">for</span> test_user:                  <span class="comment"># test_user çš„å¯†ç </span></span><br><span class="line">test_user is not <span class="keyword">in</span> the sudoers file.  This incident will be reported.</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼šçœ‹åˆ°å€’æ•°ç¬¬äºŒè¡Œä¸­çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼Œæˆ‘ä»¬æ— æ³•æŸ¥çœ‹ /etc/shadow çš„å†…å®¹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆ ubuntu å¯ä»¥ä½¿ç”¨ sudo ä½†æ˜¯ test_user ä¸è¡Œå‘¢ï¼Ÿ</p><p>è¿™å°±æ¶‰åŠåˆ° sudo çš„å·¥ä½œåŸç†äº†ã€‚</p><h3 id="sudo-å·¥ä½œåŸç†"><a href="#sudo-å·¥ä½œåŸç†" class="headerlink" title="sudo å·¥ä½œåŸç†"></a>sudo å·¥ä½œåŸç†</h3><p>ä¸€ä¸ªç”¨æˆ·èƒ½å¦ä½¿ç”¨ sudo å‘½ä»¤ï¼Œå–å†³äº /etc/sudoers æ–‡ä»¶çš„è®¾ç½®ã€‚</p><p>ä» 3.1 èŠ‚ä¸­æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œubuntu ç”¨æˆ·å¯ä»¥æ­£å¸¸ä½¿ç”¨ sudo ï¼Œä½†æ˜¯ test_user ç”¨æˆ·å´æ— æ³•ä½¿ç”¨ï¼Œè¿™æ˜¯å› ä¸º /etc/sudoers æ–‡ä»¶é‡Œæ²¡æœ‰é…ç½® test_userã€‚</p><p>/etc/sudoers ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œä½†æ˜¯å› å…¶æœ‰ç‰¹å®šçš„è¯­æ³•ï¼Œæˆ‘ä»¬ä¸è¦ç›´æ¥ç”¨ vim æˆ–è€… vi æ¥ç¼–è¾‘å®ƒï¼Œéœ€è¦ç”¨ visudo è¿™ä¸ªå‘½ä»¤ã€‚è¾“å…¥è¿™ä¸ªå‘½ä»¤ä¹‹åå°±èƒ½ç›´æ¥ç¼–è¾‘ /etc/sudoers è¿™ä¸ªæ–‡ä»¶äº†ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåªæœ‰ root ç”¨æˆ·æœ‰æƒé™ä½¿ç”¨ visudo å‘½ä»¤ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¾“å…¥ visudo å‘½ä»¤åæ˜¾ç¤ºçš„å†…å®¹ã€‚</p><p>è¾“å…¥ï¼ˆroot ç”¨æˆ·ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@VM-0-14-ubuntu:~<span class="comment"># visudo</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># User privilege specification</span></span><br><span class="line">root    ALL=(ALL:ALL) ALL</span><br><span class="line"></span><br><span class="line"><span class="comment"># Members of the admin group may gain root privileges</span></span><br><span class="line">%admin ALL=(ALL) ALL</span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow members of group sudo to execute any command</span></span><br><span class="line">%sudo   ALL=(ALL:ALL) ALL</span><br><span class="line"></span><br><span class="line"><span class="comment"># See sudoers(5) for more information on &quot;#include&quot; directives:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#includedir /etc/sudoers.d</span></span><br><span class="line">ubuntu  ALL=(ALL:ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure><p>è§£é‡Šä¸‹æ¯ä¸€è¡Œçš„æ ¼å¼ï¼š</p><p>ç¬¬ä¸€ä¸ªè¡¨ç¤ºç”¨æˆ·åï¼Œå¦‚ root ã€ubuntu ç­‰ï¼›<br>æ¥ä¸‹æ¥ç­‰å·å·¦è¾¹çš„ ALL è¡¨ç¤ºå…è®¸ä»ä»»ä½•ä¸»æœºç™»å½•å½“å‰çš„ç”¨æˆ·è´¦æˆ·ï¼›<br>ç­‰å·å³è¾¹çš„ ALL è¡¨ç¤ºï¼šè¿™ä¸€è¡Œè¡Œé¦–å¯¹ä¸€ä¸ªçš„ç”¨æˆ·å¯ä»¥åˆ‡æ¢åˆ°ç³»ç»Ÿä¸­ä»»ä½•ä¸€ä¸ªå…¶å®ƒç”¨æˆ·ï¼›<br>è¡Œå°¾çš„ ALL è¡¨ç¤ºï¼šå½“å‰è¡Œé¦–çš„ç”¨æˆ·ï¼Œèƒ½ä»¥ root ç”¨æˆ·çš„èº«ä»½ä¸‹è¾¾ä»€ä¹ˆå‘½ä»¤ï¼ŒALL è¡¨ç¤ºå¯ä»¥ä¸‹è¾¾ä»»ä½•å‘½ä»¤ã€‚<br>æˆ‘ä»¬è¿˜æ³¨æ„åˆ° ubuntu å¯¹åº”çš„é‚£ä¸€è¡Œæœ‰ä¸ª NOPASSWD å…³é”®å­—ï¼Œè¿™å°±æ˜¯è¡¨æ˜ ubuntu è¿™ä¸ªç”¨æˆ·åœ¨è¯·æ±‚ sudo æ—¶ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œåˆ°è¿™é‡Œå°±è§£é‡Šäº†å‰é¢çš„é—®é¢˜ã€‚</p><p>åŒæ—¶æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œå¹¶æ²¡æœ‰ test_user å¯¹åº”çš„è¡Œï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ test_user æ— æ³•ä½¿ç”¨ sudo å‘½ä»¤ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°è¯•å°† test_user æ·»åŠ åˆ° /etc/sudoers æ–‡ä»¶ä¸­ï¼Œä½¿ test_user ä¹Ÿèƒ½ä½¿ç”¨ sudo å‘½ä»¤ã€‚æˆ‘ä»¬åœ¨æœ€åä¸€è¡Œæ·»åŠ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">test_user  ALL=(ALL:ALL)  ALL       <span class="comment"># test_user ä½¿ç”¨ sudo éœ€è¦æä¾› test_user çš„å¯†ç </span></span><br><span class="line">æ¥ä¸‹æ¥æˆ‘ä»¬å†åœ¨ test_user è´¦æˆ·ä¸‹æ‰§è¡Œ sudo ï¼š</span><br><span class="line"></span><br><span class="line">ubuntu@VM-0-14-ubuntu:~$ su - test_user</span><br><span class="line">Password:</span><br><span class="line">$ tail -n 3 /etc/shadow</span><br><span class="line">tail: cannot open <span class="string">&#x27;/etc/shadow&#x27;</span> <span class="keyword">for</span> reading: Permission denied</span><br><span class="line">$ sudo tail -n 3 /etc/shadow                   <span class="comment"># åŠ ä¸Š sudo</span></span><br><span class="line">ntp:*:17752:0:99999:7:::</span><br><span class="line">mysql:!:18376:0:99999:7:::</span><br><span class="line">test_user:<span class="variable">$6</span>$.ZY1lj4m<span class="variable">$ii0x9CG8h</span>.JHlh6zKbfBXRuolJmIDBHAd5eqhvW7lbUQXTRS//89jcuTzRilKqRkP8YbYW4VPxmTVHWRLYNGS/:18406:0:99999:7:::</span><br><span class="line">$</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨å·²ç»å¯ä»¥ä½¿ç”¨ sudo äº†ã€‚</p><h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·åœ¨ /etc/sudoers æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå®ƒå°±å…·æœ‰ sudo æƒé™ï¼Œå°±èƒ½é€šè¿‡ sudo su - æˆ–è€… sudo -i ç­‰å‘½ä»¤åˆ‡æ¢åˆ° root ç”¨æˆ·äº†ï¼Œé‚£è¿™æ—¶è¿™ä¸ªç”¨æˆ·å°±å˜æˆ root ç”¨æˆ·äº†ï¼Œé‚£è¿™ä¸å¯¹ç³»ç»Ÿé€ æˆå¾ˆå¤§çš„å¨èƒå—ï¼Ÿ</p><p>å®é™…ä¸Šçš„ç¡®æ˜¯è¿™æ ·çš„ã€‚æ‰€ä»¥å¦‚æœåœ¨ç¼–è¾‘ /etc/sudoers æ–‡ä»¶èµ‹äºˆæŸç§ç”¨æˆ· sudo æƒé™æ—¶ï¼Œå¿…é¡»è¦ç¡®å®šè¯¥ç”¨æˆ·æ˜¯å¯ä¿¡ä»»çš„ï¼Œä¸ä¼šå¯¹ç³»ç»Ÿé€ æˆæ¶æ„ç ´åï¼Œå¦åˆ™å°†æ‰€æœ‰ root æƒé™éƒ½èµ‹äºˆè¯¥ç”¨æˆ·å°†ä¼šæœ‰éå¸¸å¤§çš„å±é™©ã€‚</p><p>å½“ç„¶ï¼Œroot ç”¨æˆ·ä¹Ÿå¯ä»¥ç¼–è¾‘ /etc/sudoers ä½¿ç”¨æˆ·åªå…·å¤‡ä¸€éƒ¨åˆ†æƒé™ï¼Œå³åªèƒ½æ‰§è¡Œä¸€å°éƒ¨åˆ†å‘½ä»¤ã€‚æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒ Reference éƒ¨åˆ†ç¬¬äºŒæ¡ï¼Œè¿™ç¯‡æ–‡ç« ä¸å†èµ˜è¿°ã€‚</p><h2 id="äºŒè€…çš„å·®å¼‚å¯¹æ¯”"><a href="#äºŒè€…çš„å·®å¼‚å¯¹æ¯”" class="headerlink" title="äºŒè€…çš„å·®å¼‚å¯¹æ¯”"></a>äºŒè€…çš„å·®å¼‚å¯¹æ¯”</h2><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼š</p><p>ä½¿ç”¨ su - ï¼Œæä¾› root è´¦æˆ·çš„å¯†ç ï¼Œå¯ä»¥åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼›<br>ä½¿ç”¨ sudo su - ï¼Œæä¾›å½“å‰ç”¨æˆ·çš„å¯†ç ï¼Œä¹Ÿå¯ä»¥åˆ‡æ¢åˆ° root ç”¨æˆ·<br>ä¸¤ç§æ–¹å¼çš„å·®å¼‚ä¹Ÿæ˜¾è€Œæ˜“è§ï¼šå¦‚æœæˆ‘ä»¬çš„ Linux ç³»ç»Ÿæœ‰å¾ˆå¤šç”¨æˆ·éœ€è¦ä½¿ç”¨çš„è¯ï¼Œå‰è€…è¦æ±‚æ‰€æœ‰ç”¨æˆ·éƒ½çŸ¥é“ root ç”¨æˆ·çš„å¯†ç ï¼Œè¿™æ˜¾ç„¶æ˜¯éå¸¸å±é™©çš„ï¼›åè€…æ˜¯ä¸éœ€è¦æš´éœ² root è´¦æˆ·å¯†ç çš„ï¼Œç”¨æˆ·åªéœ€è¦è¾“å…¥è‡ªå·±çš„è´¦æˆ·å¯†ç å°±å¯ä»¥ï¼Œè€Œä¸”å“ªäº›ç”¨æˆ·å¯ä»¥åˆ‡æ¢åˆ° rootï¼Œè¿™å®Œå…¨æ˜¯å— root æ§åˆ¶çš„ï¼ˆroot é€šè¿‡è®¾ç½® /etc/sudoers å®ç°çš„ï¼‰ï¼Œè¿™æ ·ç³»ç»Ÿå°±å®‰å…¨å¾ˆå¤šäº†ã€‚</p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="https://www.rootusers.com/the-difference-between-su-and-sudo-commands-in-linux/">https://www.rootusers.com/the-difference-between-su-and-sudo-commands-in-linux/</a></li><li>ã€Šé¸Ÿå“¥çš„ Linux ç§æˆ¿èœã€‹13.4 èŠ‚ï¼šä½¿ç”¨è€…èº«ä»½åˆ‡æ¢</li><li><a href="https://github.com/ustclug/Linux101-docs/blob/master/docs/Ch05/index.md">https://github.com/ustclug/Linux101-docs/blob/master/docs/Ch05/index.md</a></li><li><a href="https://www.maketecheasier.com/differences-between-su-sudo-su-sudo-s-sudo-i/">https://www.maketecheasier.com/differences-between-su-sudo-su-sudo-s-sudo-i/</a></li><li><a href="https://stackoverflow.com/questions/35999671/whats-the-difference-between-sudo-i-and-sudo-su?r=SearchResults">https://stackoverflow.com/questions/35999671/whats-the-difference-between-sudo-i-and-sudo-su?r=SearchResults</a></li><li><a href="https://www.zhihu.com/question/51746286">https://www.zhihu.com/question/51746286</a></li><li><a href="https://www.linuxidc.com/Linux/2017-06/144916.htm">https://www.linuxidc.com/Linux/2017-06/144916.htm</a></li></ul>          </div>]]></content>
    
    <summary type="html">
    
      Copyright@Jun Tao&lt;br&gt;From https://tanjuntao.github.io
    
    </summary>
    
    
    
      <category term="TERMINAL" scheme="https://augists.top/tags/TERMINAL/"/>
    
  </entry>
  
  <entry>
    <title>Squid Game</title>
    <link href="https://augists.top/SELF/THINKING/Squid-Game/"/>
    <id>https://augists.top/SELF/THINKING/Squid-Game/</id>
    <published>2021-11-08T15:04:40.000Z</published>
    <updated>2021-11-09T15:34:02.614Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>æœ€è¿‘é±¿é±¼æ¸¸æˆå±å®æ˜¯æŒºç«ï¼Œä¸ç®¡æ˜¯å›½å†…è¿˜æ˜¯å›½å¤–ï¼Œåˆ°å¤„éƒ½åœ¨è¯´é±¿é±¼æ¸¸æˆï¼Œè¿™ä¸€ä¸ª Netflix åŸç”Ÿ ip ç›´æ¥ç»™ä¸œå®¶å¸¦æ¥äº†æˆå¨çš„æ–°ç”¨æˆ·ï¼Œæ˜¯ç›®å‰ Netflix çƒ­åº¦æœ€é«˜çš„ ip</p><p>æœ¬èº«è¿™ä¸ªç”µè§†å‰§æ‹çš„æ˜¯æŒºå¥½çš„ï¼Œå¹¶ä¸”éŸ©å›½åœ¨è¿‘å‡ å¹´äº§å‡ºçš„ç”µå½±è´¨é‡éƒ½åœ¨ä¸Šä¹˜ï¼Œæ‰€ä»¥ç”µå½±èƒ½åœ¨å›½å¤–ç«èµ·æ¥å¹¶ä¸è®©äººæ„å¤–ã€‚ä½†æ˜¯ååå›½å†…ä¹Ÿéå¸¸ç«çˆ†ï¼Œè¿™å°±å¾ˆå¥‡æ€ªäº†ã€‚æœ¬èº«å›½å†…èƒ½æœ‰èƒ½åŠ›è®¿é—®å¤–ç½‘çš„å°±ä¸å¤šï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ’é™¤éè®¡ç®—æœºè¡Œä¸šçš„äººå‘˜ï¼›æœ‰èƒ½åŠ›è®¿é—® Netflix çš„å°±æ›´å°‘äº†ï¼Œå°¤å…¶æ˜¯åœ¨ Netflix å¯¹è®¿é—® ip é™åˆ¶ä¸€ç›´åœ¨åŠ å¤§çš„æƒ…å†µä¸‹ï¼›æœ‰ä¹° Netflix ä¼šå‘˜çš„é‚£ç®€ç›´æ˜¯å°‘ä¹‹åˆå°‘ã€‚æ‰€ä»¥ï¼Œåˆæ­¥åˆä¸€ä¸ªå°ç»“è®ºæ˜¯ï¼Œå¾ˆå¤šäººæ˜¯é€šè¿‡ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼ˆå³ç›—ç‰ˆç½‘ç«™ï¼‰è§‚çœ‹çš„ï¼Œæˆ–æ˜¯å¾ˆå¤§ä¸€éƒ¨åˆ†äººä»…ä»…æ˜¯è·Ÿé£ï¼Œå¹¶ä¸äº†è§£ç”µè§†å‰§çš„å†…å®¹</p><p>å®é™…ä¸Šï¼Œåœ¨æˆ‘çš„è§‚çœ‹ä½“éªŒä¸­ï¼Œå¯¹ä¸ºä»€ä¹ˆ Squid Game èƒ½ç«èµ·æ¥ä¸€ç›´æŠ±æœ‰ç–‘æƒ‘ã€‚æœ¬èº«ç”µè§†å‰§æ‰€æ¢è®¨çš„ä¸»é¢˜æ˜¯åœ¨æç«¯æƒ…å†µä¸‹å¯¹äººæ€§çš„æ¢è®¨ï¼Œè¿™ç§é¢˜æçš„ç”µå½±ç”µè§†å‰§å…¶å®å·²ç»éå¸¸å¤šäº†ï¼Œæ¯”å¦‚ã€Šè‡ç‹ã€‹ç­‰ï¼Œéƒ½æ˜¯åœ¨æ¢è®¨å°†ä¸€ç¾¤äººæ”¾å…¥ä¸€ä¸ªæ— é¢†å¯¼ç©ºé—´ä¸‹ï¼Œæ‰€æš´éœ²å‡ºæ¥çš„äººæ€§é—®é¢˜ï¼Œåªä¸è¿‡è¿™ä¸€æ¬¡æŠŠç›®æ ‡æ¢æˆäº†é’±ï¼Œâ€œæ›´ä¿—æ°”äº†â€</p><p>ç®€å•ä»‹ç»ä¸€ä¸‹å‰§æƒ…ï¼Œå¯èƒ½æ¶‰åŠå‰§é€ï¼Œè°¨æ…è§‚çœ‹</p><div class="note info">            <p>ç”·ä¸»æ˜¯åŒé—¨æ´çš„æˆå¥‡å‹‹ï¼Œç”Ÿæ´»ç©·å›°æ½¦å€’ï¼Œé å¹´è¿ˆçš„æ¯äº²å–èœæŒ£é’±å…»æ´»ï¼Œè‡ªå·±å¹³æ—¥å–œæ¬¢å»èµŒèµ›é©¬ï¼Œæ‰‹æ°”ä¸ä½³ç»å¸¸èµŒè¾“ï¼Œä¹Ÿåœ¨å¤–é¢æ¬ äº†é«˜åˆ©è´·ã€‚å’Œå¦»å­å·²ç»ç¦»å©šå¤šå¹´ï¼Œæœ‰ä¸€ä¸ª7å²çš„å°å¥³å„¿ã€‚ç”·ä¸»è™½ç„¶å„æ–¹é¢éƒ½ä¸å¤ªè¡Œï¼Œä½†æ˜¯ç¡®å®æ˜¯æ‰“å¿ƒé‡Œå–œæ¬¢è‡ªå·±å¥³å„¿ã€‚ä½†æ˜¯ç”±äºè‡ªå·±å¤ªç©·ï¼ŒèµŒèµ›é©¬èµ¢å¾—é’±ä¹Ÿè¢«åˆ«äººå·èµ°ï¼Œååˆ†å¯¹ä¸èµ·å¥³å„¿ã€‚æ°å¥½æ­¤æ—¶ï¼Œæœ‰äººæ‰¾ä¸Šæ¥ï¼Œé—®ä»–æƒ³ä¸æƒ³ç©æ¸¸æˆï¼Œèµ¢äº†å°±æœ‰é’±æ‹¿ã€‚ç”·ä¸»æœ€ç»ˆæ²¡æœ‰ç»å¾—ä½è¯±æƒ‘é€‰æ‹©åŠ å…¥ï¼Œè¿™ä¸ªç»„ç»‡ä¹Ÿå°±æ˜¯æ•…äº‹çš„ä¸»çº¿â€”â€”é±¿é±¼æ¸¸æˆï¼ˆSquid Gameï¼‰</p><p>æ¸¸æˆä¸€å…±æœ‰ä¸ƒå…³ï¼Œæ¯ä¸€å…³éƒ½æ˜¯åœ¨å¹´å¹¼æ—¶ä¼šç©çš„æ¸¸æˆï¼Œå¦‚ï¼šä¸€äºŒä¸‰æœ¨å¤´äººï¼Œå¼¹çƒï¼Œä»¥åŠç¬¬ä¸ƒå…³é±¿é±¼æ¸¸æˆã€‚åœ¨è¿™ä¸ªå¯†é—­çš„ç©ºé—´å†…ï¼Œæ‰€æœ‰äººé€šè¿‡å…¶ä»–ç«äº‰å¯¹æ‰‹çš„æ­»äº¡ç´¯è®¡å¥–æ± é‡Œçš„å¥–é‡‘ï¼Œæ¯ä¸ªäººç›¸å½“äº 1 äº¿éŸ©å…ƒã€‚åªæœ‰é€šè¿‡æœ€åä¸€å…³çš„ä¸€ä¸ªäººå¯ä»¥æ‹¿åˆ°å¥–æ± é‡Œçš„å¥–é‡‘ã€‚åœ¨æ•´ä¸ªæ¸¸æˆè¿‡ç¨‹ä¸­ï¼Œä¸é™åˆ¶æ¯ä½ç«äº‰è€…çš„è·èƒœæ‰‹æ®µï¼Œå³ä¾¿æ˜¯ç›´æ¥æ€æ­»åˆ«çš„ç«äº‰è€…ä¹Ÿæ˜¯è¢«é»˜è®¸çš„</p>          </div><p>å¯ä»¥è¯´ï¼Œâ€œSquid Gameâ€ åªæ˜¯æœ€åä¸€å…³ï¼Œä½†å®ƒåŒæ—¶ä¹Ÿè±¡å¾ç€ä¸æ‹©æ‰‹æ®µã€ç”šè‡³é€šè¿‡æš´åŠ›çš„æ–¹å¼æ¥è·å–èƒœåˆ©ã€‚è¿™æœ¬èº«æ˜¯åœ¨ç°åœ¨ç¤¾ä¼šçœ‹æ¥éå¸¸è’è°¬çš„ï¼Œæ‰€ä»¥ç”µè§†å‰§æŠŠæ¸¸æˆçš„ç»„ç»‡æ–¹çš„ä½ç½®æ‘†çš„å¾ˆè’è°¬ï¼Œè®©å®ƒå¤„å¤„å……æ»¡è’è°¬ä¹‹å¤„ã€‚ä¸»åŠæ–¹çš„åŠ¨æœºå¾ˆè’è°¬ï¼Œå¯Œäººä»¬å–ä¹çš„æ–¹å¼å¾ˆè’è°¬ï¼Œå‚åŠ è€…åŒæ„å‚åŠ çš„æ–¹å¼å¾ˆè’è°¬ï¼Œå·¥ä½œäººå‘˜çš„ç©¿ç€å’Œè¡Œä¸ºå¾ˆè’è°¬ï¼Œæ¯”èµ›åœºåœ°çš„å¸ƒç½®å¾ˆè’è°¬ç­‰ç­‰ã€‚</p><p>ç”µè§†å‰§ä¸­è¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼Œ15 å¹´æœ€ç»ˆçš„è·èƒœè€…ï¼Œä¹Ÿå°±æ˜¯è­¦å¯Ÿçš„å“¥å“¥ï¼Œåœ¨å¤šå¹´åæˆä¸ºäº†ä¸»åŠæ–¹çš„é»‘è¡£äººã€‚è€Œæœ€åï¼Œæˆå¥‡å‹‹ä¹Ÿæ²¡æœ‰ç™»ä¸Šå»å¾€ç¾å›½çš„é£æœºï¼Œè½¬å¤´æ‹¿èµ·äº†æ–°ä¸€è½®çš„é±¿é±¼æ¸¸æˆåç‰‡ã€‚ä»–æ˜¯å¦ä¼šæˆä¸ºä¸‹ä¸€ä¸ªé»‘è¡£äººï¼Œè¿˜æ˜¯ç»§æ‰¿è­¦å¯Ÿçš„é—å¿—ç»§ç»­æ¢æŸ¥ä¸‹å»ã€‚æ˜¾ç„¶è€äººçš„æ­»å¹¶æ²¡æœ‰ç»„ç»‡ Squid Game çš„ç»§ç»­ä¸¾åŠï¼Œå‰§ä¸­å¯Œè±ªæ„æŒ‡æ˜¯è°ï¼Œè°åˆä¼šæˆä¸ºæ–°ä¸€è½®çš„è§‚çœ‹è€…</p><p>æœ‰ä¸€ä¸ªäº‹æƒ…å‰§é‡Œä¸€ç›´æ²¡æœ‰äº¤ä»£ï¼Œå³å·¥ä½œäººå‘˜çš„åŠ¨æœºã€‚è¿™é‡Œä¸å±•å¼€å™è¿°ï¼Œå¦‚æœä½ ä¹Ÿçœ‹äº†ã€ŠSquid Gameã€‹ï¼Œé‚£ä½ å¯èƒ½ä¹Ÿä¼šå¯¹è¿™ä¸ªç™»è®°æ£®ä¸¥çš„ç¾¤ä½“äº§ç”Ÿå…´è¶£</p><p>å°½ç®¡é»‘è¡£äººä¸€ç›´åœ¨é˜è¿° Squid Game çš„ç›®çš„æ˜¯è®©ä»–ä»¬èƒ½æœ‰æœ€åä¸€æ¬¡æœºä¼šç¿»ç›˜ï¼Œåœ¨è¿™å…¶ä¸­æ¯ä¸ªäººéƒ½æ˜¯å¹³ç­‰çš„ï¼Œä½†æ˜¯è¿™ä¸ªå¹³ç­‰ä¸æˆ‘ä»¬å¸¸è§„ç†è§£ä¸­çš„å¹³ç­‰å¹¶ä¸å®Œå…¨ç›¸ç­‰ã€‚ä»–æ˜¯æŠ›å¼ƒäº†å…ˆå¤©æ¡ä»¶ä¸‹çš„å¹³ç­‰ï¼Œä»…ä»…æ˜¯å¯¹äºè‚‰ä½“ä¸Šçš„å¹³ç­‰ï¼Œè€Œä¸æ˜¯å¯¹æ¯ä¸ªäººç»¼åˆï¼ˆå¤§è‡´ä¸ºæˆ‘ä»¬å¹³æ—¶åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­çš„å¹³ç­‰è§‚ï¼‰æƒ…å†µä¸‹çš„å¹³ç­‰ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯è®©æ•´éƒ¨å‰§æ˜¾å¾—è’è°¬çš„ä¸€ç‚¹</p><p>éå¸¸é«˜å…´çš„èƒ½çœ‹åˆ°åœ¨æœ€åä¸è€äººçš„å®éªŒä¸­ï¼Œäººæ€§ä¸çˆ±æˆ˜èƒœäº†è€äººçš„å†·æ¼ ä¸–ç•Œè§‚ï¼Œä½†æ˜¯ä»–å¯èƒ½å¹¶æ²¡æœ‰çœ‹åˆ°å°±ç¦»å¼€äº†ã€‚æœ€åï¼Œæˆå¥‡å‹‹å¿ƒä¸­çš„æ­£ä¹‰å’Œäººæ€§ï¼Œä¹Ÿè®©ä»–åšå‡ºäº†åœ¨æˆ‘ä»¬è§’åº¦æ›´ä¸ºåˆç†çš„é€‰æ‹©ã€‚</p><p>æ€»ç»“æ¥çœ‹ï¼Œã€ŠSquid Gameã€‹æ˜¯ä¸€éƒ¨ä¸­ä¸Šæ¸¸çš„ç”µè§†å‰§ï¼Œå®ƒä»¥è’è¯çš„å½¢å¼ä½œä¸ºè¡¨å±‚ï¼Œæ ¸å¿ƒä¸€ç›´å›´ç»•åœ¨äººæ€§ä¸é‡‘é’±çš„æ¢è®¨ã€‚å› ä¸ºæœ¬èº«åœ¨å¯¹äºè¿™ä¸ªè¯é¢˜çš„æ¢è®¨ä¸Šæœ‰éå¸¸å¤šçš„ä¼˜ç§€ä½œå“ï¼Œå…¶ä¸­ä¹Ÿæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯å‡ºè‡ªéŸ©å›½ï¼Œæ‰€ä»¥æœ¬èº«ç”µè§†å‰§æ˜¯æœ‰ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„åŸºè°ƒçš„ã€‚å†åŠ ä¸Šå®ƒç”¨è’è¯ä¸ç»ã€åšäººçœ¼çƒçš„æ–¹å¼å‘ˆç°å‡ºæ¥ï¼Œä¹Ÿè®©å®ƒæˆä¸º 2021 å¹´ä¸‹çˆ†å“çº§çš„å­˜åœ¨ã€‚è¿™éƒ¨ç”µè§†å‰§åœ¨æœ€æ—©æ”¾å‡ºé¢„å‘Šç‰‡çš„æ—¶å€™æˆ‘å°±æœ‰åœ¨ä¹Œé¸¦ä¸Šå…³æ³¨åˆ°ï¼Œå®ƒä¸€ç»æ¨å‡ºä¹Ÿå¸¸å¸¸å æ® Netflix çš„é¦–é¡µæ¨èä½ï¼Œä½†æ˜¯æˆ‘ä¸€ç›´æ²¡æœ‰æ‰“å¼€å®ƒçœ‹ï¼Œå³ä¾¿åœ¨å®ƒçƒ­åº¦æœ€é«˜çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿä¾ç„¶ä¸è®¤ä¸ºå®ƒä¼šæ˜¯ä¸€éƒ¨å¥½ä½œå“ã€‚ç›´åˆ°è‡ªå·±çœ‹å®Œï¼Œæˆ‘èƒ½ç†è§£å®ƒä¸ºä»€ä¹ˆèƒ½æˆä¸ºè¿™æ ·ç«çˆ†å…¨çƒçš„å­˜åœ¨ï¼Œä½†æ˜¯æˆ‘å¹¶ä¸èƒ½æ‰¿è®¤å®ƒå¯ä»¥è¶…è¿‡å‰è¾ˆä»¬å¯¹è¿™ä¸ªè¯é¢˜çš„æ¢è®¨ï¼Œå®ƒçš„ç«çˆ†å¾ˆå¤§ç¨‹åº¦ä¸Šå½’å’äºå¤–è¡¨æ›´é€‚åº”è¿™ä¸ªæ—¶ä»£çš„èŠ‚å¥ç½¢äº†ã€‚å¦‚æœ Netflix æˆåŠŸåˆ¶ä½œå‡ºäº†ç¬¬äºŒéƒ¨ï¼Œæˆ‘ä¾ç„¶ä¸ä¼šç«‹åˆ»å°±çœ‹ï¼Œä½†ä¸èƒ½å¦è®¤ï¼Œå®ƒæ˜¯ä¸€éƒ¨ä¼˜ç§€çš„ç”µè§†å‰§ï¼Œå®ƒä¹Ÿé…å¾—ä¸Šè®© Netflix è¿™ä¸€å­£åº¦æ–°ç”¨æˆ·æ•°æ®è¾¾åˆ°æ–°é«˜ã€‚</p>          </div>]]></content>
    
    <summary type="html">
    
      Squid Game is Hot&lt;br&gt;But why?
    
    </summary>
    
    
    
      <category term="THINKING" scheme="https://augists.top/tags/THINKING/"/>
    
      <category term="NETFLIX" scheme="https://augists.top/tags/NETFLIX/"/>
    
  </entry>
  
  <entry>
    <title>Record an Experience of Computer Fixing</title>
    <link href="https://augists.top/SELF/THINKING/Record-an-experience-of-computer-fixing/"/>
    <id>https://augists.top/SELF/THINKING/Record-an-experience-of-computer-fixing/</id>
    <published>2021-10-25T12:28:05.000Z</published>
    <updated>2021-11-08T15:07:08.286Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>æ˜¨å¤©æœ‹å‹çš„ windows åœ¨æ›´æ–°ç³»ç»Ÿçš„æ—¶å€™ï¼Œçªç„¶è“å±äº†ï¼Œå«æˆ‘è¿‡å»å¸®å¿™ã€‚</p><p>è“å±ä»£ç  0xc0000001ï¼Œç½‘ä¸ŠæŸ¥è¯¢å…¶é”™è¯¯åŸå› ç‰¹åˆ«ä¹±ï¼Œæœ€ç»ˆç¡®å®šå¯èƒ½æ˜¯å› ä¸ºç³»ç»Ÿå¼•å¯¼æ•…éšœã€‚</p><p>ç”µè„‘æ˜¯ ROG çš„ç¬”è®°æœ¬ï¼Œæ¯æ¬¡å¼€æœºæ—¶é—´éƒ½è¶…çº§é•¿ã€‚å‡ºç°è“å±é—®é¢˜åï¼Œæ— æ³•æ­£å¸¸è¿›å…¥ç³»ç»Ÿã€‚F8é€šè¿‡å®‰å…¨æ¨¡å¼å¯åŠ¨ï¼Œæ— è®ºæ˜¯å¦å¸¦å‘½ä»¤è¡Œçš„å®‰å…¨æ¨¡å¼ï¼ˆæˆ‘åº”è¯¥æ²¡è®°é”™ï¼Œä¹Ÿå¯èƒ½å«æ¢å¤æ¨¡å¼ï¼‰è¿˜æ˜¯æ˜¯å¦ç¦ç”¨ä¸€äº›å¯åŠ¨è®¾ç½®å†å¯åŠ¨ç³»ç»Ÿï¼Œéƒ½æ— æ³•è¿›å…¥ç³»ç»Ÿã€‚å°è¯•äº†è‡ªå¸¦çš„ä¿®å¤å·¥å…·ã€æ¢å¤åˆ°è¿˜åŸç‚¹ï¼ˆ3ä¸ªï¼‰ã€UEFIå›ºä»¶è®¾ç½®ç­‰æ‰€æœ‰å¯ä»¥å°è¯•çš„æ“ä½œï¼ˆé™¤äº†ç›´æ¥é‡ç½®ç³»ç»Ÿï¼‰ï¼Œéƒ½æ²¡æœ‰ä»»ä½•ååº”ã€‚</p><p>å…¶å®ä¿®ç”µè„‘å¹¶ä¸æ˜¯æˆ‘æƒ³è¯´çš„ï¼Œæœ€ç»ˆçš„ä¿®å¤æ–¹æ³•æ˜¯ç”¨å…¶ä»–ç”µè„‘åšäº†ä¸€ä¸ªwindowsçš„å¯åŠ¨ç›˜ç„¶åå°†ç³»ç»Ÿè£…åœ¨Dç›˜ï¼Œå¹¶ä¸”æˆåŠŸè¿›å…¥äº†æ–°åšå¥½çš„ç³»ç»Ÿï¼Œå¹¶å°†Cç›˜é‡Œéœ€è¦çš„æ–‡ä»¶æ‹·è´å›æ¥ã€‚æˆ‘æ˜¯åœ¨æƒ³ã€‚ã€‚ã€‚</p><p>å½“ä½ ä½¿ç”¨ä¸€å¥—åˆ«äººåˆ¶ä½œå¥½å¹¶ä¸”é—­æºçš„ç³»ç»Ÿï¼Œå½“å®ƒå‡ºç°è¿™ç§æ•…éšœæ—¶ï¼Œä½ åªèƒ½ä½¿ç”¨å¼€å‘è€…æä¾›çš„ä¿®å¤å·¥å…·å°è¯•è¿›è¡Œä¿®å¤ï¼Œè€Œæ— æ³•äº†è§£ä¸ºä»€ä¹ˆå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å¤ç°ï¼Œæ€ä¹ˆæ‰èƒ½é¿å…å‡ºç°è¿™ç§çŠ¶å†µã€‚æˆ‘ä¸€ç›´æå€¡çš„ç†å¿µæ˜¯ï¼Œç®€çº¦ã€ä½†å°†å…¶ä»–å¤æ‚çš„åŠŸèƒ½ä½œä¸ºå¤‡é€‰é¡¹æä¾›ç»™ç”¨æˆ·ï¼Œè®©å®ƒçš„å†³å®šæƒè¿˜ç»™ç”¨æˆ·è‡ªå·±ã€‚æˆ‘å¯ä»¥ä¸ç”¨ï¼Œä½†ä½ ä¸èƒ½æ²¡æœ‰ã€‚ä»¥æ‰‹æœºç³»ç»Ÿä¸ºä¾‹ï¼Œæˆ‘å¯ä»¥å°†å±å¹•åˆ·æ–°ç‡é»˜è®¤è®¾ç½®åˆ°ä¸€ä¸ªç”¨æˆ·èƒ½æ¥å—å¹¶ä¸”å¯¹ç³»ç»Ÿå½±å“ä¸å¤§çš„æ•°å€¼ï¼Œæ¯”å¦‚ç³»ç»Ÿé»˜è®¤è®¾ç½®ä¸º60Hzçš„åˆ·æ–°ç‡ï¼ŒåŒæ—¶æä¾›90Hzã€120Hzç”šè‡³ProMotionè¿™ç§å¯å˜åˆ·æ–°ç‡çš„é€‰é¡¹ã€‚ä¾ç…§å®ƒçš„å®ç”¨ç¨‹åº¦ã€ç”¨æˆ·çš„ä½¿ç”¨é¢‘ç‡ç”šè‡³è¯´è®¡ç®—å‡ºçš„ç”¨æˆ·ä½¿ç”¨çš„å¯èƒ½æ€§ï¼Œå°†å®ƒæ”¾åœ¨ä¸€å®šçš„ç³»ç»Ÿè®¾ç½®çš„å±‚çº§æ·±åº¦ã€‚æ¯”å¦‚åˆšæ‰æåˆ°çš„å±å¹•åˆ·æ–°ç‡è®¾ç½®æ”¾åœ¨ è®¾ç½®-æ˜¾ç¤º-å±å¹•åˆ·æ–°ç‡ å±‚çº§é‡Œï¼Œæˆ–æ˜¯ è®¾ç½®-æ˜¾ç¤º-å±å¹•-åˆ·æ–°ç‡ï¼Œå› ä¸ºå±å¹•åˆ·æ–°ç‡æ˜¯ç”¨æˆ·æœ‰å¯èƒ½ä¸é»˜è®¤è®¾ç½®æ„è§ä¸åŒè€Œè¿›è¡Œä¿®æ”¹çš„é€‰é¡¹ã€‚å¦‚æœæä¾›äº†å¦‚ProMotionè¿™ç§åŠ¨æ€å¯å˜åˆ·æ–°ç‡çš„è®¾ç½®ï¼Œå½“ç”¨æˆ·å°†åˆ·æ–°ç‡ä¿®æ”¹ä¸ºProMotionåï¼Œå±å¹•åˆ·æ–°ç‡çš„é€‰é¡¹è®¾ç½®å±‚çº§ä¼šè¿›è¡Œä¸‹ç§»ï¼Œå°†å®ƒæ”¾å…¥ è®¾ç½®-å…¶ä»–-å±å¹•ï¼ˆæ˜¾ç¤ºï¼‰-å±å¹•åˆ·æ–°ç‡ è¿™ç§è§’è½é‡Œã€‚æœ¬èº«ç³»ç»Ÿæä¾›äº†æœ€åŸºç¡€æœ€å¤§ä¼—æœ€ä¼˜åŒ–ï¼ˆç”šè‡³å¯ä»¥è¯´æ˜¯è®©ç”¨æˆ·æ„ŸçŸ¥çš„ç»“æœæœ€å¥½ï¼‰çš„æ–¹æ¡ˆï¼Œå°†æ–¹æ¡ˆçš„ä¿®æ”¹ç»†èŠ‚åŒæ ·æä¾›ç»™ç”¨æˆ·å¯ä»¥è¿›è¡Œä»»æ„çš„ä¿®æ”¹ã€‚</p><p>è¯´å®Œæˆ‘è‡ªå·±çš„æƒ³æ³•ï¼Œé‚£å°±å¯ä»¥æ¥è¯´è¯´ç°åœ¨å¸‚åœºä¸Šçš„äº§å“äº†ã€‚windowsä½œä¸ºä¸€ä¸ªå®Œå…¨é—­æºï¼ŒåŸºæœ¬è½¯ä»¶ä¹Ÿé—­æºçš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥è¯´æ˜¯å’Œæˆ‘ç›¸å»ç”šè¿œçš„ã€‚å½“æˆ‘é‡åˆ°è¿™ç§æƒ…å†µï¼Œä»…ä»…ä½¿ç”¨å®ƒæä¾›çš„å·¥å…·å’Œæ‰‹æ®µæ— æ³•æ–¹ä¾¿å¿«æ·çš„è§£å†³é—®é¢˜æ—¶ï¼Œæˆ‘ä¼šéå¸¸æ— èƒ½ä¸ºåŠ›ã€‚macOSåªèƒ½è¯´è¾¾æ ‡äº†ä¸€éƒ¨åˆ†ã€‚æœ¬èº«ç³»ç»Ÿä¹Ÿé—­æºï¼Œä½†æ˜¯å®ƒå¾ˆå¥½çš„æä¾›äº†å¯¹å¼€æºçš„Linuxçš„å…¼å®¹æ€§ï¼ŒåŒæ—¶å¼€æ”¾çš„å»æ¥å—äº†å¤§é‡å¼€æºè½¯ä»¶å’Œå¼€æºæ€æƒ³ã€‚æ‰€ä»¥å½“ä½ åœ¨macOSä¸Šé‡åˆ°äº†é—®é¢˜ï¼Œå¦‚æœä½ æœ‰èƒ½åŠ›ï¼Œæ˜¯å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šè‡ªå·±å°è¯•è§£å†³çš„ã€‚ä½†æ˜¯åœ¨å¼€æ”¾ç³»ç»Ÿæœ¬èº«ä¸Šï¼Œå®ƒåšçš„åªæ˜¯æä¾›äº†ä¸€å¥—éå¸¸ä¼˜ç§€çš„é…ç½®æ–¹æ¡ˆï¼Œè€Œå¹¶æ²¡æœ‰ç»™ç”¨æˆ·å¼€æ”¾æ›´å¤šçš„æƒé™äº†ã€‚åœ¨Linuxçš„ä¼—å¤šå‘è¡Œç‰ˆé‡Œï¼Œarchå°±æ¯”è¾ƒæç«¯ï¼Œubuntuç³»ä¸­è§„ä¸­çŸ©ã€‚archï¼ˆç”šè‡³gentooï¼‰å°†æ‰€æœ‰éƒ½å¼€æ”¾ç»™äº†ç”¨æˆ·ï¼Œ ç”šè‡³å¯ä»¥è¯´è¿æœ€åŸºæœ¬çš„éƒ½å®Œå…¨äº¤ç»™ç”¨æˆ·è‡ªå·±å®šä¹‰ã€‚ubuntuç³»æœ¬èº«æä¾›äº†ä¸€å¥—è¿˜ä¸é”™çš„è·¯å­ï¼Œä½†æ˜¯ä¼¼ä¹åœ¨å¯è‡ªå®šä¹‰æ€§ä¸Šç¨å¾®ä¼šå·®ä¸€ç‚¹ã€‚ä»‹äºä¸­é—´çš„åƒManjaroåŒæ—¶å…¼å…·äº†æä¾›é…å¥—æœåŠ¡ã€æä¾›ç”¨æˆ·æœ€å¤§åŒ–çš„é€‰æ‹©æƒï¼ŒåŒæ—¶æ‹¥æœ‰ç±»archçš„è‡ªå®šä¹‰æ€§ï¼Œæ‰€ä»¥æˆ‘ä¸€ç›´æŠŠManjaroå½“ä½œæˆ‘å¿ƒç›®ä¸­æœ€ä½³çš„é€‰æ‹©äº†ã€‚</p>          </div>]]></content>
    
    <summary type="html">
    
      Export My Thought
    
    </summary>
    
    
    
      <category term="THINKING" scheme="https://augists.top/tags/THINKING/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu Server on Raspberry Pi</title>
    <link href="https://augists.top/SELF/SHARING/STUDY/Ubuntu-Server-on-Raspberry-Pi/"/>
    <id>https://augists.top/SELF/SHARING/STUDY/Ubuntu-Server-on-Raspberry-Pi/</id>
    <published>2021-10-05T14:51:08.000Z</published>
    <updated>2021-11-08T15:10:24.736Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>åˆåœ¨æ ‘è“æ´¾ä¸ŠæŠ˜è…¾äº†ä¸€é¡¿ï¼Œç®€å•æ•´ç†ä¸€ä¸‹ä¸€å¼€å§‹é‡åˆ°çš„é—®é¢˜</p><hr><h2 id="æ¢æº"><a href="#æ¢æº" class="headerlink" title="æ¢æº"></a>æ¢æº</h2><p>ç°åœ¨æ‹¿åˆ° ubuntu æ¯æ¬¡ç¬¬ä¸€ä»¶äº‹å°±è¦å…ˆå»ç½‘ä¸Šæ‰¾é•œåƒæºã€‚æ¯”è¾ƒä¹ æƒ¯ç”¨æ¸…åæºå’Œä¸­ç§‘å¤§æº<br>æŒ‰ç…§æƒ¯ä¾‹å†™äº†å‡ ä¸ªé•œåƒæºï¼Œä¸€æ›´æ–°å‘ç°åäº†ï¼Œæ ¹æœ¬ä¸è¡Œ<br>ä¹‹å‰ä¸€ç›´æ˜¯åœ¨æœåŠ¡å™¨ä¸Šåšé…ç½®ï¼Œæ ‘è“æ´¾æœ€å¤§çš„åŒºåˆ«åœ¨äºæ”¹ç”¨äº† arm æ¶æ„<br>é•œåƒæºå¯¹ arm æ¶æ„è¦ä½¿ç”¨ ports æº</p><p><img src="https://mirrors.ustc.edu.cn/help/ubuntu-ports.html" alt="UTSC ubuntu ports"><br><img src="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" alt="TUNA ubuntu ports"></p><h2 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h2><p>æ¢å®Œæºä¹‹åæ›´æ–°ï¼Œè¿˜æ˜¯ä¸è¡Œï¼ŒæŠ¥é”™å¤§æ¦‚æ˜¯è¿™ä¸ª</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update failed because certificate verification failed because handshake failed on nodesource</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æ˜¯ç”¨ ca è¯ä¹¦è§£å†³çš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ca-certificates</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æƒ³äº†æƒ³ï¼Œåº”è¯¥ä¸æ˜¯è¿™ä¸ªé—®é¢˜ã€‚<code>date -R</code> æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´ï¼Œæ—¶åŒºé»˜è®¤è¢«è®¾ç½®æˆäº†æ ¼æ—å°¼æ²»</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tzselect</span><br></pre></td></tr></table></figure><p>ä¸çŸ¥é“è¿™æœ‰å•¥ç”¨ï¼Œå®ƒåŠ åœ¨ <code>.profile</code> æ–‡ä»¶é‡Œ <code>TZ=</code>ï¼Œä¸æ˜¯å¾ˆä¼˜é›…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><p>å¤§æ¦‚ç”¨è½¯é“¾æ¥æ›´åˆç†</p><h2 id="é™æ€ip"><a href="#é™æ€ip" class="headerlink" title="é™æ€ip"></a>é™æ€ip</h2><p>ubuntu server é…ç½®é™æ€ ip å’Œä¹‹å‰æ ‘è“æ´¾è‡ªå·±çš„ raspbianOS ä¸Šä¸å¤ªä¸€æ ·ï¼Œè¦å¤æ‚ä¸€äº›<br>å› ä¸ºæœ¬èº«æˆ‘ä»¬æ˜¯ä¸ºäº†æ­å»º ss æœåŠ¡å™¨ï¼Œå¹¶ä¸”æœ‰ä¸€äº›ç‰¹æ®Šéœ€æ±‚ï¼Œå°±æ²¡æœ‰é…å¥½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/netplan/00-installer-config.yaml</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">network:</span><br><span class="line">  ethernets:</span><br><span class="line">    ens160:     #é…ç½®çš„ç½‘å¡çš„åç§°</span><br><span class="line">      addresses: [192.168.0.105/24]    #é…ç½®çš„é™æ€ipåœ°å€å’Œæ©ç </span><br><span class="line">      dhcp4: no    #å…³é—­DHCPï¼Œå¦‚æœéœ€è¦æ‰“å¼€DHCPåˆ™å†™yes</span><br><span class="line">      optional: true</span><br><span class="line">      gateway4: 192.168.0.1    #ç½‘å…³åœ°å€</span><br><span class="line">      nameservers:</span><br><span class="line">         addresses: [114.114.114.114,180.76.76.76]    #DNSæœåŠ¡å™¨åœ°å€ï¼Œå¤šä¸ªDNSæœåŠ¡å™¨åœ°å€éœ€è¦ç”¨è‹±æ–‡é€—å·åˆ†éš”å¼€</span><br><span class="line">  version: 2</span><br><span class="line">  renderer: networkd    #æŒ‡å®šåç«¯é‡‡ç”¨systemd-networkdæˆ–è€…Network Managerï¼Œå¯ä¸å¡«å†™åˆ™é»˜è®¤ä½¿ç”¨systemd-workd</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netplan apply</span><br></pre></td></tr></table></figure>          </div>]]></content>
    
    <summary type="html">
    
      There is not much executable and helpful manual page for Ubuntu Server on a Raspberry Pi
    
    </summary>
    
    
    
      <category term="DEVICE" scheme="https://augists.top/tags/DEVICE/"/>
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>MAC With External Display</title>
    <link href="https://augists.top/APPLE/MAC-with-external-display/"/>
    <id>https://augists.top/APPLE/MAC-with-external-display/</id>
    <published>2021-09-13T15:12:29.000Z</published>
    <updated>2021-09-13T15:37:44.965Z</updated>
    
    <content type="html"><![CDATA[<div class="note info">            <p>åˆšå¼€å­¦çš„æ—¶å€™ä¹°äº†å°æ˜¾ç¤ºå™¨ï¼Œç¡®å®æ˜¯æˆ‘çœ‹åˆ°è¿‡çš„æœ€ä¾¿å®œçš„ç»™ mac ç”¨çš„æ˜¾ç¤ºå™¨äº†</p>          </div><div class="note warning">            <p>ç»™ mac é…æ˜¾ç¤ºå™¨ï¼Œç¨å¾®æœ‰ç‚¹è¦æ±‚çš„è¯ï¼Œå¤§æ¦‚è¿™äº›æ˜¯å¿…é¡»çš„å§</p><ul><li>3.5k ä»¥ä¸Šçš„åˆ†è¾¨ç‡</li><li>æ”¯æŒ HiDPI</li><li>åå‘å……ç”µ 65W ä»¥ä¸Šçš„ C å£</li><li>è‰²åŸŸè¾¾æ ‡ä¸ºæ”¯æŒ P3 è‰²åŸŸ</li></ul><p>è¿™åªæ˜¯ä¸€ä¸ªéå¸¸ç¬¼ç»Ÿçš„é…ç½®è¦æ±‚ï¼Œä¾‹å¦‚ P3 è‰²åŸŸåœ¨å®é™…æ˜¾ç¤ºçš„æ—¶å€™ä¹Ÿä¼šæœ‰éå¸¸å¤šçš„è®²ç©¶<br>å¯ä»¥åœ¨å…ˆçœ‹è¯„æµ‹çš„å¯¹ 4k ä»¥ä¸‹æ˜¾ç¤ºå™¨çš„æ¨ªè¯„ä¸­çœ‹åˆ°éå¸¸å¤šçš„è¯„ä»·æ ‡å‡†ï¼ŒåŒæ—¶å³ä¾¿æ˜¯ç›¸åŒçš„æ ‡å‡†ä¹Ÿå¯èƒ½æœ‰ä¸€äº›æ¶ˆè´¹è€…æ— æ³•æ„ŸçŸ¥çš„å·®å¼‚</p><p>æˆ‘è´­ä¹°çš„æ˜¯ WE ï¼ˆå°å‚ï¼‰çš„æ˜¾ç¤ºå™¨ï¼Œæ®è¯´é‡‡ç”¨çš„æ˜¯äº¬ä¸œæ–¹çš„é¢æ¿<br>æœ€ç»ˆèŠ±è´¹ 1.5k çš„ä»·æ ¼å°±æ‹¿ä¸‹è¿™æ¬¾æ˜¾ç¤ºå™¨äº†<br>ä½†æ˜¯æ¯•ç«Ÿä»·é’±æ‘†åœ¨è¿™é‡Œï¼Œè‰²åŸŸä¸Šåªèƒ½è¾¾åˆ° 99-100% sRGB<br>ä½†æ˜¯å…¶å®å®é™…è§‚æ„Ÿä¸ä¼šå·®ä»€ä¹ˆï¼Œæ•´ä½“è‰²è°ƒç›¸æ¯”ä¸ mac build-in æ˜¾ç¤ºå™¨ä¼šåæš–çš„æ¯”è¾ƒå¤šï¼Œç›®å‰ä¹Ÿæ²¡æœ‰æ”¹è°ƒè‰²æ–¹æ¡ˆ</p><hr><p>å‰é¢è¯´çš„æ„Ÿè§‰çœŸçš„æŒºå¥½çš„ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹æ˜¯æˆ‘è‡ªå·±é‡åˆ°çš„é—®é¢˜<br>mac è‡ªå¸¦çš„ç”µæºçº¿æ˜¯æ²¡æœ‰è§†é¢‘ä¼ è¾“èƒ½åŠ›çš„<br>è¿™ä¸€ç‚¹ï¼Œä¸å¾—ä¸æ‰¿è®¤ï¼Œæœ‰é“ç†ï¼Œä½†æ˜¯ç”¨çš„æ—¶å€™å¾ˆçƒ¦äºº<br>ç¡®å®ï¼Œä¸æ˜¯æ‰€æœ‰äººéƒ½æœ‰æŠŠ mac æ¥åˆ°å¤–ç½®æ˜¾ç¤ºå™¨çš„éœ€æ±‚<br>ä½†æ˜¯åƒæˆ‘è¿™ç§ä¸€å¼€å§‹ä¸çŸ¥é“çš„äººï¼Œä¹°äº†æ˜¾ç¤ºå™¨ä¹‹åå‘ç°åŸè£…çš„çº¿ä¸èƒ½ç”¨ï¼Œè¢«è¿«åªèƒ½ä½¿ç”¨ HDMI</p><p>ä¹°äº†æ ¹ä¾¿å®œçš„é›·ç”µ 3 æ•°æ®çº¿ï¼Œä¾¿å®œçš„æˆ‘æœ‰ç‚¹ä¸æ˜¯å¾ˆèƒ½ç›¸ä¿¡<br>å¸¸è§„çš„é›·ç”µ 3 æ•°æ®çº¿ä»·æ ¼ä¸€èˆ¬åœ¨ 2-3 ç™¾ä¸Šä¸‹<br>ç°åœ¨åªèƒ½ç­‰ä¾¿å®œçš„è¿™æ ¹åˆ°äº†è¯•è¯•å¥½ä¸å¥½ç”¨äº†<br>å¸Œæœ›åˆ°æ—¶å€™èƒ½è®©æ¡Œé¢æ›´æ¸…çˆ½ä¸€ç‚¹ï¼Œåªä½¿ç”¨ä¸€æ ¹é›·ç”µæ•°æ®çº¿æ¥å‡ºæ¥</p>          </div>]]></content>
    
    <summary type="html">
    
      Here comes an external display I bought&lt;br&gt;An 27 inches 4k display with full functional type c&lt;br&gt;BUT!!! only 1.5k RMB
    
    </summary>
    
    
    
      <category term="APPLE" scheme="https://augists.top/tags/APPLE/"/>
    
      <category term="MAC" scheme="https://augists.top/tags/MAC/"/>
    
  </entry>
  
  <entry>
    <title>Backspace Does Not Work on VPS?</title>
    <link href="https://augists.top/SELF/SHARING/STUDY/Backspace-does-not-work-on-VPS/"/>
    <id>https://augists.top/SELF/SHARING/STUDY/Backspace-does-not-work-on-VPS/</id>
    <published>2021-08-27T08:36:56.000Z</published>
    <updated>2021-11-08T15:09:39.614Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>åœ¨æˆ‘ç”¨æˆ‘çš„æ–°ç»ˆç«¯ kitty ç™»é™† VPS çš„æ—¶å€™å‘ç°ï¼Œå¾ˆå¤šå¿«æ·é”®éƒ½å¤±æ•ˆäº†ã€‚æ¯”å¦‚é€€æ ¼é”®å°±ä¼šå˜æˆç©ºæ ¼ï¼Œ<code>&lt;C-u&gt;</code> ä¼šæ²¡æœ‰ååº”ï¼Œ<code>clear</code> ä¼šæç¤ºæˆ‘çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒç­‰</p><p><img src="https://i.loli.net/2021/08/27/7DTkwj6LFPIdxRq.png" alt=""></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>echo $TERM</code> æŸ¥çœ‹åˆ°ç»ˆç«¯çš„æƒ…å†µ</p><p><img src="https://i.loli.net/2021/08/27/oFkeaPMsTdhQJXy.png" alt=""></p><p>å¤§æ¦‚å°±å¯ä»¥çœ‹åˆ°ï¼Œåº”è¯¥æ˜¯å½“å‰çš„ VPS ä¸æ”¯æŒ xterm-kitty</p><p>å¯ä»¥é€šè¿‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stty -a</span><br></pre></td></tr></table></figure><p>è¿›è¡ŒæŸ¥çœ‹æœåŠ¡å™¨æ”¯æŒçš„ç»ˆç«¯é€šä¿¡å‚æ•°</p><p>æˆ‘ä»¬å°è¯•ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stty sane</span><br></pre></td></tr></table></figure><p>å‘½ä»¤ sane æœ€å¸¸å‡ºç°åœ¨å¤§å¤šæ•°ç»ˆç«¯çš„ stty é€‰é¡¹çš„é›†åˆä¸­ã€‚å®ƒå¹¶ä¸æ”¹å˜é€šä¿¡ä¿¡é“çš„é€Ÿç‡ï¼Œä½†å½“ç»ˆç«¯å‘ç”Ÿæ··ä¹±æ—¶ï¼Œé€šå¸¸èƒ½å¤Ÿäº§ç”Ÿæœ‰ç›Šçš„æ•ˆæœã€‚</p><p>ä¸è¿‡å¾ˆå¯æƒœï¼Œæ²¡å•¥æ•ˆæœ</p><p>æœ€ç»ˆç»è¿‡å°è¯•ï¼Œä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> TERM=linux</span><br></pre></td></tr></table></figure><p>æœ‰æ•ˆ</p><div class="note info">            <p>TERM ç¯å¢ƒå˜é‡ç”¨äºç»ˆç«¯å¤„ç†ã€‚å®ƒå…è®¸ DB-Accessï¼ˆåŠå…¶ä»–åŸºäºå­—ç¬¦çš„åº”ç”¨ç¨‹åºï¼‰è¯†åˆ«æ‚¨æ­£åœ¨ä½¿ç”¨çš„ç»ˆç«¯å¹¶ä¸å…¶é€šä¿¡ã€‚</p>          </div><p>å¯ä»¥æ¨æµ‹ï¼Œæˆ‘ä»¬å°†ç»ˆç«¯ç±»å‹è®¾ç½®æˆ VPS è‡ªå·±ï¼Œä»è€Œä½¿å¯¹äº VPS æœ¬èº«æ˜¯æ­£å¸¸çš„</p><p>åæ¥æŸ¥åˆ°</p><div class="note info">            <ul><li><code>putty</code>ï¼Œ<code>konsole</code>ï¼Œ<code>Eterm</code>ï¼Œ<code>rxvt</code>ï¼Œ<code>gnome</code>ç­‰, å¦‚æœä½ æ­£åœ¨è¿è¡Œçš„ XTerm æ¨¡æ‹Ÿå™¨å’Œä¸€äº›åŠŸèƒ½é”®ï¼Œé€€æ ¼é”®ï¼Œåˆ é™¤ï¼ŒHome å’Œ End ä¸èƒ½æ­£å¸¸å·¥ä½œ</li><li><code>linux</code> é€šè¿‡ Linux æ§åˆ¶å°ç™»å½•æ—¶</li><li><code>dumb</code> å½“å…¶ä»–éƒ½ä¸èƒ½ç”¨æ—¶</li></ul>          </div><p>å¯ä»¥é€šè¿‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">toe /usr/share/terminfo</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¯é€‰ä¿¡æ¯</p><p><img src="https://i.loli.net/2021/08/27/QEJsUv8z72SGrbn.png" alt=""></p><p><img src="https://i.loli.net/2021/08/27/zW5tGqPfeVyj3i6.png" alt=""></p>          </div>]]></content>
    
    <summary type="html">
    
      This is the first time that I use my VPS on kitty&lt;br&gt;It goes wrong with my expect&lt;br&gt;Plenty of shortcuts fail such as *Backspace*, *clear*, and so on
    
    </summary>
    
    
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>Applications &amp; Command Line Tools</title>
    <link href="https://augists.top/APPLE/Applications-and-Command-Line-Tools/"/>
    <id>https://augists.top/APPLE/Applications-and-Command-Line-Tools/</id>
    <published>2021-08-20T08:27:19.000Z</published>
    <updated>2021-08-20T10:20:07.659Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>There is the overview of my recommends. ä¸å…¨ï¼Œä½†æ˜¯æ˜¯æˆ‘åœ¨é‡è£…ç³»ç»Ÿä¹‹åç»è¿‡é‡æ–°è€ƒè™‘ä¹‹åä¿ç•™ä¸‹æ¥çš„æ¨è</p><div class="note info">            <center><b>System</b></center><ul><li>Caffeinated: ä¿æŒç³»ç»Ÿå¸¸é‡ä¸ä¼‘çœ çš„å°å·¥å…·</li><li>AppCleaner: è½¯ä»¶æ¸…ç†</li><li>Hidden Bar: Menu Bar éšè—</li><li>IINA: è§†é¢‘æ’­æ”¾å™¨</li><li>Karabiner: ä¿®æ”¹é”®ç›˜æ˜ å°„</li><li>OnlyX: ç³»ç»Ÿåƒåœ¾æ¸…ç†</li><li>Paste: å‰ªè´´æ¿å†å²</li><li>The Unarchiver: è§£å‹</li><li>uPic: å›¾ç‰‡ä¸Šä¼ å›¾åºŠ</li><li>Vimari: safari çš„ vim-like å¿«æ·é”®</li><li>V2rayU: VPN</li><li>rectangle: çª—å£ç®¡ç†å™¨</li><li>yabai: çª—å£ç®¡ç†å™¨</li><li>shkd: å¿«æ·é”®å·¥å…·</li><li>spacebar: Menu Bar å®šåˆ¶</li><li>htop: æ´»åŠ¨ç›‘è§†å™¨</li></ul><center><b>Code</b></center><ul><li>Dash: æŸ¥çœ‹æ–‡æ¡£</li><li>Kitty: ç»ˆç«¯æ¨¡æ‹Ÿå™¨</li><li>Typora: markdown</li><li>Docker: è™šæ‹Ÿå®¹å™¨</li><li>homebrew: åŒ…ç®¡ç†å™¨</li><li>tmux: ç»ˆç«¯å¤ç”¨</li><li>neovim: ç¼–è¾‘å™¨</li><li>fzf: fuzzy file finder</li><li>nnn: æ–‡ä»¶ç®¡ç†å™¨</li><li>autojump: å¿«é€Ÿè·³è½¬</li><li>zsh<ul><li>oh-my-zsh: ç»ˆç«¯ç¾åŒ–</li><li>zsh-autosuggestions: ç»ˆç«¯è¡¥å…¨</li><li>zsh-syntax-highlighting: ç»ˆç«¯é«˜äº®</li></ul></li><li>clang-format: c language formatter</li></ul>          </div><p>ç®€å•è¯´æ˜æ˜¯å•¥ä¹‹åï¼Œå°±å¯ä»¥æŒ‘ä¸»è¦çš„è¯´äº†</p><h2 id="Caffeinated"><a href="#Caffeinated" class="headerlink" title="Caffeinated"></a>Caffeinated</h2><p>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•ï¼Œå›¾æ ‡ä¹Ÿå¥½çœ‹ä¸€ç‚¹çš„ç¦æ­¢ä¼‘çœ å·¥å…·ï¼Œç›´æ¥æ˜¾ç¤ºåœ¨ Menu Bar ä¸Š<br>æ¯”å…¶ä»–åŒç±»è½¯ä»¶æ›´ç®€å•ï¼Œä¸æä¾›ä¸€äº›æœ‰çš„æ²¡çš„å·¥å…·ï¼Œä¸ç»ˆç«¯æŒ‡ä»¤ Caffeinate ç›¸åŒæ•ˆæœ</p><h2 id="AppCleaner-amp-OnlyX-amp-fzf"><a href="#AppCleaner-amp-OnlyX-amp-fzf" class="headerlink" title="AppCleaner &amp; OnlyX &amp; fzf"></a>AppCleaner &amp; OnlyX &amp; fzf</h2><p>å¸è½½è½¯ä»¶å…¶å®ä¸€ç›´éƒ½æ˜¯ä¸€ä»¶å¾ˆå¤´ç–¼çš„äº‹æƒ…ï¼Œå³ä¾¿æœ‰äº†è¿™ä¸¤ä¸ªå·¥å…·<br>é¦–å…ˆï¼Œä¸€å®šä¸æ¨èä»»ä½•æ‰“ç€æ¸…ç†åå¤´çš„è½¯ä»¶ï¼Œå¦‚ CleanMyMacXã€è…¾è®¯æŸ æª¬æ¸…ç†ç­‰<br>AppCleaner åœ¨å¸è½½è½¯ä»¶æ—¶æŸ¥æ‰¾å®ƒåœ¨ç³»ç»Ÿä¸­å­˜å‚¨çš„ä¸€äº›é…ç½®ä¿¡æ¯æ–‡ä»¶ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰éƒ½èƒ½æ‰¾åˆ°<br>å®ƒä¸»è¦æ£€ç´¢ <code>$HOME/Library</code> ä¸‹çš„æ–‡ä»¶ï¼Œä½†æ˜¯å³ä¾¿æ˜¯è¿™æ ·ï¼Œä¹Ÿå¹¶ä¸æ˜¯èƒ½å‘ç°å…¨éƒ¨å¯ä»¥åˆ é™¤çš„åƒåœ¾æ–‡ä»¶<br>è€Œ OnlyX æ˜¯æ›´ä¸ºæ·±åº¦çš„æ¸…ç†ç³»ç»Ÿç¼“å­˜ç­‰åƒåœ¾ï¼Œéœ€è¦å¯¹ä¸€äº›åè¯æœ‰ä¸€å®šäº†è§£<br>ä¼—æ‰€å‘¨çŸ¥ï¼ŒmacOS é‡‡ç”¨äº†æ²™ç›’æœºåˆ¶<br>æˆ‘ç¬¬ä¸€æ¬¡å¯¹æ²™ç›’æœºåˆ¶æ„Ÿæ…¨æ˜¯åœ¨çœ‹äº†é£èšŠè¯çš„<a href="https://www.bilibili.com/video/BV1WA411V7r8">åˆ†æè§†é¢‘</a><br>å³ä¾¿æœ‰è¿™æ ·ä¼˜ç§€çš„æ€æƒ³ï¼Œä¹Ÿä¸èƒ½é˜²æ­¢è½¯ä»¶å¿½æ‚ ä½ è·å–æƒé™ç„¶åæŠŠæ–‡ä»¶æ”¾åœ¨ä¸è¯¥æ”¾çš„åœ°æ–¹<br>æ‰€ä»¥æˆ‘ä¸€èˆ¬ä¼šåœ¨åˆ é™¤å®Œè½¯ä»¶æˆ–è€…æˆ‘æƒ³è¦æ¸…ç†ç³»ç»Ÿåƒåœ¾çš„æ—¶å€™æ‰‹åŠ¨å»ä¸¤ä¸ª Library é‡Œçœ‹çœ‹<br>å¿ƒæƒ…å¥½å°±å»æ ¹ç›®å½•ç”¨ fzf å¼€ä¸ªå…¨ç›˜æ‰«æï¼Œç»å¸¸ä¼šå‘ç°å‡ ä¸ªæ¼ç½‘ä¹‹é±¼<br>ä¸¾ä¸ªä¾‹å­ï¼Œå‰å‡ å¤©ä¸‹è½½äº† Parallel Desktop è¯•ç”¨äº†å‡ ä¸‹ï¼Œä¸€çœ‹ç©ºé—´ï¼Œå¥½å®¶ä¼™ï¼Œå äº†æˆ‘ 50G çš„ç©ºé—´<br>åœ¨ AppCleaner æ‰¾å®Œä¸€éƒ¨åˆ†ï¼Œæ‰‹åŠ¨å» Library é‡Œåˆ äº†ä¸€äº›ä¹‹åï¼Œæˆ‘åˆå»æ ¹ç›®å½•ç”¨ fzf æ‰«äº†ä¸€ä¸‹ï¼Œæœç„¶å‘ç°åœ¨ <code>/etc</code> å’Œ <code>/var</code> ä¸‹éƒ½è¿˜æœ‰é…ç½®æ–‡ä»¶</p><h2 id="Karabiner"><a href="#Karabiner" class="headerlink" title="Karabiner"></a>Karabiner</h2><p>è¿™ä¸ªæ˜¯åœ¨é”®ç›˜ä¸ç³»ç»Ÿä¹‹é—´è™šæ‹Ÿå‡ºä¸€å±‚æ¥ï¼Œå¯¹é”®ç›˜çš„é”®ä½æ˜ å°„è¿›è¡Œä¿®æ”¹<br>ç”±äºæˆ‘ç°åœ¨å¼€å§‹ç”¨ HHKBï¼Œä¸€äº›é”®ä½æˆ‘å°±éœ€è¦é‡æ–°æ”¹ä¸€ä¸‹ï¼ˆæœ€ä¸»è¦è¿˜æ˜¯å› ä¸º QQ<br>æˆ‘çš„ Karabiner é…ç½®æ–‡ä»¶å·²ç»æ”¾åœ¨ GitHub ä¸Šçš„ dotfiles é‡Œäº†<br>é€šè¿‡ json æ–‡ä»¶ç®€å•ä¿®æ”¹å°±å¯ä»¥ç”¨äº†</p><h2 id="uPic"><a href="#uPic" class="headerlink" title="uPic"></a>uPic</h2><p>uPic çš„ä½œè€…æŒºå¥½ç©çš„ï¼Œä¹‹å‰åŠ äº† tg ç¾¤ï¼Œæ­£å¥½ç¢°åˆ°ä»–è¯´è¦ä¸Šæ¶ app storeäº†<br>app store é‡Œçš„ç‰ˆæœ¬æ˜¯æ”¶è´¹çš„ï¼ŒåŒæ—¶å› ä¸ºè½¯ä»¶å¼€æºï¼Œå…è´¹ç‰ˆå¯ä»¥ç›´æ¥ä» GitHub ä¸Šä¸‹è½½</p><h2 id="yabai-amp-shkd-amp-spacebar"><a href="#yabai-amp-shkd-amp-spacebar" class="headerlink" title="yabai &amp; shkd &amp; spacebar"></a>yabai &amp; shkd &amp; spacebar</h2><p>æœ€è¿‘æ–°æ¢çš„çª—å£ç®¡ç†å™¨ï¼Œé…ç½®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå®ç°æ•ˆæœå°±å’Œ Linux ä¸‹çš„å¦‚ dwmã€i3 ç­‰ç±»ä¼¼<br>ç»è¿‡ä¸€ç•ªæ“ä½œï¼Œæˆ‘çš„ mac å®ƒæ›´åƒ Linux äº†<br>ä½†æ˜¯ yabai éœ€è¦å…³é—­ SIP<br>ä¸æ¨èäº†è§£ä¸å¤Ÿæ·±å…¥çš„å…³é—­ SIP</p><h2 id="Kitty"><a href="#Kitty" class="headerlink" title="Kitty"></a>Kitty</h2><p>Kitty æ˜¯ä¸€ä¸ªæ›´ç¬¦åˆ Unix å“²å­¦çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ŒåŸºäº GPUï¼Œæ›´å¿«é€Ÿ<br>æˆ‘ç”¨ Kitty æ›¿æ¢äº† iTerm2ï¼Œä¸»è¦æ˜¯ iTerm2 å¤ªè¿‡äºåºæ‚ï¼Œæä¾›çš„åŠŸèƒ½åŸºæœ¬éƒ½ç”¨ä¸ä¸Š<br>è€Œ Kitty åªéœ€è¦ä¿®æ”¹å®ƒçš„é…ç½®æ–‡ä»¶å°±å¯ä»¥å•¦ <code>~/.config/kitty/kitty.conf</code><br>åœ¨æ¢ç”¨ Kitty ä¹‹åï¼Œæˆ‘æŠŠæˆ‘çš„é…ç½®æ–‡ä»¶é‡æ–°æ•´ç†äº†ä¸€éï¼ŒæŒ‰ç…§æ¨¡å—è¿›è¡ŒåŠ è½½</p><h2 id="nnn"><a href="#nnn" class="headerlink" title="nnn"></a>nnn</h2><p>nnn æˆ‘ç”¨æ¥æ›¿æ¢äº† ranger<br>å…¶å®è®ºå®ç”¨ï¼Œranger æ›´å¥½ç”¨ä¸€ç‚¹ï¼Œä½†æ˜¯åœ¨æˆ‘ç”µè„‘ä¸Šï¼Œä¸€æ—¦å¼€å¯äº†ä¸€äº›åŠŸèƒ½å°±ä¼šå˜å¡<br>å¦‚æœæ‰“å¼€äº† gitï¼Œç›´æ¥å°±å¡åˆ°æ€€ç–‘äººç”Ÿ<br>æˆ‘ä¹‹å‰çš„ ranger ç»å¸¸åœ¨é¢„è§ˆä¸Šå¡ä½ã€‚ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯é¢„è§ˆå¤§æ–‡ä»¶ä¼šå¡ï¼Œåæ¥å‘ç°å•¥éƒ½å¯èƒ½å¡<br>ranger çš„å¥½å¤„æ˜¯å®ƒå¯ä»¥ç›´æ¥è°ƒç”¨ iTerm2 åœ¨ç»ˆç«¯æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ<br>è€Œ nnn è™½ç„¶ä¹Ÿé‡‡ç”¨ vim-like å¿«æ·é”®ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰äº†ä¸‰æ çš„è®¾è®¡ï¼Œæ“ä½œä¹Ÿéƒ½å°½å¯èƒ½çš„ç”¨ä¸€ä¸ªé”®å®Œæˆ<br>æ€»çš„æ¥è¯´ï¼Œåº”è¯¥ç®—æ˜¯ ranger çš„ä¸‹ä½æ›¿ä»£å§<br>å¦å¤–æœ‰ä¸€ç‚¹ï¼Œå¦‚æœæƒ³è®© nnn æ˜¾ç¤ºå›¾æ ‡ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨ç¼–è¯‘ï¼Œä¿®æ”¹ç¼–è¯‘å‚æ•°ï¼Œè¿™åœ¨æ— å½¢ä¸­æé«˜äº†é—¨æ§›</p><h2 id="neovim"><a href="#neovim" class="headerlink" title="neovim"></a>neovim</h2><p>vim ä½œä¸ºæˆ‘ä¸€ç›´åœ¨ä½¿ç”¨çš„ç¼–è¾‘å™¨ï¼Œä¸€ç›´å°±ä»…é™äºæƒ³è¦çš„é‚£ä¸€éƒ¨åˆ†å°±å†æ²¡å¾€ä¸‹æ¢ç´¢æ–°çš„ä¸œè¥¿äº†<br>é‡è£…ç³»ç»Ÿä¹‹å‰æ”¹ç”¨ neovim é‡æ–°è¿›è¡Œäº†é…ç½®ï¼Œæ–°çš„ neovim é…ç½®åŸºäº cocï¼Œå¹¶ä¸”ç»ˆäºæˆ‘å¼€å§‹ç”¨æç¤ºäº†<br>LSP è®©å®ƒçš„é…ç½®å˜å¾—éå¸¸å¥½ç”¨<br>æœ€è¿‘ä¹Ÿåœ¨æƒ³æ”¹ç”¨ lua é‡å†™é…ç½®ï¼Œæ”¾å¼ƒ cocï¼Œç›´æ¥è½¬ç”¨æ–°é…ç½®<br>ç›®å‰åªæ˜¯å­¦ä¼šäº† luaï¼Œè¿˜æ²¡æœ‰æ¢æ–° <em>init.lua</em> çš„åŠ¨åŠ›</p><h2 id="autojump"><a href="#autojump" class="headerlink" title="autojump"></a>autojump</h2><p>autojump ç®—æ˜¯æ¯”è¾ƒæ¨èçš„ä¸€ä¸ªç»ˆç«¯å·¥å…·ï¼Œå®ƒå¯ä»¥è®°ä½æˆ‘çš„ <code>cd</code> è·¯å¾„ï¼Œå¹¶åœ¨åé¢ç›´æ¥ <code>j</code> è¿‡å»<br>åœ¨ä» ranger æ”¹ç”¨ nnn ä¹‹åæˆ‘æŠŠ autojump å¸è½½äº†ï¼Œä½†æ˜¯æœ€è¿‘åˆé‡æ–°å®‰è£…å›æ¥äº†<br>æˆ‘ä¸€ç›´æŠŠå®ƒä½œä¸ºæ–‡ä»¶ç®¡ç†å™¨çš„è¾…åŠ©ï¼Œæ¯”å¦‚è¦å†™åšå®¢çš„æ—¶å€™ <code>j augists</code> å°±ä¼šè·³åˆ°åšå®¢ç›®å½•</p><hr><div class="note info">            <p>æœ€è¿‘çš„æœ€åä¸€æ¬¡å¤§æ”¹æ˜¯å› ä¸ºåœ¨å­¦ä¹  python<br>åœ¨ macOS é‡Œï¼Œç³»ç»Ÿè‡ªå¸¦äº† python2.7<br>å¦‚æœä½ ä½¿ç”¨ <code>xcode-select --install</code> å®‰è£…äº† Command Line Tools<br>å®ƒå°±ä¼šç»™ä½ å®‰è£…ä¸Š python3ï¼ˆç›®å‰æ˜¯ python3.8)<br>ä½†æ˜¯å› ä¸ºè·¯å¾„å’Œæƒé™çš„åŸå› ç»å¸¸ä¼šå‡ºç°ä¸€äº›é—®é¢˜<br>æ‰€ä»¥æˆ‘ç°åœ¨ç”µè„‘ä¸ŠåŒæ—¶å­˜åœ¨äº† 3 ä¸ª python</p><ul><li>ç³»ç»Ÿè‡ªå¸¦çš„ python2</li><li>Command Line Tools å®‰è£…çš„ python3.8</li><li>homebrew å®‰è£…çš„ python3.9</li></ul><p>2 ä¸ºç³»ç»Ÿæä¾›æœåŠ¡<br>3.8 ä¸º neovim æœåŠ¡ï¼Œåœ¨ <code>$PATH</code> ä¸­å­˜æ”¾åœ¨åé¢<br>3.9 æ˜¯æˆ‘å¹³å¸¸ç”¨çš„ï¼Œå› ä¸º homebrew å¾ˆé¸¡è´¼çš„è®©å®‰è£…çš„è·¯å¾„æ˜¯ç¯å¢ƒå˜é‡çš„ç¬¬ä¸€ä¸ª</p>          </div>          </div>]]></content>
    
    <summary type="html">
    
      !!!NOW!!! These applications and command line tools are on my mac&lt;br&gt;which I strongly recommend
    
    </summary>
    
    
    
      <category term="APPLE" scheme="https://augists.top/tags/APPLE/"/>
    
      <category term="MAC" scheme="https://augists.top/tags/MAC/"/>
    
      <category term="TERMINAL" scheme="https://augists.top/tags/TERMINAL/"/>
    
  </entry>
  
  <entry>
    <title>Reinstall macOS</title>
    <link href="https://augists.top/APPLE/Reinstall-macOS/"/>
    <id>https://augists.top/APPLE/Reinstall-macOS/</id>
    <published>2021-08-13T04:25:54.000Z</published>
    <updated>2021-08-14T10:46:09.596Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>èŠ±äº†ä¸€å¤©å¤šçš„æ—¶é—´ï¼ŒæŠŠ mac æŠ¹ç›˜é‡è£…äº†ï¼Œæ”¶è·äº†ä¸€ä¸ªå…¨æ–°çš„ mac</p><p>ä¹‹å‰ä½¿ç”¨çš„æ˜¯ macOS 12 public beta 4ã€‚æœ¬èº«ä½¿ç”¨å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œé—®é¢˜å‡ºåœ¨äº†è½¯ä»¶çš„å…¼å®¹æ€§ä¸Šã€‚å¾ˆå¤šè½¯ä»¶å¦‚ <em>OnlyX</em> éƒ½æ— æ³•åœ¨æ–°ç³»ç»Ÿé‡Œæ­£å¸¸æ‰“å¼€è¿è¡Œï¼ˆè¿™é‡Œè¿˜æ˜¯å†ç‚¹ä¸€ä¸‹ <em>OnlyX</em>ï¼Œæ¯ä¸ªç³»ç»Ÿç‰ˆæœ¬å‡ºä¸€ä¸ªè½¯ä»¶ç‰ˆæœ¬ï¼Œå¯¼è‡´å…¼å®¹æ€§éå¸¸å·®ã€‚ä½†æ˜¯ä¹Ÿä¸æ˜¯è¯´è¿™æ ·åšä¸å¥½ï¼Œåªæ˜¯æˆ‘è§‰å¾—åº”è¯¥åˆä¸€ä¸ªæ›´é²œæ˜çš„æç¤ºï¼Œå½“æ£€æµ‹ä¸ºæ›´æ–°çš„ç³»ç»Ÿç‰ˆæœ¬æ—¶æç¤ºä¸€ä¸‹ï¼‰</p><p>å¯¼è‡´æˆ‘é‡è£…ç³»ç»Ÿçš„ç›´æ¥åŸå› æ˜¯ä¸‹è½½äº† <em>CrossOver</em>ï¼Œæˆ‘ä¸è®°å¾—å®ƒæœ‰è¦æˆ‘çš„ç³»ç»Ÿæƒé™ï¼Œä½†æ˜¯å®ƒç›´æ¥ä¿®æ”¹äº†ç³»ç»Ÿé»˜è®¤æ˜¾ç¤º <code>.exe</code> æ–‡ä»¶çš„å›¾æ ‡ï¼Œè€Œæˆ‘æ¯”è¾ƒèœï¼ˆlanï¼‰ã€‚æƒè¡¡äº†ä¸€ä¸‹å•Šï¼Œå¹²è„†ç›´æ¥æŠ¹ç›˜é‡è£…ä¸€æ¬¡ç³»ç»Ÿ</p><hr><p>åœ¨è¿™æ¬¡é‡è£…è¿‡ç¨‹ä¸­ä¹Ÿå‘ç°äº†å¾ˆå¤šå¥½ç©çš„äº‹æƒ…ï¼Œä¹Ÿå¯¹å¾ˆå¤šä¸œè¥¿æœ‰äº†æ–°çš„ç†è§£ã€‚æ¯”å¦‚ï¼š</p><ul><li>åˆ‡æ¢è¾“å…¥æ³•çš„å¿«æ·é”®åº”è¯¥è®¾ç½®ç»™ <em>select the previous input source*ï¼Œè€Œä¸æ˜¯ *select next input source</em></li><li><em>screen saver</em> æ–‡ä»¶ä¸€èˆ¬ä¸º <code>.saver</code> æ–‡ä»¶ï¼Œè€Œ <em>fliqlo</em> æ˜¯ <code>dmg</code> å®‰è£…å™¨</li><li>ç”±äºæ›´æ¢äº† <code>neovim</code>ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½å’Œä»¥å‰ä¸å¤ªä¸€æ ·ï¼ŒåŒæ—¶ <code>vim</code> ä½œä¸ºè¢«æˆ‘æŠ›å¼ƒæ‰çš„è¢«æ›¿ä»£å“ï¼Œæ²¡æœ‰å†ä½¿ç”¨ä»»ä½•æ’ä»¶ï¼Œå½“ä½œä¸€ä¸ªå•çº¯çš„ç¼–è¾‘å™¨æ¥ä½¿ç”¨äº†</li><li>å¯¹ç”µè„‘çš„å®¹é‡éå¸¸è¯§å¼‚ã€‚æœ¬æ¥ä»¥ä¸ºä¼šæ¸…ç†å‡ºéå¸¸å¤šçš„ä¸œè¥¿ï¼Œèƒ½è®© 256G çš„å®¹é‡å‰©å‡ºå¾ˆå¤šï¼Œä½†æ˜¯ç°åœ¨çœ‹å…¶å®å’Œä¹‹å‰å·®åˆ«ä¸å¤§ï¼Œåªæ˜¯å°‘è£…äº†å¾ˆå¤šè½¯ä»¶ï¼Œå¤§æ¦‚èŠ‚çœäº† 20G çš„ç©ºé—´ï¼Œç”šè‡³ <em>Chrome</em> æˆ‘éƒ½è¿˜æ²¡æœ‰å®‰è£…ï¼ˆä¹Ÿæ˜¯åœ¨å°è¯•ä¸€ä¸ªå• <em>Safari</em> èƒ½å¦æ‰¿æ‹…é‡ä»»ï¼Œå°¤å…¶æ˜¯åœ¨ä¸‹ä¸ªç‰ˆæœ¬ä¸­å°†è¦åŠ å› <em>Group Tab</em>ï¼Œè¿™ä¸ªåœ¨æµ‹è¯•ç‰ˆä¸­æˆ‘çˆ±ä¸é‡Šæ‰‹çš„åŠŸèƒ½</li><li>åœ¨æŠ¹ç›˜ä¹‹åï¼Œå¯ä»¥å°† Data å’Œ æ•°æ® ä¸¤ä¸ªç›˜ç›´æ¥åˆ æ‰ï¼Œåªä¿ç•™ <em>Macintosh HD</em> å°±å¯ä»¥ï¼Œä¹‹å‰è¢«è¿™ä¸ªå¥‡æ€ªçš„ä¿æŠ¤æœºåˆ¶çƒ¦äº†å¾ˆä¹…</li><li>mac å¯åŠ¨å™¨ä¸‹è½½å®Œæˆä¹‹åæ‰“å¼€å°±ä¼šæŠ¥é”™ï¼Œä½†æ˜¯äº‹å®ä¸Šæ˜¯æ­£å¸¸çš„ï¼Œè¿™ä¸€ç‚¹åœ¨ç½‘ä¸ŠæŸ¥é˜…çš„æ—¶å€™éƒ½æ²¡æœ‰æŒ‡å‡ºæ¥ã€‚ä½¿ç”¨å®˜æ–¹çš„åˆ¶ä½œå¯åŠ¨å™¨çš„æŒ‡ä»¤ä¹‹åæŠ¥é”™äº†ä¸€æ¬¡ï¼Œæœ‰ç‚¹è«åå…¶å¦™ï¼Œç¬¬äºŒæ¬¡å°±å¥½äº†</li><li>mac åœ¨ä½¿ç”¨åˆ¶ä½œå¥½çš„å¤–ç½®ç£ç›˜å¯åŠ¨å™¨è¿›è¡Œå®‰è£…æ—¶ï¼Œä»ç„¶éœ€è¦å…³é—­ä¸€äº›å®‰å…¨æ€§è®¾ç½®ï¼ˆç”±äº T2 èŠ¯ç‰‡çš„ç¼˜æ•…ï¼‰ã€‚æˆ‘ç›®å‰æ²¡æœ‰æŠŠè¿™äº›å®‰å…¨æ€§è®¾ç½®ä¿®æ”¹å›æ¥ï¼Œä½†æ˜¯æˆ‘ç°åœ¨ä¹Ÿä¸æ˜¯å¾ˆæƒ³æŠ˜è…¾ <em>yabai</em></li></ul>          </div>]]></content>
    
    <summary type="html">
    
      Spend A day for reinstalling my macOS&lt;br&gt;Downgrade the system from the beta version to official version Big Sur
    
    </summary>
    
    
    
      <category term="APPLE" scheme="https://augists.top/tags/APPLE/"/>
    
      <category term="MAC" scheme="https://augists.top/tags/MAC/"/>
    
  </entry>
  
  <entry>
    <title>A Comfortable Way for Coding</title>
    <link href="https://augists.top/SELF/SHARING/STUDY/A-better-way-for-coding/"/>
    <id>https://augists.top/SELF/SHARING/STUDY/A-better-way-for-coding/</id>
    <published>2021-08-08T01:44:25.000Z</published>
    <updated>2021-11-08T15:09:16.093Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>è¿™å‡ å¤©ä¸€ç›´åœ¨å°è¯•ä»å¤´é‡æ–°é…ç½®ä¸€ä¸ªæ›´é€‚åˆæˆ‘ä½¿ç”¨çš„ coding platformï¼Œç”¨è¿™ç¯‡åšå®¢ç®€å•è®°å½•ä¸€ä¸‹æˆ‘çš„é…ç½®è¿‡ç¨‹<br>æ˜¯æ¢ç´¢ï¼Œä¹Ÿæ˜¯ä»ä¸Šä¸€ä¸ªèˆ’é€‚åŒºé‡Œèµ°å‡ºæ¥ï¼Œåˆ’å®šä¸€ä¸ªæ›´å¤§èŒƒå›´çš„èˆ’é€‚åŒº</p><div class="note info">            <p>æˆ‘ä¸€ç›´ä½¿ç”¨ç»ˆç«¯ä½œä¸ºæˆ‘çš„ coding platformï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°†åŸºæœ¬å›´ç»•ç»ˆç«¯å±•å¼€</p>          </div><hr><h2 id="iTerm2"><a href="#iTerm2" class="headerlink" title="iTerm2"></a>iTerm2</h2><p>æ—¢ç„¶æ˜¯è¦èµ°å‡ºèˆ’é€‚åŒºï¼Œé‚£è‚¯å®šå°±è¦å¤§èƒ†å°è¯•ä¸€ä¸‹æ–°ä¸œè¥¿ã€‚<a href="https://iterm2.com">iTerm2</a> ä¸€ç›´æ˜¯æˆ‘ä¸çŸ¥é“éœ€ä¸éœ€è¦å°è¯•çš„ä¸€ä¸ªæ–°ç©æ„ã€‚ä¸€ç›´ä»¥æ¥çœ‹æ‰€æœ‰çš„ mac è£…æœºæ¨èæ–‡ç« æˆ–è§†é¢‘é‡Œå¾ˆå¤šéƒ½ä¼šå‘Šè¯‰ä½ ï¼Œå½“ä½ æ‹¿åˆ°ä¸€ä¸ªæ–° mac çš„æ—¶å€™ï¼Œè¦å…ˆä¸‹è½½ iTerm2ï¼Œç„¶åå®‰è£… <code>oh-my-zsh</code>ã€‚è¿™å°±å’Œè®©è£… Alfred ä¸€æ ·ï¼Œå®Œå…¨ä¸çŸ¥é“å®ƒå¥½åœ¨å“ªï¼Œä½†æ˜¯å°±æ˜¯æ‰€æœ‰äººéƒ½æ¨èè£…</p><p>ç›®å‰å°±åœ¨ä½¿ç”¨ iTerm2ã€‚å°½ç®¡åœ¨æ¢ç”¨ iTerm2 ä¹‹åæˆ‘ä»ç„¶æ²¡æœ‰å¾ˆæ˜æ˜¾çš„æ„ŸçŸ¥å®ƒæœ‰å¤šå°‘ç‰¹åˆ«çš„åŠŸèƒ½å¹¶æå‡äº†æˆ‘çš„ç»ˆç«¯ä½¿ç”¨ä½“éªŒï¼Œä½†æ˜¯é€šè¿‡è®¾ç½®è®©å®ƒå˜å¾—æ¯”åŸç”Ÿ Terminal<br>æ›´å¥½çœ‹äº†æ˜¯çœŸçš„ã€‚æˆ‘å–æ¶ˆäº†é¡¶éƒ¨çš„ title barï¼Œå¹¶ä¸”æ·»åŠ äº†å½©è™¹ ğŸŒˆ è‰²å°ç»„ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ç°åœ¨æ”¹ç”¨ iTerm2 çš„ä¸»è¦åŸå› äº†</p><p><img src="https://i.loli.net/2021/08/08/6ngbcAlLQBmtUrx.png" alt="iTerm2"></p><p>å½“ç„¶ï¼Œæ¯ä¸ªä¸œè¥¿è‚¯å®šæœ‰å¥½æœ‰ä¸å¥½ã€‚iTerm2 æœ€è®©æˆ‘æ— æ³•å¿å—çš„æ˜¯æ¯æ¬¡ç²˜è´´éƒ½ä¼šåˆ·æ–°å±å¹•ï¼Œå°±ä¸€ä¸ªéå¸¸æ˜æ˜¾çš„é—ªå±ã€‚è™½ç„¶å¯ä»¥ç†è§£ï¼Œä½†æ˜¯å¯¹å®ƒçš„å¥½æ„Ÿåº¦å¤§æ‰“æŠ˜æ‰£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹‹å‰è¯´çš„æ‰“å¼€ vim å†é€€å‡ºæ—¶ç»ˆç«¯ä¼šè‡ªåŠ¨å˜åˆ°æœ€åä¸€è¡Œçš„é—®é¢˜åœ¨æ”¹ç”¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¹‹åå¹¶æ²¡æœ‰è§£å†³ï¼Œåè€Œæ˜¯æ¢æˆ neovim ä¹‹åè§£å†³æ‰äº†</p><h2 id="neovim"><a href="#neovim" class="headerlink" title="neovim"></a>neovim</h2><p>ç›¸æ¯” iTerm2ï¼Œ<a href="https://neovim.io">neovim</a> å¸¦ç»™æˆ‘çš„ä½“éªŒæå‡å°±éå¸¸å¤§äº†ï¼Œç”šè‡³å¯ä»¥è¯´æ˜¯é£è·ƒã€‚Neovim ç›¸æ¯”äº vimï¼Œè¿›è¡Œäº†éå¸¸å¤šä½“éªŒä¸Šçš„ä¼˜åŒ–ï¼Œæ¯”å¦‚ä¾¿æ·çš„æ·»åŠ å¦‚ python æ”¯æŒï¼Œé€šè¿‡å‘½ä»¤ç›´æ¥æŸ¥çœ‹ provider çš„çŠ¶æ€ç­‰ç­‰ã€‚åŒæ—¶ neovim ä¸‹ä¹Ÿæä¾›äº†ä¸€äº›æ’ä»¶çš„æ”¯æŒï¼Œæä¾›äº†æ–°çš„ apiã€‚ç°åœ¨æˆ‘ç”šè‡³å¯ä»¥ä¸ç”¨åˆ†å±å°±èƒ½æ‰“å¼€ç»ˆç«¯æˆ–è€… fzf äº†</p><p><img src="https://i.loli.net/2021/08/08/wYOWZb7krNFag5q.png" alt="fzf"></p><h2 id="coc-nvim"><a href="#coc-nvim" class="headerlink" title="coc.nvim"></a>coc.nvim</h2><p>æ›´æ¢äº† neovim ä¹‹åï¼Œæˆ‘ä¹Ÿå¯¹æˆ‘çš„ <a href="https://github.com/Augists/ZDCZ-vimrc">vimrc</a> è¿›è¡Œäº†é‡å†™ã€‚æ–°çš„ <code>init.vim</code> æ”¹ä¸ºåŸºäºèµµå¯æ˜å¤§ä½¬çš„ <a href="https://github.com/neoclide/coc.nvim">coc.nvim</a> è¿›è¡Œé…ç½®ï¼Œå°½å¯èƒ½å¤šçš„ä½¿ç”¨ LSP æ’ä»¶ä½“ç³»</p><p>åœ¨ä»¥å‰æˆ‘è®¤ä¸ºï¼Œåˆšå­¦ä¹ æ•²ä»£ç ï¼Œå°±åº”è¯¥å»æ‰ä»£ç æç¤ºï¼Œåƒåœ¨è®°äº‹æœ¬å†™ä»£ç ä¸€æ ·å‡å°‘æœºå™¨è¾…åŠ©ã€‚ç°åœ¨æˆ‘å·²ç»åˆ°äº†æ—¥å¸¸éœ€è¦æŸ¥æ–‡æ¡£æ‰èƒ½å†™ä»£ç çš„æ—¶å€™äº†ï¼ˆå…¶å®å°±æ˜¯ä¸ä¼šå†™äº†ï¼‰ï¼Œå°½ç®¡è£…äº† Dash ä½†æ˜¯ä»æ¥ä¸ç”¨â€¦â€¦Code Completion &amp; Document æ˜¾å¾—éå¸¸é‡è¦äº†ã€‚æˆ‘å±ˆæœäº†</p><h2 id="glow"><a href="#glow" class="headerlink" title="glow"></a>glow</h2><p><code>glow</code> æ˜¯ä¸€ä¸ªä¼¼ä¹ä¸æ˜¯å¾ˆè½»é‡çš„ markdown ç»ˆç«¯æ¸²æŸ“ç¨‹åº<br>å¾ˆæ˜æ˜¾æˆ‘å¹¶ä¸ä¼šå»ä½¿ç”¨å®ƒï¼Œæˆ‘å·²ç»æœ‰å¤ªå¤šçš„ markdown æ¸²æŸ“äº†ï¼Œä½†æ˜¯è¿™ä¸å¦¨ç¢æˆ‘æŠŠå®ƒæ”¾åœ¨æ¨èåˆ—è¡¨ï¼Œå› ä¸ºç¡®å®å¾ˆå¥½çœ‹</p><h2 id="brew-rmtree"><a href="#brew-rmtree" class="headerlink" title="brew rmtree"></a>brew rmtree</h2><p><code>homebrew</code> çš„ <code>formula &amp; cask</code> çš„å¸è½½ä¸€ç›´æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºå®ƒæ²¡æœ‰åƒ <code>apt</code> é‚£æ ·çš„ <code>autoremove</code> æ¥è‡ªåŠ¨æ¸…ç†ä¸éœ€è¦çš„ä¾èµ–ã€‚åæœå°±æ˜¯æˆ‘åœ¨ä»¥å‰ä½¿ç”¨çš„æ—¶å€™æ¯æ¬¡å®‰è£…è½¯ä»¶éƒ½ä¼šæŠŠç»ˆç«¯çš„å†…å®¹æ‰“å°åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œè¿›è¡Œå­˜å‚¨ï¼Œç„¶ååœ¨å¸è½½çš„æ—¶å€™å¯¹ç…§ç€ä¸€ä¸ªä¸€ä¸ªåˆ æ‰</p><p><code>retree</code> æ˜¯ä¸€ä¸ªè¾…åŠ©æ¸…ç†ä¸éœ€è¦çš„ä¾èµ–çš„å·¥å…·ï¼Œä½†æ˜¯åœ¨æˆ‘çš„ä½¿ç”¨ä¸­å®ƒä¼¼ä¹å¯¹æ–°ç³»ç»Ÿçš„å…¼å®¹æ€§æœ‰å¾…æå‡ï¼Œå°±åƒæˆ‘æ¯æ¬¡ä½¿ç”¨ <code>homebrew</code> éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªæ–°ç³»ç»Ÿçš„è­¦å‘Šä¸€æ ·çƒ¦äºº</p><blockquote><p>æˆ‘åœ¨å°è¯• <code>pip-autoremove</code> çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†æ›´åŠ æ¶å¿ƒçš„é—®é¢˜ã€‚ç®€å•æ¥è¯´å°±æ˜¯ mac ç³»ç»Ÿä¸­çš„ python å¤ªå¤šå¤ªä¹±å¯¼è‡´çš„ï¼Œè¿™å¯¼è‡´æˆ‘ç›´æ¥æ”¾å¼ƒäº†å¯¹ <code>pip-autoremove</code> çš„ç ”ç©¶</p></blockquote>          </div>]]></content>
    
    <summary type="html">
    
      After &lt;i&gt;remake&lt;/i&gt; my coding tools, I find my comfortable zone
    
    </summary>
    
    
    
      <category term="CODE" scheme="https://augists.top/tags/CODE/"/>
    
      <category term="SHARING" scheme="https://augists.top/tags/SHARING/"/>
    
  </entry>
  
  <entry>
    <title>Command Ps | Grep Then Find Itself</title>
    <link href="https://augists.top/SELF/ERROR/Command-ps-grep-then-find-itself/"/>
    <id>https://augists.top/SELF/ERROR/Command-ps-grep-then-find-itself/</id>
    <published>2021-07-24T16:50:07.000Z</published>
    <updated>2021-11-08T15:11:39.231Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning">            <p>åˆ†äº«ä»Šæ—¥ä»½è ¢äº‹</p><p>äº‹æƒ…è¦ä»ä¸‹è½½å­¦æ ¡çš„ VPN å®¢æˆ·ç«¯å¼€å§‹è¯´èµ· â€¦</p><hr><p>å­¦æ ¡çš„ VPN å®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯ GlobalProtectï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªæä¾›æˆç†Ÿçš„ VPN æœåŠ¡çš„è½¯ä»¶ï¼Œå¯ä»¥è‡ªå·±æ ¹æ®éœ€æ±‚å®šåˆ¶ã€‚è¿™ä¸ªè½¯ä»¶æœ‰ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„åœ°æ–¹ï¼Œå®ƒè‡ªåŠ¨è®¾ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨ï¼Œè€Œä¸”è¿›ç¨‹ä¸å…è®¸å…³é—­<br>è¦çŸ¥é“ï¼Œå½“ä½ æ‰“å¼€å®ƒä¹‹åï¼Œä½ ä¼šå‘ç°å®ƒè¿ä¸ª quit éƒ½æ²¡æœ‰<br>æˆ‘ä¹Ÿå°è¯•è¿‡åœ¨ä»»åŠ¡ç®¡ç†å™¨é‡Œç»ˆæ­¢ï¼Œæˆ–æ˜¯ç›´æ¥ <code>kill</code> æ‰å®ƒï¼Œä½†éƒ½ä¼šå‘ç°æ¯æ¬¡å®ƒéƒ½ä¼šç«‹åˆ»é‡å¯å¹¶å¼€å§‹å°è¯•è¿æ¥ã€‚æ€»ä¹‹è®©äººçœ‹çš„éå¸¸æƒ³å¸è½½<br>é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒä¸€ç›´åœ¨ä¸æ–­çš„å¼¹çª—è®©æˆ‘åŒæ„å®ƒç›‘æ§æˆ‘çš„æ‰€æœ‰ç½‘ç»œæ´»åŠ¨â€¦å½“æ—¶æˆ‘å°±æ¥æ°”ã€‚æˆ‘çœ‹çš„ä¸œè¥¿æ˜¯ä½ ä¸èŠ±é’±èƒ½è·Ÿç€çœ‹çš„ï¼Ÿ<br>æ‰€ä»¥ï¼Œåœ¨å‘ç°å®ƒå¹¶ä¸èƒ½å¸®åŠ©æˆ‘ç™»å½• IEEE ä¹‹åï¼Œæˆ‘æ¯…ç„¶å†³ç„¶çš„å‡†å¤‡å¸è½½æ‰å®ƒ ğŸ˜’</p><p><img src="https://i.loli.net/2021/07/25/GCTESI5Fo4NAPat.jpg" alt=""></p><hr><p>åœ¨æˆ‘ä½¿ç”¨å®ƒæä¾›çš„ pkg é‡Œå¸è½½æ—¶ï¼Œå®ƒå°±è«åå…¶å¦™çš„å¡ä½äº†ã€‚äºæ˜¯æˆ‘ç›´æ¥å¼ºåˆ¶å…³é—­äº† installerï¼ˆå¯¹ï¼Œå®ƒçš„å¸è½½æ˜¯åœ¨å®‰è£…å™¨é‡Œçš„ï¼‰ï¼Œç„¶åå‡†å¤‡é‡æ–°å¸è½½</p><p><img src="https://i.loli.net/2021/07/25/RdigjZxuhy1I4An.jpg" alt=""></p><p>è¿™æ—¶å€™å°±å‘ç°ï¼Œç¬¬äºŒä¸ª installer ä¼šç­‰å¾…ç¬¬ä¸€ä¸ªè¿è¡Œå®Œï¼Œè€Œç¬¬ä¸€ä¸ªå°½ç®¡è¢«æˆ‘å¼ºåˆ¶é€€å‡ºäº†ï¼Œä¸è¿‡å¾ˆæ˜æ˜¾å®ƒå¹¶æ²¡æœ‰â€œå®è´¨æ€§â€çš„é€€å‡º installer<br>å®ƒå°±è¿™ä¹ˆè«åå…¶å¦™çš„é”ä½äº†ï¼ï¼ï¼<br>å½“æ—¶æˆ‘å°±æœ‰ç‚¹æ‡µï¼Œå°½ç®¡è¿™å¯èƒ½æ˜¯ macOS ç³»ç»Ÿé™åˆ¶ï¼Œä½†æ˜¯å®ƒçš„å¸è½½å¼ºè¡Œå¡æ­»ï¼Œå¯¼è‡´æˆ‘è¿å…³æœºéƒ½ä¸èƒ½æ‰§è¡Œ<br>åœ¨æˆ‘é•¿æŒ‰å…³æœºæ‰§è¡Œå¼ºåˆ¶é‡å¯åï¼Œå®ƒåœ¨å¯åŠ¨ç•Œé¢å†ä¸€æ¬¡å¡æ­»äº†â€¦</p><p><img src="https://i.loli.net/2021/07/25/tBzuefaORyUcgb9.jpg" alt=""></p><p>æœ€åï¼Œä¸Šç½‘æŸ¥åˆ°è¿™ä¸ªè½¯ä»¶ä¼šåœ¨ <code>Contents/Resources</code> é‡Œé¢æ”¾ä¸€ä¸ªå¸è½½ shell è„šæœ¬ï¼Œç»ˆäºç®—æ˜¯å¸è½½æ‰äº†</p><hr><p>ä½†æ˜¯è¿˜æ˜¯å¾ˆæ…Œï¼Œæ¯•ç«Ÿå®ƒèƒ½å¹²å‡ºè¦ç›‘æ§æˆ‘è¿™ç§äº‹æƒ…ã€‚æˆ‘å°±æ€€ç–‘ä»–æ˜¯ä¸æ˜¯èƒŒåœ°é‡Œè¿˜æœ‰å¸è½½æ®‹ç•™<br>äºæ˜¯æˆ‘ä¸€é€š <code>ps -ef | grep GlobalProtect</code>ï¼Œå¥½å®¶ä¼™ï¼è¿˜çœŸæœ‰<br>å½“åœºåˆæ‡µäº†ï¼Œè¿™å•¥è¿›ç¨‹å•Šæ€ä¹ˆå¸è½½å®Œäº†è¿˜åœ¨è¿è¡Œï¼Œè€Œä¸”å±…ç„¶æ¯æ¬¡æŸ¥çœ‹ pid éƒ½ä¸ä¸€æ ·<br>åˆæ˜¯ä¸€é€šéªšæ“ä½œï¼Œç”šè‡³å·²ç»å…¥é­”äº†ï¼Œå¼€å§‹æ¯æ¬¡æŠŠè·å–åˆ°çš„ pid æå‡ºæ¥æ‰”ç»™ <code>kill</code>ï¼Œç„¶åå°±å‘ç°è¿™ä¸ªâ€œç—…æ¯’â€éå¸¸çš„é¡½å›ºå‘€ï¼Œæ¯ç§’éƒ½ä¼šæ¢ä¸€ä¸ªè¿›ç¨‹ idï¼Œè¿˜å˜æˆå°å¼ºäº†</p><p><img src="https://i.loli.net/2021/07/25/1UQyAg2D5BrWfJ8.png" alt=""></p><p>è¿‡äº†å¾ˆä¹…æ‰ååº”è¿‡æ¥ï¼Œè¿™ä¸å°±æ˜¯æˆ‘ <code>grep</code> è¿›ç¨‹å˜›â€¦<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>grep GlobalProtect</code> å°±æ˜¯ä¸€ä¸ª <code>grep</code> æŸ¥æ‰¾è¿›ç¨‹ï¼Œç„¶åå®ƒæ¯æ¬¡éƒ½ä¼šæŸ¥æ‰¾åˆ°è‡ªå·±â€¦å®³å¾—æˆ‘åœ¨è¿™æŠ˜è…¾ä¸€æ™šä¸Š</p>          </div>]]></content>
    
    <summary type="html">
    
      While running command ps -ef | grep xxx, I came up with a stupid circle
    
    </summary>
    
    
    
      <category term="ERROR" scheme="https://augists.top/tags/ERROR/"/>
    
  </entry>
  
</feed>
